(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{2975:function(t,e,n){"use strict";n.d(e,{JL:function(){return r},Zu:function(){return i}});class r{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class i{refCount(t){return o("refCount")}incRef(t){return o("incRef")}timerAvailable(){return!0}time(t){return o("time")}read(t){return o("read")}readSync(t){return o("readSync")}readToGPU(t,e){return o("readToGPU")}numDataIds(){return o("numDataIds")}disposeData(t,e){return o("disposeData")}write(t,e,n){return o("write")}move(t,e,n,r,i){return o("move")}createTensorFromGPUData(t,e,n){return o("createTensorFromGPUData")}memory(){return o("memory")}floatPrecision(){return o("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return o("dispose")}}function o(t){throw Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},3021:function(t,e,n){"use strict";function r(t,e){return t>e?1:t<e?-1:0}function i(t,e,n,r,i){return u(t,e,n,r,i,0)}function o(t,e,n,r,i,o){return u(t,e,n,r,i,0,!1,o,!0)}function a(t,e,n,r,i,o){return u(t,e,n,r,i,o,!0)}function u(t,e,n,i,o,a,u=!1,l=!1,c=!1){let h=[];for(let t=0;t<e.length;t++)e[t]>o&&h.push({score:e[t],boxIndex:t,suppressBeginIndex:0});h.sort(s);let f=a>0?-.5/a:0,d=[],p=[];for(;d.length<n&&h.length>0;){let e=h.pop(),{score:n,boxIndex:a,suppressBeginIndex:u}=e;if(n<o)break;let l=!1;for(let n=d.length-1;n>=u;--n){let r=function(t,e,n){let r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),s=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),d=(u-o)*(s-a),p=(h-l)*(f-c);if(d<=0||p<=0)return 0;let g=Math.max(Math.min(u,h)-Math.max(o,l),0)*Math.max(Math.min(s,f)-Math.max(a,c),0);return g/(d+p-g)}(t,a,d[n]);if(r>=i){l=!0;break}if(e.score=e.score*function(t,e,n){let r=Math.exp(e*n*n);return n<=t?r:0}(i,f,r),e.score<=o)break}e.suppressBeginIndex=d.length,!l&&(e.score===n?(d.push(a),p.push(e.score)):e.score>o&&function(t,e,n){let i=function(t,e,n){let r=0,i=t.length,o=0,a=!1;for(;r<i;){let u=n(e,t[o=r+(i-r>>>1)]);u>0?r=o+1:(i=o,a=!u)}return a?r:-r-1}(t,e,n||r);t.splice(i<0?-(i+1):i,0,e)}(h,e,s))}let g=d.length,m=n-g;l&&m>0&&(d.push(...Array(m).fill(0)),p.push(...Array(m).fill(0)));let y={selectedIndices:d};return u&&(y.selectedScores=p),c&&(y.validOutputs=g),y}function s(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}n.d(e,{GP:function(){return i},qP:function(){return o},pA:function(){return a}})},9846:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(5515);function i(t,e){let n=[];for(let t=0;t<e.length;t++)e[t]&&n.push(t);let i=(0,r.f)(t,"int32"),o=(0,r.f)([n.length,t.length],"int32");for(let e=0;e<n.length;e++){let r=i.indexToLoc(n[e]),a=e*t.length;o.values.set(r,a)}return o.toTensor()}},9681:function(t,e,n){"use strict";n.d(e,{BV:function(){return w},wv:function(){return b}});var r=n(2975),i=n(6472),o=n(5490),a=n(5047),u=n(9922),s=n(7177),l=n(2904),c=n(2771);class h{constructor(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new f)}profileKernel(t,e,n){let r,o;let a=()=>{r=n()},u=l.now();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{for(let t of(a(),r))t.dataSync();o=Promise.resolve({kernelMs:l.now()-u})}if((0,i.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let e=0;e<r.length;e++){let n=r[e];n.data().then(e=>{!function(t,e,n){if("float32"===e)for(let e=0;e<t.length;e++){let r=t[e];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}}(e,n.dtype,t)})}return{kernelName:t,outputs:r,inputs:e,timeMs:o.then(t=>t.kernelMs),extraInfo:o.then(t=>null!=t.getExtraProfileInfo?t.getExtraProfileInfo():"")}}logKernelProfile(t){let{kernelName:e,outputs:n,timeMs:r,inputs:i,extraInfo:o}=t;n.forEach(t=>{Promise.all([t.data(),r,o]).then(n=>{this.logger.logKernelProfile(e,t,n[0],n[1],i,n[2])})})}}class f{logKernelProfile(t,e,n,r,i,o){let a="number"==typeof r?c.oj(`${r}ms`,9):r.error,u=c.oj(t,25),s=e.rank,l=e.size,h=c.oj(e.shape.toString(),14),f="";for(let t in i){let n=i[t];if(null!=n){let r=n.shape||e.shape,i=r.length;f+=`${t}: ${i}D ${i>0?r:""} `}}console.log(`%c${u}	%c${a}	%c${s}D ${h}	%c${l}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var d=n(6150),p=n(5420);function g(t){return null!=t.kernelName}class m{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(let t in this.registeredVariables)this.registeredVariables[t].dispose()}}class y{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new m}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;let t=this.getSortedBackends();for(let e=0;e<t.length;e++){let n=t[e];if(await this.initializeBackend(n).success){await this.setBackend(n);return}}throw Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){let{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{let{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(s.Z(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;let{success:e,asyncInit:n}=this.initializeBackend(t);if(!(n?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new h(this.backendInstance),!0}setupRegisteredKernels(){(0,u.tr)(this.backendName).forEach(t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){(0,u.tr)(t).forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){let e=this.registryFactory[t];if(null==e)throw Error(`Cannot initialize backend ${t}, no registration found.`);try{let n=e.factory();if(!n||n instanceof r.Zu||"function"!=typeof n.then)return this.registry[t]=n,{success:!0,asyncInit:!1};{let e=++this.pendingBackendInitId,r=n.then(n=>!(e<this.pendingBackendInitId)&&(this.registry[t]=n,this.pendingBackendInit=null,!0)).catch(n=>!(e<this.pendingBackendInitId)&&(this.pendingBackendInit=null,s.Z(`Initialization of backend ${t} failed`),s.Z(n.stack||n.message),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(e){return s.Z(`Initialization of backend ${t} failed`),s.Z(e.stack||e.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw Error(`${t} backend not found in registry`);this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){let t=this.getSortedBackends();for(let e=0;e<t.length;e++){let n=t[e],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){let n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e),o=r.refCount(e);r.disposeData(e,!0),n.backend=t,t.move(e,i,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!=typeof t)throw Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>((n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(t,e,n){t();try{let t=n();return e(),t}catch(t){throw e(),t}}nextTensorId(){return y.nextTensorId++}nextVariableId(){return y.nextVariableId++}clone(t){let e=w.runKernel(a.iJz,{x:t});return this.addTapeNode(this.state.activeScope.name,{x:t},[e],t=>({x:()=>w.runKernel(a.RFZ,{x:t},{dtype:"float32"})}),[],{}),e}runKernel(t,e,n){if(null==this.backendName&&this.backend,!(null!=(0,u.pI)(t,this.backendName)))throw Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:e,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){let r=this.backend.numDataIds(),i=0;n.forEach(t=>{i+="complex64"===t.dtype?3:1});let o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-e-i-o;if(a>0)throw Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${t}'`)}runKernelFunc(t){let e,n,r,i;let o=[],a=this.isTapeOn(),s=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;let h=g(t)?t.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g(t)){let{kernelName:e,inputs:i,attrs:s}=t;null==this.backendName&&this.backend;let l=(0,u.pI)(e,this.backendName);c.hu(null!=l,()=>`Cannot find registered kernel '${e}' for backend '${this.backendName}'`),n=()=>{let t=this.backend.numDataIds(),n=Array.isArray(r=l.kernelFunc({inputs:i,attrs:s,backend:this.backend}))?r:[r];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(e,t,n);let u=n.map(t=>null!=t.rank?t:this.makeTensorFromTensorInfo(t));if(a){let t=this.getTensorsForGradient(e,i,u);o=this.saveTensorsForBackwardMode(t)}return u}}else{let{forwardFunc:e}=t,i=t=>{a&&(o=t.map(t=>this.keep(this.clone(t))))};n=()=>{let t=this.backend.numDataIds(),n=Array.isArray(r=this.tidy(()=>e(this.backend,i)))?r:[r];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,t,n),n}}let{inputs:f,attrs:d}=t,p=g(t)?null:t.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(i=this.profiler.profileKernel(h,f,()=>n()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(i),e=i.outputs):e=n()}),a&&this.addTapeNode(h,f,e,p,o,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:h,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(t=>null!=f[t]?f[t].shape:null),outputShapes:e.map(t=>t.shape),kernelTimeMs:i.timeMs,extraInfo:i.extraInfo}),Array.isArray(r)?e:e[0]}saveTensorsForBackwardMode(t){return t.map(t=>this.keep(this.clone(t)))}getTensorsForGradient(t,e,n){let r=(0,u.uk)(t);if(null!=r){let t;let i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(c.hu(Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),t=Object.keys(e).map(t=>e[t])):t=i.map(t=>e[t]);let a=n.filter((t,e)=>o[e]);return t.concat(a)}return[]}makeTensor(t,e,n,r){if(null==t)throw Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=t;"string"===n&&c.HD(t[0])&&(i=t.map(t=>l.encodeString(t)));let o=r.write(i,e,n),a=new d.es(e,n,o,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){let t=this.state.tensorInfo.get(o),e=(0,c.Ub)(i);this.state.numBytes+=e-t.bytes,t.bytes=e}return a}makeTensorFromDataId(t,e,n,r){let i={dataId:t,shape:e,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(t,e){let{dataId:n,shape:r,dtype:i}=t,o=new d.es(r,i,n,this.nextTensorId());return this.trackTensor(o,e),o}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));let i=new d._w(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(t,e){this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*c.bT(t.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n})),t instanceof d._w||this.track(t)}incRef(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}removeDataId(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;let e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,"string"===t.dtype&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),"complex64"!==t.dtype&&"string"!==t.dtype){let e=t.size*c.bT(t.dtype);this.state.numBytes-=e}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}disposeVariables(){for(let t in this.state.registeredVariables){let e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){let t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;let e=this.state.numBytes,n=this.state.numTensors;for(let r of(this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(t=>t.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,this.state.activeProfile.kernels))r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,i,o){let a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},s=(0,u.uk)(t);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=t=>(t=t.map((t,e)=>{if(null==t){let t=n[e],r=c.wT(t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t}),r(t.length>1?t:t[0],i,o))),this.state.activeTape.push(a)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){let e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){let e=(0,p.getTensorsInContainer)(t),n=new Set(e.map(t=>t.id));for(let t=0;t<this.state.activeScope.track.length;t++){let e=this.state.activeScope.track[t];e.kept||n.has(e.id)||e.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(t=>{t.kept||t.scopeId!==r.id||this.track(t)})}gradients(t,e,n,r=!1){if(c.hu(e.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));c.hu(i instanceof d.es,()=>"The result y returned by f() must be a tensor.");let o=function(t,e,n){let r={},i={};for(let t=0;t<e.length;t++)r[e[t].id]=!0;for(let n=0;n<t.length;n++){let o=t[n],a=o.inputs;for(let t in a){let n=a[t],u=!1;for(let t=0;t<e.length;t++)if(r[n.id]){o.outputs.forEach(t=>r[t.id]=!0),u=!0,i[o.id]=!0;break}if(u)break}}let o={};o[n.id]=!0;let a={};for(let e=t.length-1;e>=0;e--){let n=t[e],r=n.inputs;for(let t=0;t<n.outputs.length;t++)if(o[n.outputs[t].id]){for(let t in r)o[r[t].id]=!0,a[n.id]=!0;break}}let u=[];for(let e=0;e<t.length;e++){let n=t[e];if(i[n.id]&&a[n.id]){let t={};for(let e in n.inputs){let i=n.inputs[e];r[i.id]&&(t[e]=i)}let e=Object.assign({},n);e.inputs=t,e.outputs=n.outputs,u.push(e)}}return u}(this.state.activeTape,e,i);if(!r&&0===o.length&&e.length>0)throw Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let t={};t[i.id]=null==n?function(t){let e=(0,c.p8)((0,c.NA)(t),"float32");return w.makeTensor(e,t,"float32")}(i.shape):n,function(t,e,n,r){for(let i=e.length-1;i>=0;i--){let o=e[i],a=[];if(o.outputs.forEach(e=>{let n=t[e.id];null!=n?a.push(n):a.push(null)}),null==o.gradient)throw Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);let u=o.gradient(a);for(let e in o.inputs){if(!(e in u))throw Error(`Cannot backprop through input ${e}. Available gradients found: ${Object.keys(u)}.`);let i=n(()=>u[e]());if("float32"!==i.dtype)throw Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${e} must have 'float32' dtype, but has '${i.dtype}'`);let a=o.inputs[e];if(!c.cO(i.shape,a.shape))throw Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${e}' has shape '${i.shape}', which does not match the shape of the input '${a.shape}'`);if(null==t[a.id])t[a.id]=i;else{let e=t[a.id];t[a.id]=r(e,i),e.dispose()}}}}(t,o,t=>this.tidy(t),v);let r=e.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(t=>{for(let e of t.saved)e.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(t){return c.hu(c.mf(t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{let n;c.hu(e.every(t=>t instanceof d.es),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r={};return e.forEach((t,e)=>{r[e]=t}),this.runKernelFunc({forwardFunc:(r,i)=>(n=t(...e,i),c.hu(n.value instanceof d.es,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),c.hu(c.mf(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),backwardsFunc:(t,r)=>{let i=n.gradFunc(t,r),o=Array.isArray(i)?i:[i];c.hu(o.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),c.hu(o.every(t=>t instanceof d.es),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let a={};return o.forEach((t,e)=>{a[e]=()=>t}),a},inputs:r})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,e){return this.state.tensorInfo.get(t).backend.readToGPU(t,e)}async time(t){let e=(0,l.now)(),n=await this.backend.time(t);return n.wallMs=(0,l.now)()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){for(let t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new m,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function b(){let t=(0,o.D)();if(null==t._tfengine){let e=new i.qA(t);t._tfengine=new y(e)}return(0,i.iG)(t._tfengine.ENV),(0,d.Vi)(()=>t._tfengine),t._tfengine}y.nextTensorId=0,y.nextVariableId=0;let w=b();function v(t,e){return w.runKernel(a.mm_,{a:t,b:e})}},6472:function(t,e,n){"use strict";n.d(e,{OB:function(){return u},Vi:function(){return s},iG:function(){return l},qA:function(){return o}});var r=n(2771);let i="tfjsflags";class o{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=a,this.populateURLFlags()}setPlatform(t,e){null==this.platform||s.getBool("IS_TEST")||s.getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){let e=this.urlFlags[t];s.getBool("IS_TEST")||s.getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];let e=this.evaluateFlag(t);if((0,r.tI)(e))throw Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;let t=this.getQueryParams(this.global.location.search);i in t&&t[i].split(",").forEach(t=>{let[e,n]=t.split(":");this.urlFlags[e]=function(t,e){let n=e.toLowerCase();return"true"===n||"false"===n?"true"===n:`${+n}`===n?+n:e}(0,n)})}}function a(t){let e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>{var r,i;return r=n[0],i=n[1],e[decodeURIComponent(r)]=decodeURIComponent(i||""),n.join("=")}),e}function u(){return s}let s=null;function l(t){s=t}},5490:function(t,e,n){"use strict";let r;n.d(e,{D:function(){return o},R:function(){return a}});var i=n(257);function o(){if(null==r){let t;if("undefined"!=typeof window)t=window;else if(void 0!==n.g)t=n.g;else if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else throw Error("Could not find a global object");r=t}return r}function a(t,e){let n=function(){let t=o();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);{let r=e();return n.set(t,r),n.get(t)}}},5823:function(t,e,n){"use strict";n.d(e,{B9:function(){return m},CQ:function(){return w},Cd:function(){return v},Cn:function(){return y},G4:function(){return u},MX:function(){return c},N5:function(){return p},N8:function(){return h},N_:function(){return k},R:function(){return s},SR:function(){return f},VY:function(){return A},XV:function(){return b},cF:function(){return l},cj:function(){return E},jq:function(){return S},lu:function(){return g},sq:function(){return d},x3:function(){return x},y3:function(){return B},ze:function(){return _}});var r=n(9681),i=n(6472),o=n(6150),a=n(5420);function u(){(0,i.OB)().set("PROD",!0)}function s(){(0,i.OB)().set("DEBUG",!0)}function l(){(0,i.OB)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function c(t){(0,i.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function h(){r.BV.disposeVariables()}function f(){return r.BV}function d(){return r.BV.memory()}function p(t){return r.BV.profile(t)}function g(t,e){return r.BV.tidy(t,e)}function m(t){(0,a.getTensorsInContainer)(t).forEach(t=>t.dispose())}function y(t){return r.BV.keep(t)}function b(t){return r.BV.time(t)}function w(t){return r.BV.setBackend(t)}function v(){return r.BV.ready()}function k(){return r.BV.backendName}function E(t){r.BV.removeBackend(t)}function x(t){return r.BV.findBackend(t)}function _(t){return r.BV.findBackendFactory(t)}function S(t,e,n=1){return r.BV.registerBackend(t,e,n)}function B(){return r.BV.backend}function A(t,e){(0,i.OB)().setPlatform(t,e)}(0,o.FZ)(c)},4310:function(t,e,n){"use strict";n.d(e,{UQ:function(){return u},cb:function(){return f},fN:function(){return c},h7:function(){return l},pn:function(){return h},ti:function(){return s}});var r=n(9681),i=n(6150),o=n(971),a=n(2771);function u(t){return a.hu(a.mf(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{let i=(0,o._1)(e,"x","tf.grad","string_or_numeric"),u=null!=n?(0,o._1)(n,"dy","tf.grad"):null;return r.BV.tidy(()=>{let{value:e,grads:n}=r.BV.gradients(()=>t(i),[i],u);return null!=u&&a.k5(e.shape,u.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),d(n),n[0]})}}function s(t){return a.hu(a.mf(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{a.hu(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let i=(0,o.sI)(e,"args","tf.grads","string_or_numeric"),u=null!=n?(0,o._1)(n,"dy","tf.grads"):null;return r.BV.tidy(()=>{let{value:e,grads:n}=r.BV.gradients(()=>t(...i),i,u);return null!=u&&a.k5(e.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),d(n),n})}}function l(t){return a.hu(a.mf(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{a.hu(e instanceof i.es,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),a.hu(null==n||n instanceof i.es,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:o,value:u}=r.BV.gradients(()=>t(e),[e],n);return d(o),{grad:o[0],value:u}}}function c(t){return a.hu(a.mf(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{a.hu(Array.isArray(e)&&e.every(t=>t instanceof i.es),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),a.hu(null==n||n instanceof i.es,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let o=r.BV.gradients(()=>t(...e),e,n);return null!=n&&a.k5(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),d(o.grads),o}}function h(t,e){a.hu(a.mf(t),()=>"The f passed in variableGrads(f) must be a function"),a.hu(null==e||Array.isArray(e)&&e.every(t=>t instanceof i._w),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=null!=e;if(!n)for(let t in e=[],r.BV.registeredVariables)e.push(r.BV.registeredVariables[t]);let o=n?e.filter(t=>!t.trainable):null,u=e.length;e=e.filter(t=>t.trainable),a.hu(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${u} variables is trainable.`);let{value:s,grads:l}=r.BV.gradients(t,e,null,!0);a.hu(l.some(t=>null!=t),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),a.hu(0===s.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let c={};return e.forEach((t,e)=>{null!=l[e]&&(c[t.name]=l[e])}),null!=o&&o.forEach(t=>c[t.name]=null),{value:s,grads:c}}function f(t){return r.BV.customGrad(t)}function d(t){if(t.filter(t=>null==t).length>0)throw Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}},9094:function(t,e,n){"use strict";let r,i,o;n.r(e),n.d(e,{Abs:function(){return ea.SYM},Acos:function(){return ea.VGw},Acosh:function(){return ea.SpW},AdadeltaOptimizer:function(){return tI},AdagradOptimizer:function(){return tN},AdamOptimizer:function(){return tD},AdamaxOptimizer:function(){return tV},Add:function(){return ea.mm_},AddN:function(){return ea.Xze},All:function(){return ea.oT6},Any:function(){return ea.IKK},ArgMax:function(){return ea.sJF},ArgMin:function(){return ea.aJk},Asin:function(){return ea.M2y},Asinh:function(){return ea.qw7},Atan:function(){return ea.jMg},Atan2:function(){return ea.QCc},Atanh:function(){return ea.Oyi},AvgPool:function(){return ea.JhU},AvgPool3D:function(){return ea._k9},AvgPool3DGrad:function(){return ea.IMb},AvgPoolGrad:function(){return ea.ROF},BatchMatMul:function(){return ea.XLW},BatchToSpaceND:function(){return ea.zws},Bincount:function(){return ea.zvY},BitwiseAnd:function(){return ea.hCO},BroadcastArgs:function(){return ea.eEB},BroadcastTo:function(){return ea.Ly9},Cast:function(){return ea.RFZ},Ceil:function(){return ea.gJX},ClipByValue:function(){return ea.xnO},Complex:function(){return ea.Zz9},ComplexAbs:function(){return ea.yj2},Concat:function(){return ea.Eh3},Conv2D:function(){return ea.mhS},Conv2DBackpropFilter:function(){return ea.wUP},Conv2DBackpropInput:function(){return ea.wm},Conv3D:function(){return ea.x12},Conv3DBackpropFilterV2:function(){return ea.o2y},Conv3DBackpropInputV2:function(){return ea.ik2},Cos:function(){return ea.mc4},Cosh:function(){return ea.TR1},CropAndResize:function(){return ea.VcC},Cumprod:function(){return ea.Byc},Cumsum:function(){return ea.iHb},DataStorage:function(){return nY.JL},DenseBincount:function(){return ea.QRR},DepthToSpace:function(){return ea.T0n},DepthwiseConv2dNative:function(){return ea.cie},DepthwiseConv2dNativeBackpropFilter:function(){return ea.sL$},DepthwiseConv2dNativeBackpropInput:function(){return ea.y7R},Diag:function(){return ea.$w},Dilation2D:function(){return ea.p4S},Dilation2DBackpropFilter:function(){return ea.Vn9},Dilation2DBackpropInput:function(){return ea.ekb},Draw:function(){return ea.hGc},ENV:function(){return x.Vi},Einsum:function(){return ea.$g6},Elu:function(){return ea.SX0},EluGrad:function(){return ea.HEU},Environment:function(){return x.qA},Equal:function(){return ea.hdR},Erf:function(){return ea.Omj},Exp:function(){return ea.NEP},ExpandDims:function(){return ea.YFo},Expm1:function(){return ea.Y0y},FFT:function(){return ea.vwp},Fill:function(){return ea.deh},FlipLeftRight:function(){return ea.Uyb},Floor:function(){return ea.OR},FloorDiv:function(){return ea.jeX},FromPixels:function(){return ea.eBW},FusedBatchNorm:function(){return ea.sHE},FusedConv2D:function(){return ea._V0},FusedDepthwiseConv2D:function(){return ea.luS},GatherNd:function(){return ea.q1x},GatherV2:function(){return ea.qi_},Greater:function(){return ea.iZT},GreaterEqual:function(){return ea.Acj},IFFT:function(){return ea.Qg5},Identity:function(){return ea.iJz},Imag:function(){return ea.J_u},IsFinite:function(){return ea.avt},IsInf:function(){return ea.iWB},IsNan:function(){return ea.r7n},KernelBackend:function(){return nY.Zu},LRN:function(){return ea.eZ0},LRNGrad:function(){return ea.Hhh},LeakyRelu:function(){return ea.J$2},Less:function(){return ea.vtC},LessEqual:function(){return ea.CAk},LinSpace:function(){return ea.e7N},Log:function(){return ea.ZbH},Log1p:function(){return ea.kU},LogSoftmax:function(){return ea.qCd},LogicalAnd:function(){return ea.PYm},LogicalNot:function(){return ea.VfG},LogicalOr:function(){return ea.MZg},LogicalXor:function(){return ea.w6g},LowerBound:function(){return ea.qIC},MatrixBandPart:function(){return ea.J7O},Max:function(){return ea.YoZ},MaxPool:function(){return ea.mTV},MaxPool3D:function(){return ea.OAf},MaxPool3DGrad:function(){return ea.OU7},MaxPoolGrad:function(){return ea.OV7},MaxPoolWithArgmax:function(){return ea.vFR},Maximum:function(){return ea.BMI},Mean:function(){return ea.q2K},Min:function(){return ea.c17},Minimum:function(){return ea.q8u},MirrorPad:function(){return ea.jQs},Mod:function(){return ea.Vbg},MomentumOptimizer:function(){return tP},Multinomial:function(){return ea.NZg},Multiply:function(){return ea.wYn},Neg:function(){return ea.kuV},NonMaxSuppressionV3:function(){return ea.uv1},NonMaxSuppressionV4:function(){return ea.cye},NonMaxSuppressionV5:function(){return ea.W0H},NotEqual:function(){return ea.yQU},OP_SCOPE_SUFFIX:function(){return eJ.zvA},OneHot:function(){return ea.we_},OnesLike:function(){return ea.qWM},Optimizer:function(){return t$},OptimizerConstructors:function(){return eX},Pack:function(){return ea.QiL},PadV2:function(){return ea.lyA},Pool:function(){return ea.Kgp},Pow:function(){return ea.pe_},Prelu:function(){return ea.o0g},Prod:function(){return ea.DlI},RMSPropOptimizer:function(){return tL},RaggedGather:function(){return ea.dDz},RaggedRange:function(){return ea.CQl},RaggedTensorToTensor:function(){return ea.BiW},Range:function(){return ea.e6w},Rank:function(){return eZ.yw},Real:function(){return ea.xJR},RealDiv:function(){return ea.oHH},Reciprocal:function(){return ea.$HU},Reduction:function(){return eY.I},Relu:function(){return ea.qkr},Relu6:function(){return ea.SbG},Reshape:function(){return ea.HZH},ResizeBilinear:function(){return ea._Yw},ResizeBilinearGrad:function(){return ea.zbQ},ResizeNearestNeighbor:function(){return ea.dpD},ResizeNearestNeighborGrad:function(){return ea.Hmb},Reverse:function(){return ea.mKl},RotateWithOffset:function(){return ea.b9H},Round:function(){return ea.e07},Rsqrt:function(){return ea.bV0},SGDOptimizer:function(){return tF},ScatterNd:function(){return ea.xQA},SearchSorted:function(){return ea.nr8},Select:function(){return ea.PhF},Selu:function(){return ea.oFR},Sigmoid:function(){return ea.a5O},Sign:function(){return ea.i5y},Sin:function(){return ea.RQH},Sinh:function(){return ea.wYB},Slice:function(){return ea.p2w},Softmax:function(){return ea.Gcp},Softplus:function(){return ea.MRv},SpaceToBatchND:function(){return ea.TQc},SparseFillEmptyRows:function(){return ea.O3z},SparseReshape:function(){return ea.nhH},SparseSegmentMean:function(){return ea.w3H},SparseSegmentSum:function(){return ea.ZjV},SparseToDense:function(){return ea.D2d},SplitV:function(){return ea.L8s},Sqrt:function(){return ea.FKq},Square:function(){return ea.bK0},SquaredDifference:function(){return ea._tC},StaticRegexReplace:function(){return ea.e0R},Step:function(){return ea.h8e},StridedSlice:function(){return ea.jQk},StringNGrams:function(){return ea._JP},StringSplit:function(){return ea.s1s},StringToHashBucketFast:function(){return ea.XkS},Sub:function(){return ea.Tr8},Sum:function(){return ea.GBy},Tan:function(){return ea.sEM},Tanh:function(){return ea.MIZ},Tensor:function(){return th.es},TensorBuffer:function(){return th.YD},TensorScatterUpdate:function(){return ea.SIB},Tile:function(){return ea.n9L},TopK:function(){return ea.cWu},Transform:function(){return ea.wx7},Transpose:function(){return ea.G3Y},Unique:function(){return ea.kpP},Unpack:function(){return ea.ToN},UnsortedSegmentSum:function(){return ea.Qvg},UpperBound:function(){return ea.XDQ},Variable:function(){return th._w},ZerosLike:function(){return ea.RuY},_FusedMatMul:function(){return ea.usg},abs:function(){return eJ.WnP},acos:function(){return eJ.Khb},acosh:function(){return eJ.__u},add:function(){return eJ.IHx},addN:function(){return eJ.QBD},all:function(){return eJ.$6P},any:function(){return eJ.YjB},argMax:function(){return eJ.NqF},argMin:function(){return eJ.vHJ},asin:function(){return eJ.ZRM},asinh:function(){return eJ.VfV},atan:function(){return eJ.z4N},atan2:function(){return eJ.fvJ},atanh:function(){return eJ.C80},avgPool:function(){return eJ.wS1},avgPool3d:function(){return eJ.uR5},backend:function(){return td.y3},backend_util:function(){return y},basicLSTMCell:function(){return eJ.zEQ},batchNorm:function(){return eJ.tgs},batchNorm2d:function(){return eJ.Dxk},batchNorm3d:function(){return eJ.JY5},batchNorm4d:function(){return eJ.p3b},batchToSpaceND:function(){return eJ.E4h},bincount:function(){return eJ.yE8},bitwiseAnd:function(){return eJ.ycw},booleanMaskAsync:function(){return eJ.anm},broadcastArgs:function(){return eJ.XsQ},broadcastTo:function(){return eJ.UFq},broadcast_util:function(){return eo},browser:function(){return f},buffer:function(){return eJ.f3b},cast:function(){return eJ.pju},ceil:function(){return eJ.mDi},clipByValue:function(){return eJ.iUl},clone:function(){return eJ.d9v},complex:function(){return eJ.PYB},concat:function(){return eJ.zoF},concat1d:function(){return eJ.gME},concat2d:function(){return eJ.Izb},concat3d:function(){return eJ.MNy},concat4d:function(){return eJ.ZaL},conv1d:function(){return eJ.PAt},conv2d:function(){return eJ.Tek},conv2dTranspose:function(){return eJ.bc},conv3d:function(){return eJ.pdZ},conv3dTranspose:function(){return eJ.$QV},copyRegisteredKernels:function(){return eu.T3},cos:function(){return eJ.mCk},cosh:function(){return eJ.f9Y},cosineWindow:function(){return eJ.mew},cumprod:function(){return eJ.$Gn},cumsum:function(){return eJ.zbp},customGrad:function(){return tv.cb},denseBincount:function(){return eJ.ppE},deprecationWarn:function(){return td.MX},depthToSpace:function(){return eJ.nTT},depthwiseConv2d:function(){return eJ.B10},device_util:function(){return s},diag:function(){return eJ.Ka3},dilation2d:function(){return eJ.WmZ},disableDeprecationWarnings:function(){return td.cF},dispose:function(){return td.B9},disposeVariables:function(){return td.N8},div:function(){return eJ.hiC},divNoNan:function(){return eJ.NTj},dot:function(){return eJ.AKD},dropout:function(){return eJ.rvX},einsum:function(){return eJ.WYO},elu:function(){return eJ.pyx},enableDebugMode:function(){return td.R},enableProdMode:function(){return td.G4},enclosingPowerOfTwo:function(){return eJ.GRh},engine:function(){return td.SR},ensureShape:function(){return eJ.EDe},env:function(){return x.OB},equal:function(){return eJ.DgJ},erf:function(){return eJ.qNN},euclideanNorm:function(){return eJ.d2q},exp:function(){return eJ.Qqt},expandDims:function(){return eJ.dt4},expm1:function(){return eJ.t$B},eye:function(){return eJ.iyy},fft:function(){return eJ.kp_},fill:function(){return eJ.hlL},findBackend:function(){return td.x3},findBackendFactory:function(){return td.ze},floor:function(){return eJ.GWj},floorDiv:function(){return eJ.qPi},fused:function(){return eJ.imm},gather:function(){return eJ.Iqj},gatherND:function(){return eJ.dbB},gather_util:function(){return d},getBackend:function(){return td.N_},getGradient:function(){return eu.uk},getKernel:function(){return eu.pI},getKernelsForBackend:function(){return eu.tr},grad:function(){return tv.UQ},grads:function(){return tv.ti},greater:function(){return eJ.pjt},greaterEqual:function(){return eJ.brS},ifft:function(){return eJ.Sxn},imag:function(){return eJ.asL},image:function(){return eJ.BHj},inTopKAsync:function(){return eJ.V3u},io:function(){return c},irfft:function(){return eJ.wx0},isFinite:function(){return eJ.xVT},isInf:function(){return eJ.UWc},isNaN:function(){return eJ.i2d},keep:function(){return td.Cn},kernel_impls:function(){return b},leakyRelu:function(){return eJ.hi7},less:function(){return eJ.d9m},lessEqual:function(){return eJ.zN1},linalg:function(){return eJ.$r2},linspace:function(){return eJ.SX3},localResponseNormalization:function(){return eJ.G9k},log:function(){return eJ.cM7},log1p:function(){return eJ.Krr},logSigmoid:function(){return eJ.e_t},logSoftmax:function(){return eJ.CmS},logSumExp:function(){return eJ.l_t},logicalAnd:function(){return eJ.HvI},logicalNot:function(){return eJ.hJK},logicalOr:function(){return eJ.K5V},logicalXor:function(){return eJ.egP},losses:function(){return eJ.MB5},lowerBound:function(){return eJ.eab},matMul:function(){return eJ.OI3},math:function(){return h},max:function(){return eJ.Fp7},maxPool:function(){return eJ._sB},maxPool3d:function(){return eJ.YQQ},maxPoolWithArgmax:function(){return eJ.Ip$},maximum:function(){return eJ.gWQ},mean:function(){return eJ.J69},memory:function(){return td.sq},meshgrid:function(){return eJ.ry_},min:function(){return eJ.VV$},minimum:function(){return eJ.LTh},mirrorPad:function(){return eJ.VdP},mod:function(){return eJ.wQq},moments:function(){return eJ.Gi7},movingAverage:function(){return eJ.p_},mul:function(){return eJ.dC7},multiRNNCell:function(){return eJ.rq4},multinomial:function(){return eJ.SJ_},neg:function(){return eJ.W76},nextFrame:function(){return e1},norm:function(){return eJ.KOy},notEqual:function(){return eJ.Quu},oneHot:function(){return eJ.lfX},ones:function(){return eJ.iUs},onesLike:function(){return eJ.JpU},op:function(){return eJ.op},outerProduct:function(){return eJ.N2O},pad:function(){return eJ.vku},pad1d:function(){return eJ.pNR},pad2d:function(){return eJ.koy},pad3d:function(){return eJ.t1L},pad4d:function(){return eJ.lGY},pool:function(){return eJ.d_R},pow:function(){return eJ.sQ3},prelu:function(){return eJ.AL3},print:function(){return eJ.S0v},prod:function(){return eJ.WVs},profile:function(){return td.N5},raggedGather:function(){return eJ.$gW},raggedRange:function(){return eJ.VT$},raggedTensorToTensor:function(){return eJ.N89},rand:function(){return eJ.TN_},randomGamma:function(){return eJ.wzB},randomNormal:function(){return eJ.nGf},randomStandardNormal:function(){return eJ.ruB},randomUniform:function(){return eJ.LGj},randomUniformInt:function(){return eJ.pe5},range:function(){return eJ.w6H},ready:function(){return td.Cd},real:function(){return eJ.kwC},reciprocal:function(){return eJ.M25},registerBackend:function(){return td.jq},registerGradient:function(){return eu.Li},registerKernel:function(){return eu.wC},relu:function(){return eJ.UYe},relu6:function(){return eJ.btT},removeBackend:function(){return td.cj},reshape:function(){return eJ.XLQ},reverse:function(){return eJ.GYS},reverse1d:function(){return eJ.SDf},reverse2d:function(){return eJ.diP},reverse3d:function(){return eJ.sx7},reverse4d:function(){return eJ.mG2},rfft:function(){return eJ.QEs},round:function(){return eJ.NMM},rsqrt:function(){return eJ.bp0},scalar:function(){return eJ.iD$},scatterND:function(){return eJ.snQ},scatter_util:function(){return ey},searchSorted:function(){return eJ.zcT},selu:function(){return eJ.U8D},separableConv2d:function(){return eJ.U_I},serialization:function(){return l},setBackend:function(){return td.CQ},setPlatform:function(){return td.VY},setdiff1dAsync:function(){return eJ.ODp},sigmoid:function(){return eJ.XD2},sign:function(){return eJ.Xxe},signal:function(){return eJ.tdS},sin:function(){return eJ.O$l},sinh:function(){return eJ.R_K},slice:function(){return eJ.tPi},slice1d:function(){return eJ.jZU},slice2d:function(){return eJ.SmN},slice3d:function(){return eJ.CnO},slice4d:function(){return eJ.p0P},slice_util:function(){return p},softmax:function(){return eJ.XAC},softplus:function(){return eJ.Wvh},spaceToBatchND:function(){return eJ.fBT},sparse:function(){return eJ.rVs},sparseToDense:function(){return eJ.ers},spectral:function(){return eJ.uN7},split:function(){return eJ.Vl2},sqrt:function(){return eJ._b3},square:function(){return eJ.h62},squaredDifference:function(){return eJ.$i},squeeze:function(){return eJ.L9e},stack:function(){return eJ.knu},step:function(){return eJ.Nbs},stridedSlice:function(){return eJ.NXj},string:function(){return eJ.Z_8},sub:function(){return eJ.luU},sum:function(){return eJ.Smz},sumOutType:function(){return eZ.z4},tan:function(){return eJ.ORZ},tanh:function(){return eJ.AEp},tensor:function(){return eJ.XeE},tensor1d:function(){return eJ.RRF},tensor2d:function(){return eJ.odF},tensor3d:function(){return eJ.wOQ},tensor4d:function(){return eJ.yXz},tensor5d:function(){return eJ.Bfx},tensor6d:function(){return eJ.xZs},tensorScatterUpdate:function(){return eJ.Pg0},tensor_util:function(){return eD},test_util:function(){return g},tidy:function(){return td.lu},tile:function(){return eJ.Gg6},time:function(){return td.XV},topk:function(){return eJ.hg7},train:function(){return eQ},transpose:function(){return eJ.p4s},truncatedNormal:function(){return eJ.Xu6},unique:function(){return eJ.Two},unregisterGradient:function(){return eu.bt},unregisterKernel:function(){return eu.nE},unsortedSegmentSum:function(){return eJ.pUJ},unstack:function(){return eJ.HHK},upcastType:function(){return eZ.x8},upperBound:function(){return eJ.GaM},util:function(){return eO},valueAndGrad:function(){return tv.h7},valueAndGrads:function(){return tv.fN},variable:function(){return eJ.VD$},variableGrads:function(){return tv.pn},version_core:function(){return eH},where:function(){return eJ.arb},whereAsync:function(){return eJ.itS},zeros:function(){return eJ.lls},zerosLike:function(){return eJ.P84}});var a,u,s={};n.r(s),n.d(s,{isBrowser:function(){return E},isMobile:function(){return k},mockIsMobile:function(){return v}});var l={};n.r(l),n.d(l,{Serializable:function(){return t_},SerializationMap:function(){return tS},getRegisteredName:function(){return tA},registerClass:function(){return tB}});var c={};n.r(c),n.d(c,{CompositeArrayBuffer:function(){return M.w},browserFiles:function(){return tq},browserHTTPRequest:function(){return t1},concatenateArrayBuffers:function(){return B.JY},copyModel:function(){return tt},decodeWeights:function(){return B.dI},decodeWeightsStream:function(){return B.r},encodeWeights:function(){return B.yz},fromMemory:function(){return t6},fromMemorySync:function(){return t5},getLoadHandlers:function(){return N},getModelArtifactsForJSON:function(){return B.jN},getModelArtifactsForJSONSync:function(){return B.ji},getModelArtifactsInfoForJSON:function(){return B.Q},getSaveHandlers:function(){return T},getWeightSpecs:function(){return B.hu},http:function(){return t0},isHTTPScheme:function(){return tY},listModels:function(){return Y},loadWeights:function(){return tX},moveModel:function(){return te},registerLoadRouter:function(){return I},registerSaveRouter:function(){return $},removeModel:function(){return Q},weightsLoaderFactory:function(){return tZ},withSaveHandler:function(){return t8},withSaveHandlerSync:function(){return t7}});var h={};n.r(h),n.d(h,{confusionMatrix:function(){return ei}});var f={};n.r(f),n.d(f,{draw:function(){return ep},fromPixels:function(){return eg},fromPixelsAsync:function(){return eh},toPixels:function(){return ed}});var d={};n.r(d),n.d(d,{prepareAndValidate:function(){return em}});var p={};n.r(p),n.d(p,{assertParamsValid:function(){return eb},computeFlatOffset:function(){return eT},computeOutShape:function(){return ev},getNormalizedAxes:function(){return ex},isSliceContinous:function(){return eI},maskToAxes:function(){return ew},parseSliceParams:function(){return eN},sliceInfo:function(){return eM},startForAxis:function(){return eA},startIndicesWithElidedDims:function(){return e_},stopForAxis:function(){return e$},stopIndicesWithElidedDims:function(){return eS},stridesForAxis:function(){return eB},stridesWithElidedDims:function(){return ek}});var g={};n.r(g),n.d(g,{TEST_EPSILON_FLOAT16:function(){return eC},createVideoElement:function(){return eK},encodeStrings:function(){return function t(e){for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?t(r):e[n]=(0,eO.encodeString)(r)}return e}},expectArrayBuffersEqual:function(){return eq},expectArraysClose:function(){return eV},expectArraysEqual:function(){return eU},expectNumbersClose:function(){return eG},expectPromiseToFail:function(){return eL},expectValuesInRange:function(){return eW},play:function(){return ej},testEpsilon:function(){return eF}});var m={};n.r(m),n.d(m,{collectGatherOpShapeInfo:function(){return nj},computeOutShape:function(){return nK},segOpComputeOptimalWindowSize:function(){return nq}});var y={};n.r(y),n.d(y,{ERF_A1:function(){return nf},ERF_A2:function(){return nd},ERF_A3:function(){return np},ERF_A4:function(){return ng},ERF_A5:function(){return nm},ERF_P:function(){return nh},PARALLELIZE_THRESHOLD:function(){return ne},RowPartitionType:function(){return u},SELU_SCALE:function(){return nc},SELU_SCALEALPHA:function(){return nl},applyActivation:function(){return e5.QH},assertAndGetBroadcastShape:function(){return eo.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return e2.lB},assertParamsConsistent:function(){return e3},assignToTypedArray:function(){return nx},axesAreInnerMostDims:function(){return e2.YB},calculateShapes:function(){return ey.calculateShapes},checkEinsumDimSizes:function(){return nI},checkPadOnDimRoundingMode:function(){return e6.m},combineLocations:function(){return e2.Vh},combineRaggedTensorToTensorShapes:function(){return e8},complexWithEvenIndex:function(){return nv},complexWithOddIndex:function(){return nk},computeConv2DInfo:function(){return e6.Ix},computeConv3DInfo:function(){return e6.jw},computeDefaultPad:function(){return e6.aO},computeDilation2DInfo:function(){return e6.Rf},computeOptimalWindowSize:function(){return nn},computeOutAndReduceShapes:function(){return e2.kz},computeOutShape:function(){return e4},computePool2DInfo:function(){return e6.Xw},computePool3DInfo:function(){return e6.pl},convertConv2DDataFormat:function(){return e6.sl},decodeEinsumEquation:function(){return nA},eitherStridesOrDilationsAreOne:function(){return e6.jT},expandShapeToKeepDim:function(){return e2.rv},exponent:function(){return nS},exponents:function(){return n_},fromStringArrayToUint8:function(){return nX},fromUint8ToStringArray:function(){return nH},getAxesPermutation:function(){return e2.Q3},getBroadcastDims:function(){return eo.getBroadcastDims},getComplexWithIndex:function(){return nE},getEinsumComputePath:function(){return nT},getEinsumPermutation:function(){return n$},getFusedBiasGradient:function(){return e5.pf},getFusedDyActivation:function(){return e5.Fr},getImageCenter:function(){return nr},getInnerMostAxes:function(){return e2.sY},getPermuted:function(){return no},getRaggedRank:function(){return e9},getReductionAxes:function(){return eo.getReductionAxes},getReshaped:function(){return ni},getReshapedPermuted:function(){return na},getRowPartitionTypesHelper:function(){return e7},getSliceBeginCoords:function(){return nu},getSliceSize:function(){return ns},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return nR},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return nD},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return nO},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return nF},getSparseReshapeInputOutputMismatchErrorMessage:function(){return nL},getSparseReshapeInputOutputMultipleErrorMessage:function(){return nP},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return nC},getSparseReshapeNegativeOutputDimErrorMessage:function(){return nV},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return nW},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return nU},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return nG},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return nz},getUndoAxesPermutation:function(){return e2.LJ},isIdentityPermutation:function(){return nN},log:function(){return ny.c},mergeRealAndImagArrays:function(){return nb},prepareAndValidate:function(){return em},prepareSplitSize:function(){return nM},segment_util:function(){return m},shouldFuse:function(){return e5.uy},slice_util:function(){return p},splitRealAndImagArrays:function(){return nw},stridesOrDilationsArePositive:function(){return e6.U3},tupleValuesAreOne:function(){return e6.I0},upcastType:function(){return eZ.x8},validateDefaultValueShape:function(){return nt},validateInput:function(){return ey.validateInput},validateUpdateShape:function(){return ey.validateUpdateShape},warn:function(){return ny.Z}});var b={};n.r(b),n.d(b,{nonMaxSuppressionV3Impl:function(){return nZ.GP},nonMaxSuppressionV4Impl:function(){return nZ.qP},nonMaxSuppressionV5Impl:function(){return nZ.pA},whereImpl:function(){return nJ.Z}});var w=n(9681);function v(t){r=t}function k(t){if(void 0!==r)return r;if(t||"undefined"!=typeof navigator&&null!=navigator){if(t||(t=navigator),"ReactNative"===t.product)return!0;let e=t.userAgent||t.vendor||("undefined"!=typeof window?window.opera:"");if(!e){let e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function E(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var x=n(6472),_=n(257);let S=(0,x.OB)();S.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),S.registerFlag("IS_BROWSER",()=>E()),S.registerFlag("IS_NODE",()=>void 0!==_&&void 0!==_.versions&&void 0!==_.versions.node),S.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),S.registerFlag("IS_SAFARI",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),S.registerFlag("PROD",()=>!1),S.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>S.getBool("DEBUG")),S.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),S.registerFlag("IS_TEST",()=>!1),S.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>S.getBool("DEBUG")),S.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),S.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),S.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var B=n(3850);class A{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==A.instance&&(A.instance=new A),A.instance}static registerSaveRouter(t){A.getInstance().saveRouters.push(t)}static registerLoadRouter(t){A.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return A.getHandlers(t,"save")}static getLoadHandlers(t,e){return A.getHandlers(t,"load",e)}static getHandlers(t,e,n){let r=[];return("load"===e?A.getInstance().loadRouters:A.getInstance().saveRouters).forEach(e=>{let i=e(t,n);null!==i&&r.push(i)}),r}}let $=t=>A.registerSaveRouter(t),I=t=>A.registerLoadRouter(t),T=t=>A.getSaveHandlers(t),N=(t,e)=>A.getLoadHandlers(t,e);var M=n(807);let R="tensorflowjs",D="models_store",O="model_info_store";function C(){if(!(0,x.OB)().getBool("IS_BROWSER"))throw Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t="undefined"==typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw Error("The current browser does not appear to support IndexedDB.");return e}function V(t){let e=t.result;e.createObjectStore(D,{keyPath:"modelPath"}),e.createObjectStore(O,{keyPath:"modelPath"})}class F{constructor(t){if(this.indexedDB=C(),null==t||!t)throw Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((t,n)=>{let r=this.indexedDB.open(R,1);r.onupgradeneeded=()=>V(r),r.onsuccess=()=>{let i=r.result;if(null==e){let e=i.transaction(D,"readonly"),r=e.objectStore(D).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(r.result.modelArtifacts)},r.onerror=t=>(i.close(),n(r.error)),e.oncomplete=()=>i.close()}else{let r,o;e.weightData=M.w.join(e.weightData);let a=(0,B.Q)(e),u=i.transaction(O,"readwrite"),s=u.objectStore(O);try{r=s.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(t){return n(t)}r.onsuccess=()=>{let r;let l=(o=i.transaction(D,"readwrite")).objectStore(D);try{r=l.put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:a})}catch(t){return n(t)}r.onsuccess=()=>t({modelArtifactsInfo:a}),r.onerror=t=>{let e=(s=u.objectStore(O)).delete(this.modelPath);e.onsuccess=()=>(i.close(),n(r.error)),e.onerror=t=>(i.close(),n(r.error))}},r.onerror=t=>(i.close(),n(r.error)),u.oncomplete=()=>{null==o?i.close():o.oncomplete=()=>i.close()}}},r.onerror=t=>n(r.error)})}}F.URL_SCHEME="indexeddb://";let P=t=>{var e;return(0,x.OB)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(F.URL_SCHEME)?(e=t.slice(F.URL_SCHEME.length),new F(e)):null};A.registerSaveRouter(P),A.registerLoadRouter(P);class L{constructor(){this.indexedDB=C()}async listModels(){return new Promise((t,e)=>{let n=this.indexedDB.open(R,1);n.onupgradeneeded=()=>V(n),n.onsuccess=()=>{let r=n.result,i=r.transaction(O,"readonly"),o=i.objectStore(O).getAll();o.onsuccess=()=>{let e={};for(let t of o.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},o.onerror=t=>(r.close(),e(o.error)),i.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)})}async removeModel(t){var e;return t=(e=t).startsWith(F.URL_SCHEME)?e.slice(F.URL_SCHEME.length):e,new Promise((e,n)=>{let r=this.indexedDB.open(R,1);r.onupgradeneeded=()=>V(r),r.onsuccess=()=>{let i;let o=r.result,a=o.transaction(O,"readwrite"),u=a.objectStore(O),s=u.get(t);s.onsuccess=()=>{if(null==s.result)return o.close(),n(Error(`Cannot find model with path '${t}' in IndexedDB.`));{let r=u.delete(t),a=()=>{let r=(i=o.transaction(D,"readwrite")).objectStore(D).delete(t);r.onsuccess=()=>e(s.result.modelArtifactsInfo),r.onerror=t=>n(s.error)};r.onsuccess=a,r.onerror=t=>(a(),o.close(),n(s.error))}},s.onerror=t=>(o.close(),n(s.error)),a.oncomplete=()=>{null==i?o.close():i.oncomplete=()=>o.close()}},r.onerror=t=>n(r.error)})}}var U=n(2771);let G="tensorflowjs_models",z="info";function W(t){return{info:[G,t,z].join("/"),topology:[G,t,"model_topology"].join("/"),weightSpecs:[G,t,"weight_specs"].join("/"),weightData:[G,t,"weight_data"].join("/"),modelMetadata:[G,t,"model_metadata"].join("/")}}function q(t){for(let e of Object.values(t))window.localStorage.removeItem(e)}class K{constructor(t){if(!(0,x.OB)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=W(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=(0,B.Q)(t),i=M.w.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(0,B._n)(i));let o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:r}}catch(t){throw q(this.keys),Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){let t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=r;let i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){let t=JSON.parse(i);e.format=t.format,e.generatedBy=t.generatedBy,e.convertedBy=t.convertedBy,null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(e.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(e.trainingConfig=t.trainingConfig)}let o=this.LS.getItem(this.keys.weightData);if(null==o)throw Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=(0,B.n7)(o),e}}K.URL_SCHEME="localstorage://";let j=t=>{var e;return(0,x.OB)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(K.URL_SCHEME)?(e=t.slice(K.URL_SCHEME.length),new K(e)):null};A.registerSaveRouter(j),A.registerLoadRouter(j);class H{constructor(){(0,U.hu)((0,x.OB)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,U.hu)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let t={},e=G+"/",n="/"+z;for(let r=0;r<this.LS.length;++r){let i=this.LS.key(r);i.startsWith(e)&&i.endsWith(n)&&(t[function(t){let e=t.split("/");if(e.length<3)throw Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join("/")}(i)]=JSON.parse(this.LS.getItem(i)))}return t}async removeModel(t){var e;let n=W(t=(e=t).startsWith(K.URL_SCHEME)?e.slice(K.URL_SCHEME.length):e);if(null==this.LS.getItem(n.info))throw Error(`Cannot find model at path '${t}'`);let r=JSON.parse(this.LS.getItem(n.info));return q(n),r}}class X{constructor(){this.managers={}}static getInstance(){return null==X.instance&&(X.instance=new X),X.instance}static registerManager(t,e){(0,U.hu)(null!=t,()=>"scheme must not be undefined or null."),t.endsWith("://")&&(t=t.slice(0,t.indexOf("://"))),(0,U.hu)(t.length>0,()=>"scheme must not be an empty string.");let n=X.getInstance();(0,U.hu)(null==n.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),n.managers[t]=e}static getManager(t){let e=X.getInstance().managers[t];if(null==e)throw Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(X.getInstance().managers)}}function Z(t){if(-1===t.indexOf("://"))throw Error(`The url string provided does not contain a scheme. Supported schemes are: ${X.getSchemes().join(",")}`);return{scheme:t.split("://")[0],path:t.split("://")[1]}}async function J(t,e,n=!1){(0,U.hu)(t!==e,()=>`Old path and new path are the same: '${t}'`);let r=A.getLoadHandlers(t);(0,U.hu)(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),(0,U.hu)(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);let i=r[0],o=A.getSaveHandlers(e);(0,U.hu)(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),(0,U.hu)(o.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);let a=o[0],u=Z(t).scheme,s=Z(t).path,l=u===Z(t).scheme,c=await i.load();n&&l&&await X.getManager(u).removeModel(s);let h=await a.save(c);return n&&!l&&await X.getManager(u).removeModel(s),h.modelArtifactsInfo}async function Y(){let t=X.getSchemes(),e={};for(let n of t){let t=await X.getManager(n).listModels();for(let r in t)e[n+"://"+r]=t[r]}return e}async function Q(t){let e=Z(t);return X.getManager(e.scheme).removeModel(e.path)}async function tt(t,e){return J(t,e,!1)}async function te(t,e){return J(t,e,!0)}var tn=n(8719);class tr{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw Error(`Browser's encoder only supports utf-8, but got ${e}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}setTimeoutCustom(t,e){if("undefined"==typeof window||!(0,x.OB)().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,e);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",t=>{t.source===window&&t.data.name===this.messageName&&(t.stopPropagation(),(0,this.functionRefs[t.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0))}isTypedArray(t){return(0,tn.j)(t)}}if((0,x.OB)().get("IS_BROWSER")){(0,x.OB)().setPlatform("browser",new tr);try{X.registerManager(K.URL_SCHEME,new H)}catch(t){}try{X.registerManager(F.URL_SCHEME,new L)}catch(t){}}var ti=n(257);let to={importFetch:()=>n(4319)};class ta{constructor(){this.util=n(8628),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return null!=(0,x.OB)().global.fetch?(0,x.OB)().global.fetch(t,e):(null==i&&(i=to.importFetch()),i(t,e))}now(){let t=ti.hrtime();return 1e3*t[0]+t[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}(0,x.OB)().get("IS_NODE")&&!(0,x.OB)().get("IS_BROWSER")&&(0,x.OB)().setPlatform("node",new ta);var tu=n(5515),ts=n(8893),tl=n(699),tc=n(7290),th=n(6150);(0,w.wv)();let tf={buffer:tu.f,cast:ts.p,clone:tl.d,print:tc.S};(0,th.Vp)(tf);var td=n(5823),tp=n(3266),tg=n(3511),tm=n(5314),ty=n(9467),tb=n(7941),tw=n(2898),tv=n(4310),tk=n(6070);let tE=new Map,tx=new Map;class t_{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class tS{constructor(){this.classNameMap={}}static getMap(){return null==tS.instance&&(tS.instance=new tS),tS.instance}static register(t){tS.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function tB(t,e,n){(0,U.hu)(null!=t.className,()=>"Class being registered does not have the static className property defined."),(0,U.hu)("string"==typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),(0,U.hu)(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),void 0===e&&(e="Custom"),void 0===n&&(n=t.className);let r=e+">"+n;return tS.register(t),tE.set(r,t),tx.set(t,r),t}function tA(t){return tx.has(t)?tx.get(t):t.className}class t$ extends t_{minimize(t,e=!1,n){let{value:r,grads:i}=this.computeGradients(t,n);if(null!=n){let t=n.map(t=>({name:t.name,tensor:i[t.name]}));this.applyGradients(t)}else this.applyGradients(i);return((0,td.B9)(i),e)?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return(0,tv.pn)(t,e)}dispose(){null!=this.iterations_&&(0,td.B9)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,tk.i)(this.iterations_,"int32")}}async getWeights(){throw Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(t$,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});class tI extends t${static get className(){return"Adadelta"}constructor(t,e,n=null){super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=w.BV.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{let r=w.BV.registeredVariables[e];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${e}/accum_grad`,variable:(0,td.lu)(()=>(0,tw.P)(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${e}/accum_var`,variable:(0,td.lu)(()=>(0,tw.P)(r).variable(!1))});let i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;let o=this.accumulatedGrads[n].variable,a=this.accumulatedUpdates[n].variable;(0,td.lu)(()=>{let t=(0,tp.I)((0,tm.d)(o,this.rho),(0,tm.d)((0,tb.h)(i),1-this.rho)),e=(0,tm.d)((0,tg.h)((0,ty._)((0,tp.I)(a,this.epsilon)),(0,ty._)((0,tp.I)(o,this.epsilon))),i),n=(0,tp.I)((0,tm.d)(a,this.rho),(0,tm.d)((0,tb.h)(e),1-this.rho));o.assign(t),a.assign(n);let u=(0,tp.I)((0,tm.d)(e,-this.learningRate),r);r.assign(u)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,td.B9)(this.accumulatedGrads.map(t=>t.variable)),(0,td.B9)(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){let t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){let e=(t=await this.extractIterations(t)).length/2;this.accumulatedGrads=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedUpdates=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}var tT=n(180);class tN extends t${static get className(){return"Adagrad"}constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{let r=w.BV.registeredVariables[e];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${e}/accumulator`,variable:(0,td.lu)(()=>(0,tT.h)(r.shape,this.initialAccumulatorValue).variable(!1))});let i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;let o=this.accumulatedGrads[n].variable;(0,td.lu)(()=>{let t=(0,tp.I)(o,(0,tb.h)(i));o.assign(t);let e=(0,tp.I)((0,tm.d)((0,tg.h)(i,(0,ty._)((0,tp.I)(t,w.BV.backend.epsilon()))),-this.learningRate),r);r.assign(e)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,td.B9)(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),this.accumulatedGrads=t.map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}var tM=n(2611),tR=n(5799);class tD extends t${static get className(){return"Adam"}constructor(t,e,n,r=null){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,td.lu)(()=>{this.accBeta1=(0,tk.i)(e).variable(),this.accBeta2=(0,tk.i)(n).variable()}),null==r&&(this.epsilon=w.BV.backend.epsilon())}applyGradients(t){let e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);(0,td.lu)(()=>{let n=(0,tR.l)(1,this.accBeta1),r=(0,tR.l)(1,this.accBeta2);e.forEach((e,i)=>{let o=w.BV.registeredVariables[e];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${e}/m`,variable:(0,td.lu)(()=>(0,tw.P)(o).variable(!1))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:`${e}/v`,variable:(0,td.lu)(()=>(0,tw.P)(o).variable(!1))});let a=Array.isArray(t)?t[i].tensor:t[e];if(null==a)return;let u=this.accumulatedFirstMoment[i].variable,s=this.accumulatedSecondMoment[i].variable,l=(0,tp.I)((0,tm.d)(u,this.beta1),(0,tm.d)(a,1-this.beta1)),c=(0,tp.I)((0,tm.d)(s,this.beta2),(0,tm.d)((0,tb.h)(a),1-this.beta2)),h=(0,tg.h)(l,n),f=(0,tg.h)(c,r);u.assign(l),s.assign(c);let d=(0,tp.I)((0,tm.d)((0,tg.h)(h,(0,tp.I)((0,ty._)(f),this.epsilon)),-this.learningRate),o);o.assign(d)}),this.accBeta1.assign((0,tm.d)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,tm.d)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,td.B9)(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedSecondMoment&&(0,td.B9)(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){let t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),(0,td.lu)(()=>{this.accBeta1.assign((0,tM.s)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,tM.s)(this.beta2,this.iterations_+1))});let e=t.length/2;this.accumulatedFirstMoment=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedSecondMoment=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}var tO=n(9044),tC=n(2673);class tV extends t${static get className(){return"Adamax"}constructor(t,e,n,r=null,i=0){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,td.lu)(()=>{this.iteration=(0,tk.i)(0).variable(),this.accBeta1=(0,tk.i)(e).variable()}),null==r&&(this.epsilon=w.BV.backend.epsilon())}applyGradients(t){let e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);(0,td.lu)(()=>{let n=(0,tR.l)(1,this.accBeta1),r=(0,tg.h)(-this.learningRate,(0,tp.I)((0,tm.d)(this.iteration,this.decay),1));e.forEach((e,i)=>{let o=w.BV.registeredVariables[e];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${e}/m`,variable:(0,tw.P)(o).variable(!1)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:`${e}/v`,variable:(0,tw.P)(o).variable(!1)});let a=Array.isArray(t)?t[i].tensor:t[e];if(null==a)return;let u=this.accumulatedFirstMoment[i].variable,s=this.accumulatedWeightedInfNorm[i].variable,l=(0,tp.I)((0,tm.d)(u,this.beta1),(0,tm.d)(a,1-this.beta1)),c=(0,tm.d)(s,this.beta2),h=(0,tO.W)(a),f=(0,tC.g)(c,h);u.assign(l),s.assign(f);let d=(0,tp.I)((0,tm.d)((0,tg.h)(r,n),(0,tg.h)(l,(0,tp.I)(f,this.epsilon))),o);o.assign(d)}),this.iteration.assign((0,tp.I)(this.iteration,1)),this.accBeta1.assign((0,tm.d)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,td.B9)(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedWeightedInfNorm&&(0,td.B9)(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}class tF extends t${static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{let r=Array.isArray(t)?t[n].tensor:t[e];if(null==r)return;let i=w.BV.registeredVariables[e];(0,td.lu)(()=>{let t=(0,tp.I)((0,tm.d)(this.c,r),i);i.assign(t)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=(0,td.Cn)((0,tk.i)(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(0!==(t=await this.extractIterations(t)).length)throw Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}class tP extends tF{static get className(){return"Momentum"}constructor(t,e,n=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=(0,tk.i)(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{let r=w.BV.registeredVariables[e];null==this.accumulations[n]&&(this.accumulations[n]={originalName:`${e}/momentum`,variable:(0,td.lu)(()=>(0,tw.P)(r).variable(!1))});let i=this.accumulations[n].variable,o=Array.isArray(t)?t[n].tensor:t[e];null!=o&&(0,td.lu)(()=>{let t;let e=(0,tp.I)((0,tm.d)(this.m,i),o);t=this.useNesterov?(0,tp.I)((0,tm.d)(this.c,(0,tp.I)(o,(0,tm.d)(e,this.m))),r):(0,tp.I)((0,tm.d)(this.c,e),r),i.assign(e),r.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,td.B9)(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),this.accumulations=t.map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}class tL extends t${static get className(){return"RMSProp"}constructor(t,e=.9,n=0,r=null,i=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=w.BV.backend.epsilon()),null==t)throw Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{let r=w.BV.registeredVariables[e];null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${e}/rms`,variable:(0,td.lu)(()=>(0,tw.P)(r).variable(!1))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${e}/momentum`,variable:(0,td.lu)(()=>(0,tw.P)(r).variable(!1))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${e}/mg`,variable:(0,td.lu)(()=>(0,tw.P)(r).variable(!1))});let i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;let o=this.accumulatedMeanSquares[n].variable,a=this.accumulatedMoments[n].variable;(0,td.lu)(()=>{let t=(0,tp.I)((0,tm.d)(o,this.decay),(0,tm.d)((0,tb.h)(i),1-this.decay));if(this.centered){let e=this.accumulatedMeanGrads[n].variable,u=(0,tp.I)((0,tm.d)(e,this.decay),(0,tm.d)(i,1-this.decay)),s=(0,tg.h)((0,tm.d)(i,this.learningRate),(0,ty._)((0,tR.l)(t,(0,tp.I)((0,tb.h)(u),this.epsilon)))),l=(0,tp.I)((0,tm.d)(a,this.momentum),s);o.assign(t),e.assign(u),a.assign(l);let c=(0,tR.l)(r,l);r.assign(c)}else{let t=(0,tp.I)((0,tm.d)(o,this.decay),(0,tm.d)((0,tb.h)(i),1-this.decay)),e=(0,tp.I)((0,tm.d)(a,this.momentum),(0,tg.h)((0,tm.d)(i,this.learningRate),(0,ty._)((0,tp.I)(t,this.epsilon))));o.assign(t),a.assign(e);let n=(0,tR.l)(r,e);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,td.B9)(this.accumulatedMeanSquares.map(t=>t.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,td.B9)(this.accumulatedMeanGrads.map(t=>t.variable)),null!=this.accumulatedMoments&&(0,td.B9)(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){let t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);let e=this.centered?t.length/3:t.length/2;this.accumulatedMeanSquares=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedMoments=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}let tU=[tI,tN,tD,tV,tP,tL,tF];function tG(t){return new Promise(t=>setTimeout(t)).then(t)}class tz{constructor(t){if(!(0,x.OB)().getBool("IS_BROWSER"))throw Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(tz.URL_SCHEME)&&(t=t.slice(tz.URL_SCHEME.length)),(null==t||0===t.length)&&(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}async save(t){if("undefined"==typeof document)throw Error("Browser downloads are not supported in this environment since `document` is not present");let e=M.w.join(t.weightData),n=window.URL.createObjectURL(new Blob([e],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let e=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r=(0,B.Yd)(t,e),i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await tG(()=>o.dispatchEvent(new MouseEvent("click"))),null!=t.weightData){let t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=n,await tG(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:(0,B.Q)(t)}}}}tz.URL_SCHEME="downloads://";class tW{constructor(t){if(null==t||t.length<1)throw Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,e)=>{let n=new FileReader;n.onload=n=>{let r=JSON.parse(n.target.result),i=r.modelTopology;if(null==i){e(Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(null==r.weightsManifest){e(Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(0===this.weightsFiles.length){t({modelTopology:i});return}t((0,B.jN)(r,t=>this.loadWeights(t)))},n.onerror=t=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)})}loadWeights(t){let e=[],n=[];for(let r of t)e.push(...r.weights),n.push(...r.paths);let r=this.checkManifestAndWeightFiles(t);return Promise.all(n.map(t=>this.loadWeightsFile(t,r[t]))).then(t=>[e,t])}loadWeightsFile(t,e){return new Promise((n,r)=>{let i=new FileReader;i.onload=t=>{n(t.target.result)},i.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),i.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(t){let e=[],n=this.weightsFiles.map(t=>(0,B.EZ)(t.name)),r={};for(let i of t)i.paths.forEach(t=>{let i=(0,B.EZ)(t);if(-1!==e.indexOf(i))throw Error(`Duplicate file basename found in weights manifest: '${i}'`);if(e.push(i),-1===n.indexOf(i))throw Error(`Weight file with basename '${i}' is not provided.`);r[t]=this.weightsFiles[n.indexOf(i)]});if(e.length!==this.weightsFiles.length)throw Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function tq(t){return new tW(t)}function tK(t,e,n,r){var i,o;(0,U.hu)(null!=t&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array"),i=n=null==n?0:n,o=r=null==r?1:r,(0,U.hu)(i>=0&&i<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${i}`),(0,U.hu)(o>=0&&o<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${o}`),(0,U.hu)(o>=i,()=>`startFraction must be no more than endFraction, but got startFraction ${i} and endFraction ${o}`);let a=0;return Promise.all(t.map(i=>(i.then(i=>(e(n+ ++a/t.length*(r-n)),i)),i)))}A.registerSaveRouter(t=>(0,x.OB)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(tz.URL_SCHEME)?function(t="model"){return new tz(t)}(t.slice(tz.URL_SCHEME.length)):null);var tj=n(8123);async function tH(t,e){null==e&&(e={});let n=null==e.fetchFunc?(0,x.OB)().platform.fetch:e.fetchFunc,r=t.map(t=>n(t,e.requestInit,{isBinary:!0})),i=(null==e.onProgress?await Promise.all(r):await tK(r,e.onProgress,0,.5)).map(t=>t.arrayBuffer());return null==e.onProgress?await Promise.all(i):await tK(i,e.onProgress,.5,1)}async function tX(t,e="",n,r){return tZ(t=>tH(t,{requestInit:r}))(t,e,n)}function tZ(t){return async(e,n="",r)=>{let i=e.map(()=>!1),o={},a=null!=r?r.map(()=>!1):[],u=[];if(e.forEach((t,e)=>{let n=0;t.weights.forEach(t=>{let s="quantization"in t?t.quantization.dtype:t.dtype,l=tj.J[s]*U.NA(t.shape),c=()=>{i[e]=!0,null==o[e]&&(o[e]=[]),o[e].push({manifestEntry:t,groupOffset:n,sizeBytes:l})};null!=r?r.forEach((e,n)=>{e===t.name&&(c(),a[n]=!0)}):c(),u.push(t.name),n+=l})}),!a.every(t=>t)){let t=r.filter((t,e)=>!a[e]);throw Error(`Could not find weights in manifest with names: ${t.join(", ")}. 
Manifest JSON has weights with names: ${u.join(", ")}.`)}let s=i.reduce((t,e,n)=>(e&&t.push(n),t),[]),l=[];s.forEach(t=>{e[t].paths.forEach(t=>{let e=n+(n.endsWith("/")?"":"/")+t;l.push(e)})});let c=await t(l),h={},f=0;return s.forEach(t=>{let n=e[t].paths.length,r=new M.w(c.slice(f,f+n));o[t].forEach(t=>{let e=r.slice(t.groupOffset,t.groupOffset+t.sizeBytes),n=(0,B.dI)(e,[t.manifestEntry]);for(let t in n)h[t]=n[t]}),f+=n}),h}}class tJ{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.weightUrlConverter=e.weightUrlConverter,null!=e.fetchFunc?((0,U.hu)("function"==typeof e.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=e.fetchFunc):this.fetch=(0,x.OB)().platform.fetch,(0,U.hu)(null!=t&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&(0,U.hu)(2===t.length,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{},this.loadOptions=e}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r=(0,B.Yd)(t,n);if(e.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData){let n=M.w.join(t.weightData);e.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}let i=await this.fetch(this.path,e);if(i.ok)return{modelArtifactsInfo:(0,B.Q)(t),responses:[i]};throw Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){let t;let e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",Error(t)}let n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();let t=await this.loadModelJSON();return(0,B.jN)(t,t=>this.loadWeights(t))}async loadStream(){let t=await this.loadModelJSON(),e=await this.getWeightUrls(t.weightsManifest),n=(0,B.hu)(t.weightsManifest);return Object.assign(Object.assign({},t),{weightSpecs:n,getWeightStream:()=>(function(t,e){var n;let r;let i=null==e.fetchFunc?(0,x.OB)().platform.fetch:e.fetchFunc,o=0;return null===(n=e.onProgress)||void 0===n||n.call(e,0),new ReadableStream({pull:async n=>{for(var a;o<t.length;){r||(r=(await i(t[o],e.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:s}=await r.read();if(u){o++,r=void 0,null===(a=e.onProgress)||void 0===a||a.call(e,o/t.length);continue}n.enqueue(s);return}n.close()}})})(e,this.loadOptions)})}async getWeightUrls(t){let[e,n]=function(t){let e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(Array.isArray(this.path)?this.path[1]:this.path),r=this.weightPathPrefix||e,i=[],o=[];for(let e of t)for(let t of e.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(t)):i.push(r+t+n);return this.weightUrlConverter&&i.push(...await Promise.all(o)),i}async loadWeights(t){let e=await this.getWeightUrls(t);return[(0,B.hu)(t),await tH(e,this.loadOptions)]}}function tY(t){return null!=t.match(tJ.URL_SCHEME_REGEX)}tJ.URL_SCHEME_REGEX=/^https?:\/\//;let tQ=(t,e)=>{if("undefined"==typeof fetch&&(null==e||null==e.fetchFunc));else if(Array.isArray(t)?t.every(t=>tY(t)):tY(t))return t0(t,e);return null};function t0(t,e){return new tJ(t,e)}function t1(t,e){return t0(t,e)}A.registerSaveRouter(tQ),A.registerLoadRouter(tQ);class t2{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class t3{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class t4{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=e=>Promise.resolve(t.save(e)))}}function t6(t,e,n,r){let i=arguments;return new t4(t5(...i))}function t5(t,e,n,r){return 1!=arguments.length?(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new t2({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r})):null!=t.modelTopology||null!=t.weightSpecs?new t2(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new t2({modelTopology:t}))}function t8(t){return new t3(t)}function t7(t){return new t3(t)}var t9=n(971),et=n(5193),ee=n(8713),en=n(2888),er=n(5250);let ei=(0,en.op)({confusionMatrix_:function(t,e,n){let r=(0,t9._1)(t,"labels","confusionMatrix"),i=(0,t9._1)(e,"predictions","confusionMatrix");U.hu(null==n||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),U.hu(1===r.rank,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),U.hu(1===i.rank,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),U.hu(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),U.hu(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let o=(0,ee.l)((0,ts.p)(r,"int32"),n),a=(0,ee.l)((0,ts.p)(i,"int32"),n),u=(0,er.p)(o),s=(0,et.O)(u,a);return(0,ts.p)(s,"int32")}});var eo=n(5221),ea=n(5047),eu=n(9922),es=n(1051);let el=!1;function ec(t,e=3){let n,r;if(e>4)throw Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw Error("pixels passed to tf.browser.fromPixels() can not be null");let i=!1,a=!1,u=!1,s=!1,l=!1,c=!1;if(t.data instanceof Uint8Array)i=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)a=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)u=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)s=!0;else if(null!=t.getContext)l=!0;else if("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)c=!0;else throw Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(null!=(0,eu.pI)(ea.eBW,w.BV.backendName))return w.BV.runKernel(ea.eBW,{pixels:t},{numChannels:e});let[h,f]=u?[t.videoWidth,t.videoHeight]:[t.width,t.height];if(l)n=t.getContext("2d").getImageData(0,0,h,f).data;else if(a||i)n=t.data;else if(s||u||c){if(null==o){if("undefined"==typeof document){if("undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof OffscreenCanvasRenderingContext2D)o=new OffscreenCanvas(1,1).getContext("2d");else throw Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.")}else o=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}o.canvas.width=h,o.canvas.height=f,o.drawImage(t,0,0,h,f),n=o.getImageData(0,0,h,f).data}if(4===e)r=new Int32Array(n);else{let t=h*f;r=new Int32Array(t*e);for(let i=0;i<t;i++)for(let t=0;t<e;++t)r[i*e+t]=n[4*i+t]}let d=[f,h,e];return(0,es.w)(r,d,"int32")}async function eh(t,e=3){var n;let r=null;if((0,x.OB)().getBool("WRAP_TO_IMAGEBITMAP")&&"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(t instanceof ImageBitmap)&&null!=(n=t)&&0!==n.width&&0!==n.height&&!(null!=t&&t.data instanceof Uint8Array)){let e;try{e=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch(t){e=null}r=null!=e&&e.width===t.width&&e.height===t.height?e:t}else r=t;return ec(r,e)}function ef(t){if(2!==t.rank&&3!==t.rank)throw Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let e=2===t.rank?1:t.shape[2];if(e>4||2===e)throw Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if("float32"!==t.dtype&&"int32"!==t.dtype)throw Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}async function ed(t,e){let n=(0,t9._1)(t,"img","toPixels");if(!(t instanceof th.es)){let t=n;n=(0,ts.p)(t,"int32"),t.dispose()}ef(n);let[r,i]=n.shape.slice(0,2),o=2===n.rank?1:n.shape[2],a=await n.data(),u="float32"===n.dtype?255:1,s=new Uint8ClampedArray(i*r*4);for(let t=0;t<r*i;++t){let e=[0,0,0,255];for(let r=0;r<o;r++){let i=a[t*o+r];if("float32"===n.dtype){if(i<0||i>1)throw Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${i}.`)}else if("int32"===n.dtype&&(i<0||i>255))throw Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${i}.`);1===o?(e[0]=i*u,e[1]=i*u,e[2]=i*u):e[r]=i*u}let r=4*t;s[r+0]=Math.round(e[0]),s[r+1]=Math.round(e[1]),s[r+2]=Math.round(e[2]),s[r+3]=Math.round(e[3])}if(null!=e){el||null==(0,eu.pI)(ea.hGc,w.BV.backendName)||(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),el=!0),e.width=i,e.height=r;let t=e.getContext("2d"),n=new ImageData(s,i,r);t.putImageData(n,0,0)}return n!==t&&n.dispose(),s}function ep(t,e,n){let r=(0,t9._1)(t,"img","draw");if(!(t instanceof th.es)){let t=r;r=(0,ts.p)(t,"int32"),t.dispose()}ef(r),function(t){let e=(null==t?void 0:t.alpha)||1;if(e>1||e<0)throw Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}(null==n?void 0:n.imageOptions);let i={image:r};w.BV.runKernel(ea.hGc,i,{canvas:e,options:n})}let eg=(0,en.op)({fromPixels_:ec});function em(t,e){let n=t.shape.length,r=e.shape.length;if(n<1)throw Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==e.dtype)throw Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(0===(0,U.NA)(t.shape))throw Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let i=e.shape,o=i[i.length-1],a=1;for(let t=0;t<i.length-1;++t)a*=i[t];let u=t.shape,s=i.slice();s.pop();let l=1;for(let t=o;t<n;++t)l*=u[t],s.push(u[t]);let c=[...(0,U.e3)(t.shape).map(t=>t/l),1].slice(0,o);return[s,a,l,c]}var ey=n(8604);function eb(t,e,n){let r=t.shape.length;U.hu(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),U.hu(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)U.hu(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function ew(t){let e=[],n=0;for(;t>0;)1&t&&e.push(n),t/=2,n++;return e}function ev(t,e,n){let r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function ek(t,e,n,r){let i=[...t];for(let t=i.length;t<r.length;t++)i.push(1);for(let t=0;t<n;t++)0===t?i[e]=1:(i.splice(e,0,1),i.pop());return i}function eE(t,e){let n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function ex(t,e,n,r,i,o,a,u,s){let l=t.length,c=Array(l),h=Array(l),f=Array(l);if(e.length&&n>0){let s=e[0],l=n+1;c=e_(a,s,l,r,t),h=eS(u,s,l,i,t),f=ek(o,s,l,t)}else for(let e=0;e<l;e++)c[e]=eA(a,r,o,t,e,s),h[e]=e$(u,i,o,t,e,s),f[e]=eB(o,e,s);return{begin:c,end:h,strides:f}}function e_(t,e,n,r,i){let o=[...i],a=eE(n,e);for(let i=0;i<o.length;i++)if(a.indexOf(i)>-1)o[i]=0;else{var u;let a=(u=i)<=e?u:u-(n-1),s=r[a];t&1<<a&&(s=0),o[i]=s}return o}function eS(t,e,n,r,i){let o=[...i],a=eE(n,e);for(let i=0;i<o.length;i++)if(a.indexOf(i)>-1)o[i]=Number.MAX_SAFE_INTEGER;else{var u;let a=(u=i)<=e?u:u-(n-1),s=r[a];t&1<<a&&(s=Number.MAX_SAFE_INTEGER),o[i]=s}for(let t=0;t<o.length;t++){let e=i[t];o[t]<0&&(o[t]+=e),o[t]=U.uZ(0,o[t],i[t])}return o}function eB(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function eA(t,e,n,r,i,o){let a=e[i],u=n[i]||1;(t&1<<i||o&1<<i||null==a)&&(a=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let s=r[i];return a<0&&(a+=s),a=U.uZ(0,a,s-1)}function e$(t,e,n,r,i,o){let a=e[i],u=n[i]||1;(t&1<<i||o&1<<i||null==a)&&(a=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let s=r[i];return a<0&&(a+=s),a=u>0?U.uZ(0,a,s):U.uZ(-1,a,s-1)}function eI(t,e,n){let r=n.length;for(let t=0;t<n.length;t++)if(n[t]>1){r=t;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function eT(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function eN(t,e,n){let r,i;let o=t.shape.length;return(r="number"==typeof e?[e,...Array(o-1).fill(0)]:e.length<o?e.concat(Array(o-e.length).fill(0)):e.slice()).forEach(t=>{U.hu(-1!==t,()=>"slice() does not support negative begin indexing.")}),i=(i=null==n?Array(o).fill(-1):"number"==typeof n?[n,...Array(o-1).fill(-1)]:n.length<o?n.concat(Array(o-n.length).fill(-1)):n).map((e,n)=>e>=0?e:(U.hu(-1===e,()=>`Negative size values should be exactly -1 but got ${e} for the slice() size at index ${n}.`),t.shape[n]-r[n])),[r,i]}function eM(t,e,n,r,i,o,a,u,s){let l;if(null==r?(l=Array(e.length)).fill(1):l=r,null!=a&&(a&a-1)!=0)throw Error("Multiple ellipses in slice is not allowed.");let c=!1,h={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:u,shrinkAxisMask:s};for(let t=0;t<h.dims;t++)c&&(1<<t&u)!=0&&h.numAddAxisAfterEllipsis++,1<<t&a&&(c=!0);!c&&(h.ellipsisMask|=1<<h.dims,h.dims++);let f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=null!=t.begin,e.endValid=null!=t.end,e.begin=Array(e.dims),e.end=Array(e.dims),e.strides=Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){let i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(-2),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);null!=t.begin&&(e.begin[n]=t.begin[r]),null!=t.end&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(-1),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}(h,f);let d=!0,p=!0,g=!0,m=[],y=[];for(let e=0;e<t.length;++e){let n;if(0===f.strides[e])throw Error(`strides[${e}] must be non-zero`);let r=!!(f.shrinkAxisMask&1<<e),i=t[e];if(-1===i){m.push(r?1:-1);continue}let o=[f.beginMask&1<<e,f.endMask&1<<e],a=[f.strides[e]>0?0:-1,f.strides[e]>0?i:i-1];if(r&&f.strides[e]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===f.strides[e];let u=!!(f.beginMask&1<<e&&f.endMask&1<<e);if(f.beginValid&&f.endValid){if(r){let t=f.begin[e]<0?i+f.begin[e]:f.begin[e];if(f.begin[e]=t,f.end[e]=f.begin[e]+1,t<0||t>=i)throw Error(`slice index ${f.begin[e]} of dimension ${e} out of bounds.`)}else f.begin[e]=eR(f.begin[e],0,f.strides[e],i,o,a),f.end[e]=eR(f.end[e],1,f.strides[e],i,o,a);let t=1===f.strides[e]&&0===f.begin[e]&&f.end[e]===i;d=d&&t,p=p&&(0===e&&1===f.strides[e]||t)}else d=d&&1===f.strides[e]&&u,p=p&&(0===e&&1===f.strides[e]||u);let s=!1;if(f.beginValid&&f.endValid?(n=f.end[e]-f.begin[e],s=!0):r?(n=1,s=!0):u&&i>=0&&(n=f.strides[e]<0?-i:i,s=!0),s){let t;t=0===n||n<0!=f.strides[e]<0?0:Math.trunc(n/f.strides[e])+(n%f.strides[e]!=0?1:0),m.push(t)}else m.push(-1)}for(let t=0;t<f.finalShapeGatherIndices.length;++t){let e=f.finalShapeGatherIndices[t];e>=0?y.push(m[e]):-2===e&&y.push(1)}return{finalShapeSparse:y.filter((t,e)=>-2!==f.finalShapeGatherIndices[e]),finalShape:y,isIdentity:d,sliceDim0:p,isSimpleSlice:g,begin:f.begin,end:f.end,strides:f.strides}}function eR(t,e,n,r,i,o){if(i[e])return n>0?o[e]:o[e+1&1];{let e=t<0?r+t:t;return e<o[0]?o[0]:e>o[1]?o[1]:e}}var eD=n(5420),eO=n(2904);let eC=.1;function eV(t,e,n){return null==n&&(n=eF()),eP(t,e,(t,e)=>ez(t,e,n))}function eF(){return 32===w.BV.backend.floatPrecision()?.001:eC}function eP(t,e,n){let r=!0;if(((0,eO.isTypedArray)(t)||(0,eO.isTypedArray)(e))&&(r=!1),(0,eO.isTypedArray)(t)&&(0,eO.isTypedArray)(e)&&(r=!0),r){let n=t.constructor.name,r=e.constructor.name;if(n!==r)throw Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(t)&&Array.isArray(e)){let n=(0,t9.C)(t),r=(0,t9.C)(e);if(!(0,U.cO)(n,r))throw Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}let i=(0,eO.isTypedArray)(t)?t:(0,eO.flatten)(t),o=(0,eO.isTypedArray)(e)?e:(0,eO.flatten)(e);if(i.length!==o.length)throw Error(`Arrays have different lengths actual: ${i.length} vs expected: ${o.length}.
Actual:   ${i}.
Expected: ${o}.`);for(let t=0;t<o.length;++t){let e=i[t],r=o[t];if(!n(e,r))throw Error(`Arrays differ: actual[${t}] = ${e}, expected[${t}] = ${r}.
Actual:   ${i}.
Expected: ${o}.`)}"undefined"!=typeof expect&&expect().nothing()}function eL(t,e){t().then(()=>e.fail(),()=>e()),"undefined"!=typeof expect&&expect().nothing()}function eU(t,e){let n="string"==typeof e||"number"==typeof e||"boolean"==typeof e?[e]:e;return(0,U.HD)(t)||(0,U.HD)(t[0])||(0,U.HD)(e)||(0,U.HD)(e[0])?eP(t,n,(t,e)=>t==e):eP(t,e,(t,e)=>ez(t,e,0))}function eG(t,e,n){if(null==n&&(n=eF()),!ez(t,e,n))throw Error(`Numbers differ: actual === ${t}, expected === ${e}`);"undefined"!=typeof expect&&expect().nothing()}function ez(t,e,n){return!(isFinite(t)||isFinite(e))||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function eW(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function eq(t,e){let n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let t=0;t<r.length;t++)if(n[t]!==r[t])throw Error(`Expected ArrayBuffer value at ${t} to be ${r[t]} but got ${n[t]} instead`)}function eK(t){let e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(t=>{e.addEventListener("loadeddata",n=>t(e)),e.load()})}async function ej(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}let eH="4.22.0";class eX{static sgd(t){return new tF(t)}static momentum(t,e,n=!1){return new tP(t,e,n)}static rmsprop(t,e=.9,n=0,r=null,i=!1){return new tL(t,e,n,r,i)}static adam(t=.001,e=.9,n=.999,r=null){return new tD(t,e,n,r)}static adadelta(t=.001,e=.95,n=null){return new tI(t,e,n)}static adamax(t=.002,e=.9,n=.999,r=null,i=0){return new tV(t,e,n,r,i)}static adagrad(t,e=.1){return new tN(t,e)}}var eZ=n(8638),eJ=n(570),eY=n(6405);let eQ=eX,e0="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:t=>t();function e1(){return new Promise(t=>e0(()=>t()))}var e2=n(7050);function e3(t,e){let n=t[0].length;t.forEach((t,e)=>{U.hu(t.length===n,()=>`Error in concat${n}D: rank of tensors[${e}] must be the same as the rank of the rest (${n})`)}),U.hu(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=t[0];t.forEach((t,i)=>{for(let o=0;o<n;o++)U.hu(o===e||t[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${t}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function e4(t,e){let n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var e6=n(9011),e5=n(1575);function e8(t,e,n){let r=[];if(null==n&&null==e)return r;if(null==e)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(null==n)return r;if(t+n.length!==r.length)throw Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){let o=n[i],a=r[r.length-n.length+i],u=r[a];if(o>=0){if(u>=0){if(u!==o)throw Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${o} but shape[${i+t}] = ${u}`)}else r[a]=o}}return r}function e7(t){let e={FIRST_DIM_SIZE:u.FIRST_DIM_SIZE,VALUE_ROWIDS:u.VALUE_ROWIDS,ROW_LENGTHS:u.ROW_LENGTHS,ROW_SPLITS:u.ROW_SPLITS,ROW_LIMITS:u.ROW_LIMITS,ROW_STARTS:u.ROW_STARTS},n=[];for(let r of t)if(r in e)n.push(e[r]);else break;return n}function e9(t){return 0===t.length?0:t[0]===u.FIRST_DIM_SIZE?t.length-1:t.length}function nt(t,e){if(null==t||null==e)return;let n=t.length,r=e.length;if(n>=r)throw Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){let n=t[i],r=e[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${n} but ragged tensor input.flatValues.shape[${i-t.length}] = ${r}`)}}(a=u||(u={}))[a.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",a[a.VALUE_ROWIDS=1]="VALUE_ROWIDS",a[a.ROW_LENGTHS=2]="ROW_LENGTHS",a[a.ROW_SPLITS=3]="ROW_SPLITS",a[a.ROW_LIMITS=4]="ROW_LIMITS",a[a.ROW_STARTS=5]="ROW_STARTS";let ne=30;function nn(t){return t<=ne?t:(0,U.jP)(t,Math.floor(Math.sqrt(t)))}function nr(t,e,n){return[n*("number"==typeof t?t:t[0]),e*("number"==typeof t?t:t[1])]}function ni(t,e,n,r=!0){let i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);let n=e.length;for(let r=0;r<n;++r)i=i.concat([t[r+1]/e[r],e[r]]);i=i.concat(t.slice(n+1))}return i}function no(t,e,n=!0){let r=[];if(n){r.push(e);for(let n=e+1;n<t;++n)n<=2*e?(r.push(n),r.push(n-(e+1))):r.push(n)}else{let n=[],i=[];for(let r=1;r<t;++r)r>=2*e+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function na(t,e,n,r=!0){let i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let n=1;n<t.length;++n)n<=e.length?r?i.push(e[n-1]*t[n]):i.push(t[n]/e[n-1]):i.push(t[n]);return i}function nu(t,e){let n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function ns(t,e,n){let r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}let nl=1.7580993408473768,nc=1.0507009873554805,nh=.3275911,nf=.254829592,nd=-.284496736,np=1.421413741,ng=-1.453152027,nm=1.061405429;var ny=n(7177);function nb(t,e){if(t.length!==e.length)throw Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);let n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function nw(t){let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function nv(t){let e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let e=0;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}}function nk(t){let e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let e=2;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}}function nE(t,e){return{real:t[2*e],imag:t[2*e+1]}}function nx(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function n_(t,e){let n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){let o=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function nS(t,e,n){let r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}let nB=/->/g;function nA(t,e){let n=((t=t.replace(/\s/g,"")).length-t.replace(nB,"").length)/2;if(n<1)throw Error("Equations without an arrow are not supported.");if(n>1)throw Error('Equation must contain exactly one arrow ("->").');let[r,i]=t.split("->");(0,U.hu)(-1===r.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');let o=r.split(","),a=o.length;if(e!==a)throw Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw Error("Support for more than 2 input tensors is not implemented yet.");let u=[];for(let t=0;t<i.length;++t){let e=i[t];if(!o.some(t=>-1!==t.indexOf(e)))throw Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===u.indexOf(e)&&u.push(e)}for(let t=0;t<r.length;++t){let e=r[t];-1===u.indexOf(e)&&","!==e&&u.push(e)}let s=Array(o.length);for(let t=0;t<a;++t){if(new Set(o[t].split("")).size!==o[t].length)throw Error(`Found duplicate axes in input component ${o[t]}. Support for duplicate axes in input is not implemented yet.`);s[t]=[];for(let e=0;e<o[t].length;++e)s[t].push(u.indexOf(o[t][e]))}let l=u.length,c=i.length,h=[];for(let t=c;t<l;++t)h.push(t);return{allDims:u,summedDims:h,idDims:s}}function n$(t,e){let n=Array(t);n.fill(-1);for(let t=0;t<e.length;++t)n[e[t]]=t;let r=[];for(let e=0;e<t;++e)-1===n[e]&&r.push(e);return{permutationIndices:n=n.filter(t=>-1!==t),expandDims:r}}function nI(t,e,n){let r=Array(t);for(let t=0;t<n.length;++t){let i=n[t].shape;for(let n=0;n<e[t].length;++n)void 0===r[e[t][n]]?r[e[t][n]]=i[n]:(0,U.hu)(r[e[t][n]]===i[n],()=>`Expected dimension ${r[e[t][n]]} at axis ${n} of input shaped ${JSON.stringify(i)}, but got dimension ${i[n]}`)}}function nT(t,e){let n=[],r=0;0===t.length&&t.push(-1),r=t.length+1;for(let t=0;t<r;++t)n.push([]);let i=[];for(let r=0;r<t.length;++r)for(let o of function(t,e){let n=[];for(let r=0;r<t.length;++r)(0===t[r].length||-1!==t[r].indexOf(e)||-1===e)&&n.push(r);return n}(e,t[r]))-1===i.indexOf(o)&&(n[r].push(o),i.push(o));return{path:t,steps:n}}function nN(t){return t.every((t,e)=>t===e)}function nM(t,e,n=0){let r=[];if("number"==typeof e)(0,U.hu)(t.shape[n]%e==0,()=>"Number of splits must evenly divide the axis."),r=Array(e).fill(t.shape[n]/e);else{let i=e.reduce((t,e)=>(-1===e&&(t+=1),t),0);(0,U.hu)(i<=1,()=>"There should be only one negative value in split array.");let o=e.indexOf(-1);if(-1!==o){let r=e.reduce((t,e)=>e>0?t+e:t);e[o]=t.shape[n]-r}(0,U.hu)(t.shape[n]===e.reduce((t,e)=>t+e),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}function nR(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function nD(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function nO(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}function nC(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function nV(t,e){return`size ${t} must be non-negative, not ${e}`}function nF(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function nP(t,e){let n=(0,U.NA)(t),r=(0,U.NA)(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function nL(t,e){let n=(0,U.NA)(t),r=(0,U.NA)(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}function nU(){return"segment ids must be >= 0"}function nG(){return"segment ids are not increasing"}function nz(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function nW(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}function nq(t,e){let n,r=!1;for(t<=ne?(n=t,r=!0):n=(0,U.jP)(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=(0,U.jP)(t,n+1);return n}function nK(t,e,n){let r=[],i=t.length;for(let o=0;o<i;o++)o!==e?r.push(t[o]):r.push(n);return r}function nj(t,e,n,r){let i=e.shape.length,o=t.shape.length;if(0!==r&&(r<-i||r>i))throw Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>o)throw Error(`batchDims (${r}) must be less than rank(x) (
    ${o}).`);if(n<r)throw Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(t.shape[n]!==e.shape[n])throw Error(`x.shape[${n}]: ${t.shape[n]} should be equal to indices.shape[${n}]: ${e.shape[n]}.`);let a=t.shape[n],u=[],s=1,l=1,c=1;for(let e=0;e<r;++e)u.push(t.shape[e]),s*=t.shape[e];for(let e=r;e<n;e++)u.push(t.shape[e]),l*=t.shape[e];for(let t=r;t<i;t++)u.push(e.shape[t]);for(let e=n+1;e<o;e++)u.push(t.shape[e]),c*=t.shape[e];return{batchSize:s,sliceSize:c,outerSize:l,dimSize:a,outputShape:u}}function nH(t){try{return t.map(t=>(0,eO.decodeString)(t))}catch(t){throw Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function nX(t){return t.map(t=>(0,eO.encodeString)(t))}var nZ=n(3021),nJ=n(9846),nY=n(2975);!function(){for(let t of tU)tB(t)}()},807:function(t,e,n){"use strict";n.d(e,{w:function(){return i}});var r=n(2904);class i{static join(t){return new i(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,null==t||(t instanceof Array||(t=[t]),0===(t=t.map(t=>r.isTypedArray(t)?t.buffer:t)).length))return;this.bufferUniformSize=t[0].byteLength;let e=0;for(let n=0;n<t.length;n++){let r=t[n];n!==t.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=e+r.byteLength;this.shards.push({buffer:r,start:e,end:i}),e=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,e=this.byteLength){if(0===this.shards.length||(t=isNaN(Number(t))?0:t,e=isNaN(Number(e))?0:e,t=Math.max(0,t),(e=Math.min(this.byteLength,e))<=t))return new ArrayBuffer(0);let n=this.findShardForByte(t);if(-1===n)throw Error(`Could not find start shard for byte ${t}`);let r=new ArrayBuffer(e-t),i=new Uint8Array(r),o=0;for(let r=n;r<this.shards.length;r++){let n=this.shards[r],a=t+o-n.start,u=o,s=Math.min(e,n.end)-n.start,l=new Uint8Array(n.buffer,a,s-a);if(i.set(l,u),o+=l.length,e<n.end)break}return r}findShardForByte(t){if(0===this.shards.length||t<0||t>=this.byteLength)return -1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function e(e){return t<e.start?-1:t>=e.end?1:0}if(0===e(this.shards[this.previousShardIndex]))return this.previousShardIndex;let n=function(t,e){let n=0,r=t.length;for(;n<=r;){let i=Math.floor((r-n)/2)+n,o=e(t[i]);if(0===o)return i;o<0?r=i:n=i+1}return -1}(this.shards,e);return -1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}},3850:function(t,e,n){"use strict";n.d(e,{EZ:function(){return E},JY:function(){return k},Q:function(){return B},Yd:function(){return x},_n:function(){return w},dI:function(){return f},hu:function(){return A},jN:function(){return S},ji:function(){return _},n7:function(){return v},r:function(){return m},yz:function(){return h}});var r=n(7977),i=n(1802),o=n(2771),a=n(8123),u=n(807),s=n(5823),l=n(6472),c=n(6434).Buffer;async function h(t,e){let n=[],r=[],i=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);for(let o=0;o<i.length;++o){let a=i[o],u=Array.isArray(t)?t[o].tensor:t[a];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype&&"complex64"!==u.dtype)throw Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);let s={name:a,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){let t=new Promise(async t=>{let e=await u.bytes(),n=new Uint8Array(e.reduce((t,e)=>t+e.length,0)+4*e.length),r=0;for(let t=0;t<e.length;t++){let i=e[t],o=new Uint8Array(new Uint32Array([i.length]).buffer);n.set(o,r),r+=4,n.set(i,r),r+=i.length}t(n)});r.push(t)}else r.push(u.data());null!=e&&(s.group=e),n.push(s)}return{data:function(t){if(null===t)throw Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0,n=[];t.forEach(t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw Error(`Unsupported TypedArray subtype: ${t.constructor.name}`)});let r=new Uint8Array(e),i=0;return n.forEach(t=>{r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}(await Promise.all(r)),specs:n}}function f(t,e){let n=new u.w(t),r={},i=0;for(let t of e){let e=function(t,e){let n;let r=(0,o.NA)(t.shape);if("quantization"in t){let e=t.quantization;n=a.J[e.dtype]}else if("string"===t.dtype){let t=0;for(let n=0;n<r;n++)t+=4+new Uint32Array(e(t,t+4))[0];return t}else n=a.J[t.dtype];return r*n}(t,(t,e)=>n.slice(i+t,i+e));r[t.name]=p(t,n.slice(i,i+e)),i+=e}return r}async function d(t,e){let n;let r=(0,o.NA)(t.shape);if("quantization"in t){let e=t.quantization;n=a.J[e.dtype]}else if("string"===t.dtype){let t=0;for(let n=0;n<r;n++)t+=4+new Uint32Array(await e(t,t+4))[0];return t}else n=a.J[t.dtype];return r*n}function p(t,e){let n;let u=t.name,s=t.dtype,l=t.shape,c=(0,o.NA)(l),h=0;if("quantization"in t){let r=t.quantization;if("uint8"===r.dtype||"uint16"===r.dtype){if(!("min"in r&&"scale"in r))throw Error(`Weight ${t.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else if("float16"===r.dtype){if("float32"!==s)throw Error(`Weight ${t.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${s}.`)}else throw Error(`Weight ${t.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let i=a.J[r.dtype],o="uint8"===r.dtype?new Uint8Array(e):new Uint16Array(e);if("float32"===s){if("uint8"===r.dtype||"uint16"===r.dtype){n=new Float32Array(o.length);for(let t=0;t<o.length;t++){let e=o[t];n[t]=e*r.scale+r.min}}else if("float16"===r.dtype)n=(function(){let t=function(){let t=t=>{let e=t<<13,n=0;for(;(8388608&e)==0;)n-=8388608,e<<=1;return(e&=-8388609)|(n+=947912704)},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}(),e=function(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),n=function(){let t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return r=>{let i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let i=0;i<r.length;i++){let a=r[i],u=t[n[a>>10]+(1023&a)]+e[a>>10];o[i]=u}return new Float32Array(i)}})()(o);else throw Error(`Unsupported quantization type ${r.dtype} for weight type float32.`)}else if("int32"===s){if("uint8"!==r.dtype&&"uint16"!==r.dtype)throw Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);n=new Int32Array(o.length);for(let t=0;t<o.length;t++){let e=o[t];n[t]=Math.round(e*r.scale+r.min)}}else throw Error(`Unsupported dtype in weight '${u}': ${s}`);h+=c*i}else if("string"===s){let r=(0,o.NA)(t.shape);n=[];for(let t=0;t<r;t++){let t=new Uint32Array(e.slice(h,h+4))[0];h+=4;let r=new Uint8Array(e.slice(h,h+t));n.push(r),h+=t}}else{let t=a.J[s];if("float32"===s)n=new Float32Array(e);else if("int32"===s)n=new Int32Array(e);else if("bool"===s)n=new Uint8Array(e);else if("complex64"===s){n=new Float32Array(e);let t=new Float32Array(n.length/2),o=new Float32Array(n.length/2);for(let e=0;e<t.length;e++)t[e]=n[2*e],o[e]=n[2*e+1];let a=(0,i.X)(t,l,"float32"),u=(0,i.X)(o,l,"float32"),s=(0,r.P)(a,u);return a.dispose(),u.dispose(),s}else throw Error(`Unsupported dtype in weight '${u}': ${s}`);h+=c*t}return(0,i.X)(n,l,s)}async function g(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){let{done:e,value:i}=await t.read();if(e&&null==i){let t=n-r.byteLength;throw Error(`Reader is done but ${t} bytes are still expected`)}let o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function m(t,e){let n={},r=t.getReader(),i=new ArrayBuffer(0);for(let t of e){let e=await d(t,async(t,e)=>(i=await g(r,i,e)).slice(t,e)),a=(i=await g(r,i,e)).slice(0,e);i=i.slice(e);let u=p(t,a);if(n[t.name]=u,"webgpu"===(0,s.N_)()){let t=(0,s.y3)();"uploadToGPU"in t&&(0,o.NA)(u.shape)>=(0,l.OB)().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&t.uploadToGPU(u.dataId)}}return n}let y=void 0!==c&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function b(t){return y?c.byteLength(t,"utf8"):new Blob([t]).size}function w(t){if(y)return c.from(t).toString("base64");let e=new Uint8Array(t),n="";for(let t=0,r=e.length;t<r;t++)n+=String.fromCharCode(e[t]);return btoa(n)}function v(t){if(y){let e=c.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}let e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n.set([e.charCodeAt(t)],t);return n.buffer}function k(t){return u.w.join(t)}function E(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);let e=t.split("/");return e[e.length-1]}function x(t,e){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(n.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(n.trainingConfig=t.trainingConfig),n}function _(t,e,n){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null!=t.weightsManifest){if(!e)throw Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(r.initializerSignature=t.initializerSignature),r}async function S(t,e){let n,r;return null!=t.weightsManifest&&([n,r]=await e(t.weightsManifest)),_(t,n,r)}function B(t){if(t.modelTopology instanceof ArrayBuffer)throw Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:b(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:b(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:new u.w(t.weightData).byteLength}}function A(t){let e=[];for(let n of t)e.push(...n.weights);return e}},8123:function(t,e,n){"use strict";n.d(e,{J:function(){return r}});let r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},5047:function(t,e,n){"use strict";n.d(e,{$HU:function(){return es},$g6:function(){return te},$w:function(){return X},Acj:function(){return tb},BMI:function(){return tU},BiW:function(){return eo},Byc:function(){return U},CAk:function(){return tA},CQl:function(){return ei},D2d:function(){return eP},DlI:function(){return en},Eh3:function(){return M},FKq:function(){return eT},G3Y:function(){return eQ},GBy:function(){return eN},Gcp:function(){return eD},HEU:function(){return tr},HZH:function(){return ec},Hhh:function(){return tF},Hmb:function(){return ef},IKK:function(){return l},IMb:function(){return v},J$2:function(){return tS},J7O:function(){return tP},J_u:function(){return tk},JhU:function(){return y},Kgp:function(){return t9},L8s:function(){return eR},Ly9:function(){return S},M2y:function(){return f},MIZ:function(){return eX},MRv:function(){return eI},MZg:function(){return tR},NEP:function(){return ta},NZg:function(){return tY},O3z:function(){return eO},OAf:function(){return tW},OR:function(){return tf},OU7:function(){return tq},OV7:function(){return tz},Omj:function(){return ti},Oyi:function(){return g},PYm:function(){return tN},PhF:function(){return eE},QCc:function(){return m},QRR:function(){return W},Qg5:function(){return tv},QiL:function(){return t8},Qvg:function(){return e2},RFZ:function(){return A},ROF:function(){return b},RQH:function(){return eS},RuY:function(){return e4},SIB:function(){return ev},SX0:function(){return tn},SYM:function(){return r},SbG:function(){return eg},SpW:function(){return o},T0n:function(){return q},TQc:function(){return eM},TR1:function(){return L},ToN:function(){return e1},Tr8:function(){return ej},Uyb:function(){return th},VGw:function(){return i},Vbg:function(){return tJ},VcC:function(){return z},VfG:function(){return tM},Vn9:function(){return Y},W0H:function(){return t4},XDQ:function(){return e3},XLW:function(){return k},XkS:function(){return eK},Xze:function(){return u},Y0y:function(){return ts},YFo:function(){return tu},YoZ:function(){return tL},ZbH:function(){return tI},ZjV:function(){return eF},Zz9:function(){return T},_JP:function(){return eW},_V0:function(){return e9},_Yw:function(){return ed},_k9:function(){return w},_tC:function(){return eL},a5O:function(){return e$},aJk:function(){return h},avt:function(){return tE},b9H:function(){return e8},bK0:function(){return eU},bV0:function(){return eb},c17:function(){return tH},cWu:function(){return eJ},cie:function(){return K},cye:function(){return t3},dDz:function(){return er},deh:function(){return tc},dpD:function(){return eh},e07:function(){return ey},e0R:function(){return eG},e6w:function(){return ea},e7N:function(){return t$},eBW:function(){return e5},eEB:function(){return B},eZ0:function(){return tV},ekb:function(){return J},gJX:function(){return $},h8e:function(){return e6},hCO:function(){return _},hGc:function(){return Q},hdR:function(){return to},i5y:function(){return eA},iHb:function(){return G},iJz:function(){return tw},iWB:function(){return tx},iZT:function(){return ty},ik2:function(){return F},jMg:function(){return p},jQk:function(){return ez},jQs:function(){return tZ},jeX:function(){return td},kU:function(){return tT},kpP:function(){return e0},kuV:function(){return t0},luS:function(){return nt},lyA:function(){return t7},mKl:function(){return em},mTV:function(){return tG},mc4:function(){return P},mhS:function(){return R},mm_:function(){return a},n9L:function(){return eZ},nhH:function(){return eC},nr8:function(){return ek},o0g:function(){return ee},o2y:function(){return V},oFR:function(){return ex},oHH:function(){return tt},oT6:function(){return s},p2w:function(){return e_},p4S:function(){return Z},pe_:function(){return et},q1x:function(){return tm},q2K:function(){return tj},q8u:function(){return tX},qCd:function(){return tO},qIC:function(){return tC},qWM:function(){return t6},qi_:function(){return tg},qkr:function(){return el},qw7:function(){return d},r7n:function(){return t_},s1s:function(){return eq},sEM:function(){return eH},sHE:function(){return tp},sJF:function(){return c},sL$:function(){return j},usg:function(){return e7},uv1:function(){return t2},vFR:function(){return tK},vtC:function(){return tB},vwp:function(){return tl},w3H:function(){return eV},w6g:function(){return tD},wUP:function(){return D},wYB:function(){return eB},wYn:function(){return tQ},we_:function(){return t5},wm:function(){return O},wx7:function(){return eY},x12:function(){return C},xJR:function(){return eu},xQA:function(){return ew},xnO:function(){return I},y7R:function(){return H},yQU:function(){return t1},yj2:function(){return N},zbQ:function(){return ep},zvY:function(){return x},zws:function(){return E}});let r="Abs",i="Acos",o="Acosh",a="Add",u="AddN",s="All",l="Any",c="ArgMax",h="ArgMin",f="Asin",d="Asinh",p="Atan",g="Atanh",m="Atan2",y="AvgPool",b="AvgPoolGrad",w="AvgPool3D",v="AvgPool3DGrad",k="BatchMatMul",E="BatchToSpaceND",x="Bincount",_="BitwiseAnd",S="BroadcastTo",B="BroadcastArgs",A="Cast",$="Ceil",I="ClipByValue",T="Complex",N="ComplexAbs",M="Concat",R="Conv2D",D="Conv2DBackpropFilter",O="Conv2DBackpropInput",C="Conv3D",V="Conv3DBackpropFilterV2",F="Conv3DBackpropInputV2",P="Cos",L="Cosh",U="Cumprod",G="Cumsum",z="CropAndResize",W="DenseBincount",q="DepthToSpace",K="DepthwiseConv2dNative",j="DepthwiseConv2dNativeBackpropFilter",H="DepthwiseConv2dNativeBackpropInput",X="Diag",Z="Dilation2D",J="Dilation2DBackpropInput",Y="Dilation2DBackpropFilter",Q="Draw",tt="RealDiv",te="Einsum",tn="Elu",tr="EluGrad",ti="Erf",to="Equal",ta="Exp",tu="ExpandDims",ts="Expm1",tl="FFT",tc="Fill",th="FlipLeftRight",tf="Floor",td="FloorDiv",tp="FusedBatchNorm",tg="GatherV2",tm="GatherNd",ty="Greater",tb="GreaterEqual",tw="Identity",tv="IFFT",tk="Imag",tE="IsFinite",tx="IsInf",t_="IsNan",tS="LeakyRelu",tB="Less",tA="LessEqual",t$="LinSpace",tI="Log",tT="Log1p",tN="LogicalAnd",tM="LogicalNot",tR="LogicalOr",tD="LogicalXor",tO="LogSoftmax",tC="LowerBound",tV="LRN",tF="LRNGrad",tP="MatrixBandPart",tL="Max",tU="Maximum",tG="MaxPool",tz="MaxPoolGrad",tW="MaxPool3D",tq="MaxPool3DGrad",tK="MaxPoolWithArgmax",tj="Mean",tH="Min",tX="Minimum",tZ="MirrorPad",tJ="Mod",tY="Multinomial",tQ="Multiply",t0="Neg",t1="NotEqual",t2="NonMaxSuppressionV3",t3="NonMaxSuppressionV4",t4="NonMaxSuppressionV5",t6="OnesLike",t5="OneHot",t8="Pack",t7="PadV2",t9="Pool",et="Pow",ee="Prelu",en="Prod",er="RaggedGather",ei="RaggedRange",eo="RaggedTensorToTensor",ea="Range",eu="Real",es="Reciprocal",el="Relu",ec="Reshape",eh="ResizeNearestNeighbor",ef="ResizeNearestNeighborGrad",ed="ResizeBilinear",ep="ResizeBilinearGrad",eg="Relu6",em="Reverse",ey="Round",eb="Rsqrt",ew="ScatterNd",ev="TensorScatterUpdate",ek="SearchSorted",eE="Select",ex="Selu",e_="Slice",eS="Sin",eB="Sinh",eA="Sign",e$="Sigmoid",eI="Softplus",eT="Sqrt",eN="Sum",eM="SpaceToBatchND",eR="SplitV",eD="Softmax",eO="SparseFillEmptyRows",eC="SparseReshape",eV="SparseSegmentMean",eF="SparseSegmentSum",eP="SparseToDense",eL="SquaredDifference",eU="Square",eG="StaticRegexReplace",ez="StridedSlice",eW="StringNGrams",eq="StringSplit",eK="StringToHashBucketFast",ej="Sub",eH="Tan",eX="Tanh",eZ="Tile",eJ="TopK",eY="Transform",eQ="Transpose",e0="Unique",e1="Unpack",e2="UnsortedSegmentSum",e3="UpperBound",e4="ZerosLike",e6="Step",e5="FromPixels",e8="RotateWithOffset",e7="_FusedMatMul",e9="FusedConv2D",nt="FusedDepthwiseConv2D"},9922:function(t,e,n){"use strict";n.d(e,{Li:function(){return f},T3:function(){return g},bt:function(){return p},nE:function(){return d},pI:function(){return s},tr:function(){return c},uk:function(){return l},wC:function(){return h}});var r=n(6472),i=n(5490),o=n(7177);let a=(0,i.R)("kernelRegistry",()=>new Map),u=(0,i.R)("gradRegistry",()=>new Map);function s(t,e){let n=m(t,e);return a.get(n)}function l(t){return u.get(t)}function c(t){let e=a.entries(),n=[];for(;;){let{done:r,value:i}=e.next();if(r)break;let[o,a]=i,[u]=o.split("_");u===t&&n.push(a)}return n}function h(t){let{kernelName:e,backendName:n}=t,r=m(e,n);a.has(r)&&o.Z(`The kernel '${e}' for backend '${n}' is already registered`),a.set(r,t)}function f(t){let{kernelName:e}=t;u.has(e)&&(0,r.OB)().getBool("DEBUG")&&o.Z(`Overriding the gradient for '${e}'`),u.set(e,t)}function d(t,e){let n=m(t,e);if(!a.has(n))throw Error(`The kernel '${t}' for backend '${e}' is not registered`);a.delete(n)}function p(t){if(!u.has(t))throw Error(`The gradient '${t}' for backend is not registered`);u.delete(t)}function g(t,e){c(t).forEach(t=>{h(Object.assign({},t,{backendName:e}))})}function m(t,e){return`${e}_${t}`}},7177:function(t,e,n){"use strict";n.d(e,{Z:function(){return i},c:function(){return o}});var r=n(6472);function i(...t){(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||console.warn(...t)}function o(...t){(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||console.log(...t)}},9044:function(t,e,n){"use strict";n.d(e,{W:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({abs_:function(t){let e=(0,o._1)(t,"x","abs");return"complex64"===e.dtype?r.BV.runKernel(i.yj2,{x:e}):r.BV.runKernel(i.SYM,{x:e})}})},3266:function(t,e,n){"use strict";n.d(e,{I:function(){return u}});var r=n(9681),i=n(5047),o=n(5420),a=n(971);let u=(0,n(2888).op)({add_:function(t,e){let n=(0,a._1)(t,"a","add"),u=(0,a._1)(e,"b","add");[n,u]=(0,o.makeTypesMatch)(n,u);let s={a:n,b:u};return r.BV.runKernel(i.mm_,s)}})},7050:function(t,e,n){"use strict";n.d(e,{LJ:function(){return c},Q3:function(){return l},Vh:function(){return o},YB:function(){return i},kz:function(){return a},lB:function(){return s},rv:function(){return u},sY:function(){return h}});var r=n(2771);function i(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function o(t,e,n){let r=t.length+e.length,i=[],o=0,a=0;for(let u=0;u<r;u++)-1===n.indexOf(u)?i.push(t[o++]):i.push(e[a++]);return i}function a(t,e){let n=[],r=t.length;for(let i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map(e=>t[e])]}function u(t,e){return o(t,e.map(t=>1),e)}function s(t,e,n){r.hu(i(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function l(t,e){if(i(t,e))return null;let n=[];for(let r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(t=>n.push(t)),n}function c(t){return t.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function h(t,e){let n=[];for(let r=e-t;r<e;++r)n.push(r);return n}},5221:function(t,e,n){"use strict";function r(t,e){let n=t.length,r=[];for(let i=0;i<n;i++){let o=n-1-i,a=t[o]||1;(e[e.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function i(t,e){let n=[];for(let r=0;r<e.length;r++){let i=t[t.length-r-1],o=e.length-r-1,a=e[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function o(t,e){let n=Math.max(t.length,e.length),r=Array(n);for(let i=0;i<n;i++){let o=t[t.length-i-1];null==o&&(o=1);let a=e[e.length-i-1];if(null==a&&(a=1),1===o)r[n-i-1]=a;else if(1===a)r[n-i-1]=o;else if(o!==a)throw Error(`Operands could not be broadcast together with shapes ${t} and ${e}.`);else r[n-i-1]=o}return r}n.r(e),n.d(e,{assertAndGetBroadcastShape:function(){return o},getBroadcastDims:function(){return r},getReductionAxes:function(){return i}})},5515:function(t,e,n){"use strict";n.d(e,{f:function(){return o}});var r=n(6150),i=n(2771);function o(t,e="float32",n){return e=e||"float32",i.Mu(t),new r.YD(t,e,n)}},8893:function(t,e,n){"use strict";n.d(e,{p:function(){return u}});var r=n(9681),i=n(5047),o=n(971),a=n(2771);let u=(0,n(2888).op)({cast_:function(t,e){let n=(0,o._1)(t,"x","cast");if(!a.LP(e))throw Error(`Failed to cast to unknown dtype ${e}`);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw Error("Only strings can be casted to strings");return r.BV.runKernel(i.RFZ,{x:n},{dtype:e})}})},699:function(t,e,n){"use strict";n.d(e,{d:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({clone_:function(t){let e=(0,o._1)(t,"x","clone","string_or_numeric");return r.BV.runKernel(i.iJz,{x:e})}})},7977:function(t,e,n){"use strict";n.d(e,{P:function(){return u}});var r=n(9681),i=n(5047),o=n(971),a=n(2771);let u=(0,n(2888).op)({complex_:function(t,e){let n=(0,o._1)(t,"real","complex"),u=(0,o._1)(e,"imag","complex");return a.k5(n.shape,u.shape,`real and imag shapes, ${n.shape} and ${u.shape}, must match in call to tf.complex().`),r.BV.runKernel(i.Zz9,{real:n,imag:u})}})},9011:function(t,e,n){"use strict";n.d(e,{I0:function(){return p},Ix:function(){return u},Rf:function(){return i},U3:function(){return m},Xw:function(){return o},aO:function(){return l},jT:function(){return g},jw:function(){return s},m:function(){return b},pl:function(){return a},sl:function(){return y}});var r=n(2771);function i(t,e,n,r,i="NHWC",o){let a=[...e,t[3]];return u(t,a,n,o,r,null,null,y(i))}function o(t,e,n,r,i,o,a="channelsLast"){let s;let[l,h]=c(e);if("channelsLast"===a)s=[l,h,t[3],t[3]];else if("channelsFirst"===a)s=[l,h,t[1],t[1]];else throw Error(`Unknown dataFormat ${a}`);return u(t,s,n,r,i,o,!1,a)}function a(t,e,n,r,i,o,a="NDHWC"){let u,l;let[c,f,d]=h(e);if("NDHWC"===a)l="channelsLast",u=[c,f,d,t[4],t[4]];else if("NCDHW"===a)l="channelsFirst",u=[c,f,d,t[1],t[1]];else throw Error(`Unknown dataFormat ${a}`);return s(t,u,n,r,i,!1,l,o)}function u(t,e,n,r,i,o,a=!1,u="channelsLast"){let s,[h,p,g,m]=[-1,-1,-1,-1];if("channelsLast"===u)[h,p,g,m]=t;else if("channelsFirst"===u)[h,m,p,g]=t;else throw Error(`Unknown dataFormat ${u}`);let[y,b,,w]=e,[v,k]=c(n),[E,x]=c(r),_=f(y,E),S=f(b,x),{padInfo:B,outHeight:A,outWidth:$}=function(t,e,n,r,i,o,a,u,s){let c,h,f;if("number"==typeof t){let i=0===t?"VALID":"NUMBER";c={top:t,bottom:t,left:t,right:t,type:i};let a=function(t,e,n,r,i){null==r&&(r=l(t,e,n));let o=t[0],a=t[1];return[d((o-e+2*r)/n+1,i),d((a-e+2*r)/n+1,i)]}([e,n],o,r,t,u);h=a[0],f=a[1]}else if("same"===t){let t=Math.max(0,((h=Math.ceil(e/r))-1)*r+o-e),u=Math.max(0,((f=Math.ceil(n/i))-1)*i+a-n),s=Math.floor(t/2),l=Math.floor(u/2);c={top:s,bottom:t-s,left:l,right:u-l,type:"SAME"}}else if("valid"===t)c={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((e-o+1)/r),f=Math.ceil((n-a+1)/i);else if("object"==typeof t){let l="channelsLast"===s?t[1][0]:t[2][0],p="channelsLast"===s?t[1][1]:t[2][1],g="channelsLast"===s?t[2][0]:t[3][0],m="channelsLast"===s?t[2][1]:t[3][1];c={top:l,bottom:p,left:g,right:m,type:0===l&&0===p&&0===g&&0===m?"VALID":"EXPLICIT"},h=d((e-o+l+p)/r+1,u),f=d((n-a+g+m)/i+1,u)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:h,outWidth:f}}(i,p,g,v,k,_,S,o,u),I=a?w*m:w;return"channelsFirst"===u?s=[h,I,A,$]:"channelsLast"===u&&(s=[h,A,$,I]),{batchSize:h,dataFormat:u,inHeight:p,inWidth:g,inChannels:m,outHeight:A,outWidth:$,outChannels:I,padInfo:B,strideHeight:v,strideWidth:k,filterHeight:y,filterWidth:b,effectiveFilterHeight:_,effectiveFilterWidth:S,dilationHeight:E,dilationWidth:x,inShape:t,outShape:s,filterShape:e}}function s(t,e,n,r,i,o=!1,a="channelsLast",u){let s,[c,p,g,m,y]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[c,p,g,m,y]=t;else if("channelsFirst"===a)[c,y,p,g,m]=t;else throw Error(`Unknown dataFormat ${a}`);let[b,w,v,,k]=e,[E,x,_]=h(n),[S,B,A]=h(r),$=f(b,S),I=f(w,B),T=f(v,A),{padInfo:N,outDepth:M,outHeight:R,outWidth:D}=function(t,e,n,r,i,o,a,u,s,c,h){let f,p,g,m;if("valid"===t&&(t=0),"number"==typeof t){let y=0===t?"VALID":"NUMBER";f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:y};let b=function(t,e,n,r,i,o){null==i&&(i=l(t,e[0],r[0]));let a=[0,0,0,1];for(let n=0;n<3;n++)t[n]+2*i>=e[n]&&(a[n]=d((t[n]-e[n]+2*i)/r[n]+1,o));return a}([e,n,r,1],[u,s,c],0,[i,o,a],t,h);p=b[0],g=b[1],m=b[2]}else if("same"===t){let t=((p=Math.ceil(e/i))-1)*i+u-e,l=((g=Math.ceil(n/o))-1)*o+s-n,h=((m=Math.ceil(r/a))-1)*a+c-r,d=Math.floor(t/2),y=Math.floor(l/2),b=Math.floor(h/2);f={top:y,bottom:l-y,left:b,right:h-b,front:d,back:t-d,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:p,outHeight:g,outWidth:m}}(i,p,g,m,E,x,_,$,I,T,u),O=o?k*y:k;return"channelsFirst"===a?s=[c,O,M,R,D]:"channelsLast"===a&&(s=[c,M,R,D,O]),{batchSize:c,dataFormat:a,inDepth:p,inHeight:g,inWidth:m,inChannels:y,outDepth:M,outHeight:R,outWidth:D,outChannels:O,padInfo:N,strideDepth:E,strideHeight:x,strideWidth:_,filterDepth:b,filterHeight:w,filterWidth:v,effectiveFilterDepth:$,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:S,dilationHeight:B,dilationWidth:A,inShape:t,outShape:s,filterShape:e}}function l(t,e,n,r=1){let i=f(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function c(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function h(t){return"number"==typeof t?[t,t,t]:t}function f(t,e){return e<=1?t:t+(t-1)*(e-1)}function d(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw Error(`Unknown roundingMode ${e}`)}}function p(t){let[e,n,r]=c(t);return 1===e&&1===n&&1===r}function g(t,e){return p(t)||p(e)}function m(t){return c(t).every(t=>t>0)}function y(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw Error(`Unknown dataFormat ${t}`)}function b(t,e,n){if(null!=n){if("string"==typeof e)throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if("number"==typeof e)r.hu(r.GN(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if("object"==typeof e)e.forEach(e=>{e.forEach(e=>{r.hu(r.GN(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}},3511:function(t,e,n){"use strict";n.d(e,{h:function(){return s}});var r=n(9681),i=n(5047),o=n(5420),a=n(971),u=n(7576);let s=(0,n(2888).op)({div_:function(t,e){let n=(0,a._1)(t,"a","div"),s=(0,a._1)(e,"b","div");if([n,s]=(0,o.makeTypesMatch)(n,s),"int32"===n.dtype&&"int32"===s.dtype)return(0,u.q)(n,s);let l={a:n,b:s};return r.BV.runKernel(i.oHH,l,{})}})},4077:function(t,e,n){"use strict";n.d(e,{p:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({elu_:function(t){let e=(0,o._1)(t,"x","elu","float32");return r.BV.runKernel(i.SX0,{x:e})}})},180:function(t,e,n){"use strict";n.d(e,{h:function(){return a}});var r=n(9681),i=n(5047),o=n(2771);function a(t,e,n){(0,o.Mu)(t),n=n||(0,o.D2)(e);let a={shape:t,value:e,dtype:n};return r.BV.runKernel(i.deh,{},a)}},7576:function(t,e,n){"use strict";n.d(e,{q:function(){return u}});var r=n(9681),i=n(5047),o=n(5420),a=n(971);let u=(0,n(2888).op)({floorDiv_:function(t,e){let n=(0,a._1)(t,"a","floorDiv"),u=(0,a._1)(e,"b","floorDiv");[n,u]=(0,o.makeTypesMatch)(n,u);let s={a:n,b:u};return r.BV.runKernel(i.jeX,s)}})},1575:function(t,e,n){"use strict";n.d(e,{Fr:function(){return p},QH:function(){return m},pf:function(){return g},uy:function(){return y}});var r=n(5221),i=n(4077),o=n(6437),a=n(5314),u=n(9427),s=n(114),l=n(6762),c=n(6439),h=n(5986),f=n(9794),d=n(1101);function p(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return(0,a.d)(t,(0,f.N)(e));throw Error(`Cannot compute gradient for fused activation ${n}.`)}function g(t,e){let n=e,i=r.getReductionAxes(t.shape,e.shape);return i.length>0&&(n=(0,d.S)(n,i)),(0,c.X)(n,t.shape)}function m(t,e,n,r){if("linear"===e)return t;if("relu"===e)return(0,s.U)(t);if("elu"===e)return(0,i.p)(t);if("relu6"===e)return(0,l.b)(t);if("prelu"===e)return(0,u.A)(t,n);if("leakyrelu"===e)return(0,o.h)(t,r);if("sigmoid"===e)return(0,h.X)(t);throw Error(`Unknown fused activation ${e}.`)}let y=(t,e)=>!(t>0)||"linear"===e},8587:function(t,e,n){"use strict";n.d(e,{a:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({imag_:function(t){let e=(0,o._1)(t,"input","imag");return r.BV.runKernel(i.J_u,{input:e})}})},6437:function(t,e,n){"use strict";n.d(e,{h:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({leakyRelu_:function(t,e=.2){let n=(0,o._1)(t,"x","leakyRelu");return r.BV.runKernel(i.J$2,{x:n},{alpha:e})}})},6405:function(t,e,n){"use strict";var r,i;n.d(e,{I:function(){return r}}),(i=r||(r={}))[i.NONE=0]="NONE",i[i.MEAN=1]="MEAN",i[i.SUM=2]="SUM",i[i.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"},5193:function(t,e,n){"use strict";n.d(e,{O:function(){return u}});var r=n(9681),i=n(5047),o=n(5420),a=n(971);let u=(0,n(2888).op)({matMul_:function(t,e,n=!1,u=!1){let s=(0,a._1)(t,"a","matMul"),l=(0,a._1)(e,"b","matMul");[s,l]=(0,o.makeTypesMatch)(s,l);let c={a:s,b:l};return r.BV.runKernel(i.XLW,c,{transposeA:n,transposeB:u})}})},2673:function(t,e,n){"use strict";n.d(e,{g:function(){return l}});var r=n(9681),i=n(5047),o=n(5420),a=n(971),u=n(5221),s=n(8893);let l=(0,n(2888).op)({maximum_:function(t,e){let n=(0,a._1)(t,"a","maximum"),l=(0,a._1)(e,"b","maximum");[n,l]=(0,o.makeTypesMatch)(n,l),"bool"===n.dtype&&(n=(0,s.p)(n,"int32"),l=(0,s.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);let c={a:n,b:l};return r.BV.runKernel(i.BMI,c)}})},5314:function(t,e,n){"use strict";n.d(e,{d:function(){return u}});var r=n(9681),i=n(5047),o=n(5420),a=n(971);let u=(0,n(2888).op)({mul_:function(t,e){let n=(0,a._1)(t,"a","mul"),u=(0,a._1)(e,"b","mul");[n,u]=(0,o.makeTypesMatch)(n,u);let s={a:n,b:u};return r.BV.runKernel(i.wYn,s)}})},2666:function(t,e,n){"use strict";n.d(e,{W:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({neg_:function(t){let e=(0,o._1)(t,"x","neg");return r.BV.runKernel(i.kuV,{x:e})}})},8713:function(t,e,n){"use strict";n.d(e,{l:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({oneHot_:function(t,e,n=1,a=0,u="int32"){if(e<2)throw Error(`Error in oneHot: depth must be >=2, but it is ${e}`);let s=(0,o._1)(t,"indices","oneHot","int32");return r.BV.runKernel(i.we_,{indices:s},{dtype:u,depth:e,onValue:n,offValue:a})}})},2888:function(t,e,n){"use strict";n.d(e,{op:function(){return a},z:function(){return o}});var r=n(9681),i=n(2771);let o="__op";function a(t){let e=Object.keys(t);if(1!==e.length)throw Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0],a=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));let u=(...t)=>{r.BV.startScope(n);try{let e=a(...t);return(0,i.tI)(e)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(e),e}catch(t){throw r.BV.endScope(null),t}};return Object.defineProperty(u,"name",{value:n+=o,configurable:!0}),u}},570:function(t,e,n){"use strict";n.d(e,{zvA:function(){return s.z},WnP:function(){return i.W},Khb:function(){return l},__u:function(){return c},IHx:function(){return h.I},QBD:function(){return d},$6P:function(){return p},YjB:function(){return g},NqF:function(){return m},vHJ:function(){return y},ZRM:function(){return b},VfV:function(){return w},z4N:function(){return v},fvJ:function(){return E},C80:function(){return x},wS1:function(){return A},uR5:function(){return $},zEQ:function(){return C},tgs:function(){return F},Dxk:function(){return P},JY5:function(){return L},p3b:function(){return U},E4h:function(){return V},yE8:function(){return G},ycw:function(){return z},anm:function(){return nP},XsQ:function(){return W},UFq:function(){return q},f3b:function(){return K.f},pju:function(){return _.p},mDi:function(){return j},iUl:function(){return X},d9v:function(){return I.d},PYB:function(){return Z.P},zoF:function(){return T},gME:function(){return J},Izb:function(){return Y},MNy:function(){return Q},ZaL:function(){return tt},PAt:function(){return tn},Tek:function(){return te},bc:function(){return ti},pdZ:function(){return to},$QV:function(){return tu},mCk:function(){return ts},f9Y:function(){return tl},mew:function(){return nj},$Gn:function(){return tc},zbp:function(){return th},ppE:function(){return tf},nTT:function(){return td},B10:function(){return tp},Ka3:function(){return tg},WmZ:function(){return tm},hiC:function(){return ty.h},NTj:function(){return tE},AKD:function(){return tx},rvX:function(){return nq},WYO:function(){return t_},pyx:function(){return tS.p},GRh:function(){return nK},EDe:function(){return tB},DgJ:function(){return tw},qNN:function(){return tA},d2q:function(){return tV},Qqt:function(){return tF},dt4:function(){return tP},t$B:function(){return tL},iyy:function(){return tG},kp_:function(){return nl},hlL:function(){return H.h},GWj:function(){return tz},qPi:function(){return tW.q},imm:function(){return r},Iqj:function(){return tq},dbB:function(){return nW},pjt:function(){return tK},brS:function(){return tj},Sxn:function(){return nc},asL:function(){return tH.a},BHj:function(){return rF},V3u:function(){return nH},wx0:function(){return nh},xVT:function(){return tX},UWc:function(){return tZ},i2d:function(){return tJ},hi7:function(){return tY.h},d9m:function(){return tQ},zN1:function(){return t0},$r2:function(){return rP},SX3:function(){return t1},G9k:function(){return t2},cM7:function(){return t3},Krr:function(){return t4},e_t:function(){return t7},CmS:function(){return et},l_t:function(){return ee},HvI:function(){return en},hJK:function(){return er},K5V:function(){return ei},egP:function(){return eo},MB5:function(){return rL},eab:function(){return eu},OI3:function(){return N.O},Fp7:function(){return tI},_sB:function(){return es},YQQ:function(){return el},Ip$:function(){return ec},gWQ:function(){return eh.g},J69:function(){return ef},ry_:function(){return em},VV$:function(){return tT},LTh:function(){return ey},VdP:function(){return eb},wQq:function(){return ew},Gi7:function(){return ev},p_:function(){return nU},dC7:function(){return M.d},rq4:function(){return ek},SJ_:function(){return eE},W76:function(){return t5.W},KOy:function(){return tC},Quu:function(){return ex},lfX:function(){return e_.l},iUs:function(){return ep},JpU:function(){return eS},op:function(){return s.op},N2O:function(){return eB},vku:function(){return eA},pNR:function(){return e$},koy:function(){return eI},t1L:function(){return eT},lGY:function(){return eN},d_R:function(){return eR},sQ3:function(){return tN.s},AL3:function(){return eD.A},S0v:function(){return eO.S},WVs:function(){return eC},$gW:function(){return eV},VT$:function(){return eF},N89:function(){return eP},TN_:function(){return eL},wzB:function(){return eq},nGf:function(){return eK},ruB:function(){return ej},LGj:function(){return eH},pe5:function(){return eX},w6H:function(){return eZ},kwC:function(){return eJ.k},M25:function(){return eY},UYe:function(){return eQ.U},btT:function(){return e0.b},XLQ:function(){return B.X},GYS:function(){return e1},SDf:function(){return e2},diP:function(){return e3},sx7:function(){return e4},mG2:function(){return e6},QEs:function(){return nd},NMM:function(){return e5},bp0:function(){return e8},iD$:function(){return tM.i},snQ:function(){return nG},zcT:function(){return ea},U8D:function(){return e7},U_I:function(){return e9},ODp:function(){return nt},XD2:function(){return R.X},Xxe:function(){return ne},tdS:function(){return rV},O$l:function(){return nn},R_K:function(){return nr},tPi:function(){return D},jZU:function(){return ni},SmN:function(){return no},CnO:function(){return na},p0P:function(){return nu},XAC:function(){return ns},Wvh:function(){return t8},fBT:function(){return eM},rVs:function(){return rU},ers:function(){return nz},uN7:function(){return rC},Vl2:function(){return nf},_b3:function(){return tR._},h62:function(){return tD.h},$i:function(){return np},L9e:function(){return ng},knu:function(){return nm},Nbs:function(){return ny.N},NXj:function(){return nb},Z_8:function(){return rG},luU:function(){return t9.l},Smz:function(){return tO.S},ORZ:function(){return nw},AEp:function(){return O},XeE:function(){return nv.X},RRF:function(){return nE},odF:function(){return nx},wOQ:function(){return n_.w},yXz:function(){return nS},Bfx:function(){return nB},xZs:function(){return nA},Pg0:function(){return nI},Gg6:function(){return tU},hg7:function(){return nT},p4s:function(){return nL.p},Xu6:function(){return nN},Two:function(){return nM},pUJ:function(){return nR},HHK:function(){return nD},GaM:function(){return nO},VD$:function(){return nC},arb:function(){return tv},itS:function(){return nF},lls:function(){return ed},P84:function(){return tk.P}});var r={};n.r(r),n.d(r,{conv2d:function(){return nJ},depthwiseConv2d:function(){return n0},matMul:function(){return n1}});var i=n(9044),o=n(9681),a=n(5047),u=n(971),s=n(2888);let l=(0,s.op)({acos_:function(t){let e=(0,u._1)(t,"x","acos");return o.BV.runKernel(a.VGw,{x:e})}}),c=(0,s.op)({acosh_:function(t){let e=(0,u._1)(t,"x","acosh");return o.BV.runKernel(a.SpW,{x:e})}});var h=n(3266),f=n(2771);let d=(0,s.op)({addN_:function(t){f.hu(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),f.hu(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let e=t.map((t,e)=>(0,u._1)(t,`tensors${e}`,"addN")),n=e[0];return e.forEach(t=>{if(t.dtype!==n.dtype)throw Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(t=>{if(!f.cO(t.shape,n.shape))throw Error("All tensors passed to tf.addN() must have the same shape")}),o.BV.runKernel(a.Xze,e)}}),p=(0,s.op)({all_:function(t,e=null,n=!1){let r=(0,u._1)(t,"x","all","bool");return o.BV.runKernel(a.oT6,{x:r},{axis:e,keepDims:n})}}),g=(0,s.op)({any_:function(t,e=null,n=!1){let r=(0,u._1)(t,"x","any","bool");return o.BV.runKernel(a.IKK,{x:r},{axis:e,keepDims:n})}}),m=(0,s.op)({argMax_:function(t,e=0){let n=(0,u._1)(t,"x","argMax");return o.BV.runKernel(a.sJF,{x:n},{axis:e})}}),y=(0,s.op)({argMin_:function(t,e=0){let n=(0,u._1)(t,"x","argMin");return o.BV.runKernel(a.aJk,{x:n},{axis:e})}}),b=(0,s.op)({asin_:function(t){let e=(0,u._1)(t,"x","asin");return o.BV.runKernel(a.M2y,{x:e})}}),w=(0,s.op)({asinh_:function(t){let e=(0,u._1)(t,"x","asinh");return o.BV.runKernel(a.qw7,{x:e})}}),v=(0,s.op)({atan_:function(t){let e=(0,u._1)(t,"x","atan");return o.BV.runKernel(a.jMg,{x:e})}});var k=n(5420);let E=(0,s.op)({atan2_:function(t,e){let n=(0,u._1)(t,"a","atan2"),r=(0,u._1)(e,"b","atan2");[n,r]=(0,k.makeTypesMatch)(n,r);let i={a:n,b:r};return o.BV.runKernel(a.QCc,i)}}),x=(0,s.op)({atanh_:function(t){let e=(0,u._1)(t,"x","atanh");return o.BV.runKernel(a.Oyi,{x:e})}});var _=n(8893),S=n(9011),B=n(6439);let A=(0,s.op)({avgPool_:function(t,e,n,r,i){let s=(0,u._1)(t,"x","avgPool","float32");f.hu(S.jT(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let l=s,c=!1;3===s.rank&&(c=!0,l=(0,B.X)(s,[1,s.shape[0],s.shape[1],s.shape[2]])),f.hu(4===l.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${l.rank}.`),S.m("avgPool",r,i);let h={x:l},d=o.BV.runKernel(a.JhU,h,{filterSize:e,strides:n,pad:r,dimRoundingMode:i});return(d=(0,_.p)(d,s.dtype),c)?(0,B.X)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),$=(0,s.op)({avgPool3d_:function(t,e,n,r,i,s="NDHWC"){let l=(0,u._1)(t,"x","avgPool3d","float32"),c=l,h=!1;4===l.rank&&(h=!0,c=(0,B.X)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),f.hu(5===c.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${c.rank}.`),f.hu("NDHWC"===s,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),f.hu("number"==typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),(0,S.m)("avgPool3d",r,i);let d={x:c},p=o.BV.runKernel(a._k9,d,{filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s});return(p=(0,_.p)(p,c.dtype),h)?(0,B.X)(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});var I=n(699);let T=(0,s.op)({concat_:function(t,e=0){(0,f.hu)(t.length>=1,()=>"Pass at least one tensor to concat");let n=(0,u.sI)(t,"tensors","concat","string_or_numeric");return("complex64"===n[0].dtype&&n.forEach(t=>{if("complex64"!==t.dtype)throw Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${t.dtype}. `)}),1===n.length)?(0,I.d)(n[0]):o.BV.runKernel(a.Eh3,n,{axis:e})}});var N=n(5193),M=n(5314),R=n(5986);let D=(0,s.op)({slice_:function(t,e,n){let r=(0,u._1)(t,"x","slice","string_or_numeric");if(0===r.rank)throw Error("Slicing scalar is not possible");return o.BV.runKernel(a.p2w,{x:r},{begin:e,size:n})}}),O=(0,s.op)({tanh_:function(t){let e=(0,u._1)(t,"x","tanh","float32");return o.BV.runKernel(a.MIZ,{x:e})}}),C=(0,s.op)({basicLSTMCell_:function(t,e,n,r,i,o){let a=(0,u._1)(t,"forgetBias","basicLSTMCell"),s=(0,u._1)(e,"lstmKernel","basicLSTMCell"),l=(0,u._1)(n,"lstmBias","basicLSTMCell"),c=(0,u._1)(r,"data","basicLSTMCell"),f=(0,u._1)(i,"c","basicLSTMCell"),d=T([c,(0,u._1)(o,"h","basicLSTMCell")],1),p=(0,N.O)(d,s),g=(0,h.I)(p,l),m=g.shape[0],y=g.shape[1]/4,b=[m,y],w=D(g,[0,0],b),v=D(g,[0,y],b),k=D(g,[0,2*y],b),E=D(g,[0,3*y],b),x=(0,h.I)((0,M.d)((0,R.X)(w),O(v)),(0,M.d)(f,(0,R.X)((0,h.I)(a,k)))),_=(0,M.d)(O(x),(0,R.X)(E));return[x,_]}}),V=(0,s.op)({batchToSpaceND_:function(t,e,n){let r=(0,u._1)(t,"x","batchToSpaceND"),i=e.reduce((t,e)=>t*e);return f.hu(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),f.hu(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),f.hu(r.shape[0]%i==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`),o.BV.runKernel(a.zws,{x:r},{blockShape:e,crops:n})}}),F=(0,s.op)({batchNorm_:function(t,e,n,r,i,s){let l,c;null==s&&(s=.001);let h=(0,u._1)(t,"x","batchNorm"),d=(0,u._1)(e,"mean","batchNorm"),p=(0,u._1)(n,"variance","batchNorm");null!=i&&(l=(0,u._1)(i,"scale","batchNorm")),null!=r&&(c=(0,u._1)(r,"offset","batchNorm")),f.hu(d.rank===p.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),f.hu(null==c||d.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),f.hu(null==l||d.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let g={x:0===h.rank||1===h.rank?(0,B.X)(h,[1,1,1,h.size]):2===h.rank?(0,B.X)(h,[1,1,h.shape[0],h.shape[1]]):3===h.rank?(0,B.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]]):h,scale:l,offset:c,mean:d,variance:p},m={varianceEpsilon:s},y=o.BV.runKernel(a.sHE,g,m);return(0,B.X)(y,h.shape)}}),P=(0,s.op)({batchNorm2d_:function(t,e,n,r,i,o){let a,s;let l=(0,u._1)(t,"x","batchNorm"),c=(0,u._1)(e,"mean","batchNorm"),h=(0,u._1)(n,"variance","batchNorm");return null!=i&&(a=(0,u._1)(i,"scale","batchNorm")),null!=r&&(s=(0,u._1)(r,"offset","batchNorm")),f.hu(2===l.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${l.rank}.`),f.hu(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${c.rank}.`),f.hu(2===h.rank||1===h.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${h.rank}.`),null!=a&&f.hu(2===a.rank||1===a.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${a.rank}.`),null!=s&&f.hu(2===s.rank||1===s.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${s.rank}.`),F(l,c,h,s,a,o)}}),L=(0,s.op)({batchNorm3d_:function(t,e,n,r,i,o){let a,s;let l=(0,u._1)(t,"x","batchNorm"),c=(0,u._1)(e,"mean","batchNorm"),h=(0,u._1)(n,"variance","batchNorm");return null!=i&&(a=(0,u._1)(i,"scale","batchNorm")),null!=r&&(s=(0,u._1)(r,"offset","batchNorm")),f.hu(3===l.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${l.rank}.`),f.hu(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${c.rank}.`),f.hu(3===h.rank||1===h.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${h.rank}.`),null!=a&&f.hu(3===a.rank||1===a.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${a.rank}.`),null!=s&&f.hu(3===s.rank||1===s.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${s.rank}.`),F(l,c,h,s,a,o)}}),U=(0,s.op)({batchNorm4d_:function(t,e,n,r,i,o){let a,s;let l=(0,u._1)(t,"x","batchNorm"),c=(0,u._1)(e,"mean","batchNorm"),h=(0,u._1)(n,"variance","batchNorm");return null!=i&&(a=(0,u._1)(i,"scale","batchNorm")),null!=r&&(s=(0,u._1)(r,"offset","batchNorm")),f.hu(4===l.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${l.rank}.`),f.hu(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${c.rank}.`),f.hu(4===h.rank||1===h.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${h.rank}.`),null!=a&&f.hu(4===a.rank||1===a.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${a.rank}.`),null!=s&&f.hu(4===s.rank||1===s.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${s.rank}.`),F(l,c,h,s,a,o)}}),G=(0,s.op)({bincount_:function(t,e,n){let r=(0,u._1)(t,"x","bincount"),i=(0,u._1)(e,"weights","bincount");return f.hu("int32"===r.dtype,()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),f.hu(n>=0,()=>`size must be non-negative, but got ${n}.`),f.hu(i.size===r.size||0===i.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`),o.BV.runKernel(a.zvY,{x:r,weights:i},{size:n})}}),z=(0,s.op)({bitwiseAnd_:function(t,e){let n=(0,u._1)(t,"x","bitwiseAnd"),r=(0,u._1)(e,"y","bitwiseAnd");if(!(0,f.cO)(n.shape,r.shape))throw Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if("int32"!==n.dtype||"int32"!==r.dtype)throw Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);return o.BV.runKernel(a.hCO,{a:n,b:r})}}),W=(0,s.op)({broadcastArgs_:function(t,e){let n=(0,u._1)(t,"s0","broadcastArgs","int32"),r=(0,u._1)(e,"s1","broadcastArgs","int32");if(1!==n.rank)throw Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);return o.BV.runKernel(a.eEB,{s0:n,s1:r})}}),q=(0,s.op)({broadcastTo_:function(t,e){let n=(0,u._1)(t,"broadcastTo","x"),r=n.shape;if((0,f.Mu)(e),e.length<n.rank)throw Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){let t=n.shape.slice();for(;t.length<e.length;)t.unshift(1);n=(0,B.X)(n,t)}let i=n.shape,s=Array.from(e);for(let t=e.length-1;t>=0;t--)if(i[t]===e[t])s[t]=1;else if(1!==n.shape[t])throw Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(0===s.map((t,e)=>t>1?e:-1).filter(t=>t>=0).length)return(0,I.d)(n);let l={x:n};return o.BV.runKernel(a.n9L,l,{reps:s})}});var K=n(5515);let j=(0,s.op)({ceil_:function(t){let e=(0,u._1)(t,"x","ceil","float32");return o.BV.runKernel(a.gJX,{x:e})}});var H=n(180);let X=(0,s.op)({clipByValue_:function(t,e,n){let r=(0,u._1)(t,"x","clipByValue");return(f.hu(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)?(0,H.h)(r.shape,e,r.dtype):o.BV.runKernel(a.xnO,{x:r},{clipValueMin:e,clipValueMax:n})}});var Z=n(7977);let J=(0,s.op)({concat1d_:function(t){return T(t,0)}}),Y=(0,s.op)({concat2d_:function(t,e){return T(t,e)}}),Q=(0,s.op)({concat3d_:function(t,e){return T(t,e)}}),tt=(0,s.op)({concat4d_:function(t,e){return T(t,e)}}),te=(0,s.op)({conv2d_:function(t,e,n,r,i="NHWC",s=[1,1],l){let c=(0,u._1)(t,"x","conv2d","float32"),h=(0,u._1)(e,"filter","conv2d","float32"),d=c,p=!1;3===c.rank&&(p=!0,d=(0,B.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),f.hu(4===d.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${d.rank}.`),f.hu(4===h.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${h.rank}.`),S.m("conv2d",r,l);let g="NHWC"===i?d.shape[3]:d.shape[1];f.hu(g===h.shape[2],()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${h.shape[2]}.`),f.hu(S.jT(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),f.hu(S.U3(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),f.hu(S.U3(n),()=>"Error in conv2D: Strides should be larger than 0.");let m={x:d,filter:h},y=o.BV.runKernel(a.mhS,m,{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:l});return p?(0,B.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}}),tn=(0,s.op)({conv1d_:function(t,e,n,r,i="NWC",o=1,a){let s=(0,u._1)(t,"x","conv1d"),l=(0,u._1)(e,"filter","conv1d"),c=s,h=!1;2===s.rank&&(h=!0,c=(0,B.X)(s,[1,s.shape[0],s.shape[1]])),f.hu(3===c.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),f.hu(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),S.m("conv1d",r,a),f.hu(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),f.hu(S.jT(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),f.hu(S.U3(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),f.hu(S.U3(n),()=>"Error in conv1D: Stride should be larger than 0."),f.hu("NWC"===i,()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let d=(0,B.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=te((0,B.X)(c,[c.shape[0],1,c.shape[1],c.shape[2]]),d,[1,n],r,"NHWC",[1,o],a);return h?(0,B.X)(p,[p.shape[2],p.shape[3]]):(0,B.X)(p,[p.shape[0],p.shape[2],p.shape[3]])}}),tr=(0,s.op)({conv2DBackpropInput_:function(t,e,n,r,i,u="NHWC",s){f.hu(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let l=t,c=e,h=!1;3===e.rank&&(h=!0,c=(0,B.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]),l=[1,t[0],t[1],t[2]]),f.hu(4===l.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${l.length}.`),f.hu(4===c.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${c.rank}`),f.hu(4===n.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let d="NHWC"===u?l[3]:l[1],p="NHWC"===u?c.shape[3]:c.shape[1];f.hu(d===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${d}) must match input depth for filter ${n.shape[2]}.`),f.hu(p===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[3]}.`),S.m("conv2dDerInput",i,s);let g={dy:c,filter:n},m={strides:r,pad:i,dataFormat:u,dimRoundingMode:s,inputShape:l},y=o.BV.runKernel(a.wm,g,m);return h?(0,B.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}}),ti=(0,s.op)({conv2dTranspose_:function(t,e,n,r,i,o){return tr(n,(0,u._1)(t,"x","conv2dTranspose"),(0,u._1)(e,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),to=(0,s.op)({conv3d_:function(t,e,n,r,i="NDHWC",s=[1,1,1]){let l=(0,u._1)(t,"x","conv3d"),c=(0,u._1)(e,"filter","conv3d"),h=l,d=!1;4===l.rank&&(d=!0,h=(0,B.X)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),f.hu(5===h.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${h.rank}.`),f.hu(5===c.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${c.rank}.`),f.hu(h.shape[4]===c.shape[3],()=>`Error in conv3d: depth of input (${h.shape[4]}) must match input depth for filter ${c.shape[3]}.`),f.hu((0,S.jT)(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),f.hu("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),f.hu((0,S.U3)(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),f.hu((0,S.U3)(n),()=>"Error in conv3D: Strides should be larger than 0.");let p={x:h,filter:c},g=o.BV.runKernel(a.x12,p,{strides:n,pad:r,dataFormat:i,dilations:s});return d?(0,B.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),ta=(0,s.op)({conv3DBackpropInput_:function(t,e,n,r,i){f.hu(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let u=t,s=e,l=!1;4===e.rank&&(l=!0,s=(0,B.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),u=[1,t[0],t[1],t[2],t[3]]);let c=u[4],h=s.shape[4];f.hu(5===u.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${u.length}.`),f.hu(5===s.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),f.hu(5===n.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),f.hu(c===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[3]}.`),f.hu(h===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[4]}.`);let d={dy:s,filter:n},p={pad:i,strides:r,inputShape:u},g=o.BV.runKernel(a.ik2,d,p);return l?(0,B.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),tu=(0,s.op)({conv3dTranspose_:function(t,e,n,r,i){return ta(n,(0,u._1)(t,"x","conv3dTranspose"),(0,u._1)(e,"filter","conv3dTranspose"),r,i)}}),ts=(0,s.op)({cos_:function(t){let e=(0,u._1)(t,"x","cos","float32");return o.BV.runKernel(a.mc4,{x:e})}}),tl=(0,s.op)({cosh_:function(t){let e=(0,u._1)(t,"x","cosh","float32");return o.BV.runKernel(a.TR1,{x:e})}}),tc=(0,s.op)({cumprod_:function(t,e=0,n=!1,r=!1){let i=(0,u._1)(t,"x","cumprod");return o.BV.runKernel(a.Byc,{x:i},{axis:e,exclusive:n,reverse:r})}}),th=(0,s.op)({cumsum_:function(t,e=0,n=!1,r=!1){let i=(0,u._1)(t,"x","cumsum");return o.BV.runKernel(a.iHb,{x:i},{axis:e,exclusive:n,reverse:r})}}),tf=(0,s.op)({denseBincount_:function(t,e,n,r=!1){let i=(0,u._1)(t,"x","denseBincount"),s=(0,u._1)(e,"weights","denseBincount");return f.hu("int32"===i.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),f.hu(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),f.hu(n>=0,()=>`size must be non-negative, but got ${n}.`),f.hu(s.size===i.size||0===s.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`),o.BV.runKernel(a.QRR,{x:i,weights:s},{size:n,binaryOutput:r})}}),td=(0,s.op)({depthToSpace_:function(t,e,n="NHWC"){let r=(0,u._1)(t,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],l="NHWC"===n?r.shape[3]:r.shape[1];return f.hu(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),f.hu(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),f.hu(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),f.hu(l%(e*e)==0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${l} for depthToSpace with input shape ${r.shape}`),o.BV.runKernel(a.T0n,{x:r},{blockSize:e,dataFormat:n})}}),tp=(0,s.op)({depthwiseConv2d_:function(t,e,n,r,i="NHWC",s=[1,1],l){let c=(0,u._1)(t,"x","depthwiseConv2d","float32"),h=(0,u._1)(e,"filter","depthwiseConv2d","float32"),d=c,p=!1;3===c.rank&&(p=!0,d=(0,B.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),f.hu(4===d.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`),f.hu(4===h.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`);let g="NHWC"===i?d.shape[3]:d.shape[1];f.hu(g===h.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${g}) must match the inChannels dimension in filter ${h.shape[2]}.`),S.m("depthwiseConv2d",r,l);let m={x:d,filter:h},y=o.BV.runKernel(a.cie,m,{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:l});return p?(0,B.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}}),tg=(0,s.op)({diag_:function(t){let e=(0,u._1)(t,"x","diag");return o.BV.runKernel(a.$w,{x:e})}}),tm=(0,s.op)({dilation2d_:function(t,e,n,r,i=[1,1],s="NHWC"){let l=(0,u._1)(t,"x","dilation2d"),c=(0,u._1)(e,"filter","dilation2d");f.hu(3===l.rank||4===l.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${l.rank}.`),f.hu(3===c.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${c.rank}.`),f.hu("NHWC"===s,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let h=l,d=!1;3===l.rank&&(h=(0,B.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=!0),f.hu(h.shape[3]===c.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${h.shape[3]} vs ${c.shape[2]}`);let p={x:h,filter:c},g=o.BV.runKernel(a.p4S,p,{strides:n,pad:r,dilations:i});return d?(0,B.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});var ty=n(3511),tb=n(5221);let tw=(0,s.op)({equal_:function(t,e){let n=(0,u._1)(t,"a","equal","string_or_numeric"),r=(0,u._1)(e,"b","equal","string_or_numeric");[n,r]=(0,k.makeTypesMatch)(n,r),(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape);let i={a:n,b:r};return o.BV.runKernel(a.hdR,i)}}),tv=(0,s.op)({where_:function(t,e,n){let r=(0,u._1)(e,"a","where"),i=(0,u._1)(n,"b","where"),s=(0,u._1)(t,"condition","where","bool"),l=(0,tb.assertAndGetBroadcastShape)((0,tb.assertAndGetBroadcastShape)(s.shape,r.shape),i.shape),c=q(s,l),h=q(r,l),f=q(i,l);return o.BV.runKernel(a.PhF,{condition:c,t:h,e:f})}});var tk=n(2898);let tE=(0,s.op)({divNoNan_:function(t,e){let n=(0,u._1)(t,"a","div"),r=(0,u._1)(e,"b","div");[n,r]=(0,k.makeTypesMatch)(n,r);let i=(0,ty.h)(n,r),o=(0,tk.P)(i);return tv(tw(r,o),o,i)}}),tx=(0,s.op)({dot_:function(t,e){let n=(0,u._1)(t,"t1","dot"),r=(0,u._1)(e,"t2","dot");f.hu((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(f.hu(i===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${o}.`),1===n.rank&&1===r.rank){let t=(0,B.X)(n,[1,-1]),e=(0,B.X)(r,[-1,1]),i=(0,N.O)(t,e);return(0,B.X)(i,[])}if(1===n.rank&&2===r.rank){let t=(0,B.X)(n,[1,-1]),e=(0,B.X)(r,[r.shape[0],r.shape[1]]),i=(0,N.O)(t,e);return(0,B.X)(i,[i.size])}if(2===n.rank&&1===r.rank){let t=(0,B.X)(r,[-1,1]),e=(0,N.O)(n,t);return(0,B.X)(e,[e.size])}{let t=(0,B.X)(r,[r.shape[0],r.shape[1]]);return(0,N.O)(n,t)}}}),t_=(0,s.op)({einsum_:function(t,...e){let n=e.map((t,e)=>(0,u._1)(t,`tensors${e}`,"einsum"));return o.BV.runKernel(a.$g6,n,{equation:t})}});var tS=n(4077);let tB=(0,s.op)({ensureShape_:function(t,e){let n=(0,u._1)(t,"x","ensureShape","string_or_numeric");if(!(0,f.DK)(n.shape,e))throw Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}}),tA=(0,s.op)({erf_:function(t){let e=(0,u._1)(t,"x","erf");f.hu("int32"===e.dtype||"float32"===e.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=(0,_.p)(e,"float32"));let n={x:e};return o.BV.runKernel(a.Omj,n)}});var t$=n(7050);let tI=(0,s.op)({max_:function(t,e=null,n=!1){let r=(0,u._1)(t,"x","max");return o.BV.runKernel(a.YoZ,{x:r},{reductionIndices:e,keepDims:n})}}),tT=(0,s.op)({min_:function(t,e=null,n=!1){let r=(0,u._1)(t,"x","min");return o.BV.runKernel(a.c17,{x:r},{axis:e,keepDims:n})}});var tN=n(2611),tM=n(6070),tR=n(9467),tD=n(7941),tO=n(1101);let tC=(0,s.op)({norm_:function(t,e="euclidean",n=null,r=!1){let o=function t(e,n,r=null){if(0===e.rank)return(0,i.W)(e);if(1!==e.rank&&null===r)return t((0,B.X)(e,[-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return(0,tO.S)((0,i.W)(e),r);if(n===1/0)return tI((0,i.W)(e),r);if(n===-1/0)return tT((0,i.W)(e),r);if("euclidean"===n||2===n)return(0,tR._)((0,tO.S)((0,tN.s)((0,i.W)(e),(0,tM.i)(2,"int32")),r));throw Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(r)&&2===r.length){if(1===n)return tI((0,tO.S)((0,i.W)(e),r[0]),r[1]-1);if(n===1/0)return tI((0,tO.S)((0,i.W)(e),r[1]),r[0]);if(n===-1/0)return tT((0,tO.S)((0,i.W)(e),r[1]),r[0]);if("fro"===n||"euclidean"===n)return(0,tR._)((0,tO.S)((0,tD.h)(e),r));throw Error(`Error in norm: invalid ord value: ${n}`)}throw Error(`Error in norm: invalid axis: ${r}`)}(t=(0,u._1)(t,"x","norm"),e,n),a=o.shape;if(r){let e=(0,f.EC)(n,t.shape);a=t$.rv(o.shape,e)}return(0,B.X)(o,a)}}),tV=(0,s.op)({euclideanNorm_:function(t,e=null,n=!1){return tC(t,"euclidean",e,n)}}),tF=(0,s.op)({exp_:function(t){let e=(0,u._1)(t,"x","exp");return o.BV.runKernel(a.NEP,{x:e})}}),tP=(0,s.op)({expandDims_:function(t,e=0){let n=(0,u._1)(t,"x","expandDims","string_or_numeric");return f.hu(e<=n.rank,()=>"Axis must be <= rank of the tensor"),o.BV.runKernel(a.YFo,{input:n},{dim:e})}}),tL=(0,s.op)({expm1_:function(t){let e=(0,u._1)(t,"x","expm1");return o.BV.runKernel(a.Y0y,{x:e})}}),tU=(0,s.op)({tile_:function(t,e){let n=(0,u._1)(t,"x","tile","string_or_numeric");return f.hu(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`),o.BV.runKernel(a.n9L,{x:n},{reps:e})}}),tG=(0,s.op)({eye_:function(t,e,n,r="float32"){null==e&&(e=t);let i=(0,K.f)([t,e],r),o=t<=e?t:e;for(let t=0;t<o;++t)i.set(1,t,t);let a=(0,B.X)(i.toTensor(),[t,e]);if(null==n)return a;if(1===n.length)return tU(tP(a,0),[n[0],1,1]);if(2===n.length)return tU(tP(tP(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return tU(tP(tP(tP(a,0),0),0),[n[0],n[1],n[2],1,1]);throw Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}}),tz=(0,s.op)({floor_:function(t){let e=(0,u._1)(t,"x","floor","float32");return o.BV.runKernel(a.OR,{x:e})}});var tW=n(7576);let tq=(0,s.op)({gather_:function(t,e,n=0,r=0){let i=(0,u._1)(t,"x","gather"),s=(0,u._1)(e,"indices","gather","int32");return o.BV.runKernel(a.qi_,{x:i,indices:s},{axis:n,batchDims:r})}}),tK=(0,s.op)({greater_:function(t,e){let n=(0,u._1)(t,"a","greater","string_or_numeric"),r=(0,u._1)(e,"b","greater","string_or_numeric");[n,r]=(0,k.makeTypesMatch)(n,r),(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape);let i={a:n,b:r};return o.BV.runKernel(a.iZT,i)}}),tj=(0,s.op)({greaterEqual_:function(t,e){let n=(0,u._1)(t,"a","greaterEqual","string_or_numeric"),r=(0,u._1)(e,"b","greaterEqual","string_or_numeric");[n,r]=(0,k.makeTypesMatch)(n,r),(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape);let i={a:n,b:r};return o.BV.runKernel(a.Acj,i)}});var tH=n(8587);let tX=(0,s.op)({isFinite_:function(t){let e=(0,u._1)(t,"x","isFinite");return o.BV.runKernel(a.avt,{x:e})}}),tZ=(0,s.op)({isInf_:function(t){let e=(0,u._1)(t,"x","isInf");return o.BV.runKernel(a.iWB,{x:e})}}),tJ=(0,s.op)({isNaN_:function(t){let e=(0,u._1)(t,"x","isNaN");return o.BV.runKernel(a.r7n,{x:e})}});var tY=n(6437);let tQ=(0,s.op)({less_:function(t,e){let n=(0,u._1)(t,"a","less","string_or_numeric"),r=(0,u._1)(e,"b","less","string_or_numeric");[n,r]=(0,k.makeTypesMatch)(n,r),(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape);let i={a:n,b:r};return o.BV.runKernel(a.vtC,i)}}),t0=(0,s.op)({lessEqual_:function(t,e){let n=(0,u._1)(t,"a","lessEqual","string_or_numeric"),r=(0,u._1)(e,"b","lessEqual","string_or_numeric");[n,r]=(0,k.makeTypesMatch)(n,r),(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape);let i={a:n,b:r};return o.BV.runKernel(a.CAk,i)}});function t1(t,e,n){if(n<=0)throw Error("The number of values should be positive.");return o.BV.runKernel(a.e7N,{},{start:t,stop:e,num:n})}let t2=(0,s.op)({localResponseNormalization_:function(t,e=5,n=1,r=1,i=.5){let s=(0,u._1)(t,"x","localResponseNormalization");f.hu(4===s.rank||3===s.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),f.hu(f.GN(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let l=s,c=!1;3===s.rank&&(c=!0,l=(0,B.X)(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let h={x:l},d=o.BV.runKernel(a.eZ0,h,{depthRadius:e,bias:n,alpha:r,beta:i});return c?(0,B.X)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),t3=(0,s.op)({log_:function(t){let e=(0,u._1)(t,"x","log","float32");return o.BV.runKernel(a.ZbH,{x:e})}}),t4=(0,s.op)({log1p_:function(t){let e=(0,u._1)(t,"x","log1p");return o.BV.runKernel(a.kU,{x:e})}});var t6=n(4310),t5=n(2666);let t8=(0,s.op)({softplus_:function(t){let e=(0,u._1)(t,"x","softplus");return o.BV.runKernel(a.MRv,{x:e})}}),t7=(0,s.op)({logSigmoid_:function(t){let e=(0,u._1)(t,"x","logSigmoid");return(0,t6.cb)(t=>({value:(0,t5.W)(t8((0,t5.W)(t))),gradFunc:e=>(0,M.d)(e,(0,R.X)((0,t5.W)(t)))}))(e)}});var t9=n(5799);let et=(0,s.op)({logSoftmax_:function(t,e=-1){let n=(0,u._1)(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return(0,t6.cb)((t,n)=>{let r=tI(t,e,!0),i=(0,t9.l)(t,r),o=(0,t9.l)((0,_.p)(i,"float32"),t3((0,tO.S)(tF(i),e,!0)));return n([o]),{value:o,gradFunc:(t,n)=>{let[r]=n,i=tF(r);return(0,t9.l)(t,(0,M.d)((0,tO.S)(t,e,!0),i))}}})(n)}}),ee=(0,s.op)({logSumExp_:function(t,e=null,n=!1){let r=(0,u._1)(t,"x","logSumExp"),i=(0,f.EC)(e,r.shape),o=tI(r,i,!0),a=tF((0,t9.l)(r,o)),s=t3((0,tO.S)(a,i)),l=(0,h.I)((0,B.X)(o,s.shape),s);if(n){let t=(0,t$.rv)(l.shape,i);return(0,B.X)(l,t)}return l}}),en=(0,s.op)({logicalAnd_:function(t,e){let n=(0,u._1)(t,"a","logicalAnd","bool"),r=(0,u._1)(e,"b","logicalAnd","bool");return(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape),o.BV.runKernel(a.PYm,{a:n,b:r})}}),er=(0,s.op)({logicalNot_:function(t){let e=(0,u._1)(t,"x","logicalNot","bool");return o.BV.runKernel(a.VfG,{x:e})}}),ei=(0,s.op)({logicalOr_:function(t,e){let n=(0,u._1)(t,"a","logicalOr","bool"),r=(0,u._1)(e,"b","logicalOr","bool");return(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape),o.BV.runKernel(a.MZg,{a:n,b:r})}}),eo=(0,s.op)({logicalXor_:function(t,e){let n=(0,u._1)(t,"a","logicalXor","bool"),r=(0,u._1)(e,"b","logicalXor","bool");return(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape),en(ei(t,e),er(en(t,e)))}}),ea=(0,s.op)({searchSorted_:function(t,e,n="left"){let r=(0,u._1)(t,"sortedSequence","searchSorted"),i=(0,u._1)(e,"values","searchSorted"),s=r.shape[r.shape.length-1],l=i.shape[i.shape.length-1],c=(0,B.X)(r,[-1,s]),h=(0,B.X)(i,[-1,l]);if(c.rank<2)throw Error("Sorted input argument must be at least 2-dimensional");if(c.shape[0]!==h.shape[0])throw Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,f.NA)(h.shape)>=2147483648)throw Error("values tensor size must less than 2147483648");if(c.shape[1]>=2147483648)throw Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${c.shape[1]}`);return o.BV.runKernel(a.nr8,{sortedSequence:c,values:h},{side:n})}});function eu(t,e){return ea(t,e,"left")}let es=(0,s.op)({maxPool_:function(t,e,n,r,i){let s=(0,u._1)(t,"x","maxPool"),l=s,c=!1;3===s.rank&&(c=!0,l=(0,B.X)(s,[1,s.shape[0],s.shape[1],s.shape[2]])),f.hu(4===l.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${l.rank}.`),f.hu(S.jT(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),S.m("maxPool",r,i);let h={x:l},d=o.BV.runKernel(a.mTV,h,{filterSize:e,strides:n,pad:r,dimRoundingMode:i});return c?(0,B.X)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),el=(0,s.op)({maxPool3d_:function(t,e=[1,1,1],n,r,i,s="NDHWC"){let l=(0,u._1)(t,"x","maxPool3d"),c=l,h=!1;4===l.rank&&(h=!0,c=(0,B.X)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),f.hu(5===c.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${c.rank}.`),f.hu("NDHWC"===s,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),(0,S.m)("maxPool3d",r,i);let d={x:c},p=o.BV.runKernel(a.OAf,d,{filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s});return h?(0,B.X)(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),ec=(0,s.op)({maxPoolWithArgmax_:function(t,e,n,r,i=!1){let s=(0,u._1)(t,"x","maxPoolWithArgmax"),l=o.BV.runKernel(a.vFR,{x:s},{filterSize:e,strides:n,pad:r,includeBatchInIndex:i});return{result:l[0],indexes:l[1]}}});var eh=n(2673);let ef=(0,s.op)({mean_:function(t,e=null,n=!1){let r=(0,u._1)(t,"x","mean");return o.BV.runKernel(a.q2K,{x:r},{axis:e,keepDims:n})}});function ed(t,e="float32"){if((0,f.Mu)(t),"complex64"===e){let e=ed(t,"float32"),n=ed(t,"float32");return(0,Z.P)(e,n)}let n=(0,f.wT)((0,f.NA)(t),e);return o.BV.makeTensor(n,t,e)}function ep(t,e="float32"){if((0,f.Mu)(t),"complex64"===e){let e=ep(t,"float32"),n=ed(t,"float32");return(0,Z.P)(e,n)}let n=(0,f.p8)((0,f.NA)(t),e);return o.BV.makeTensor(n,t,e)}var eg=n(6150);function em(t,e,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===t)return[];let r=(0,u._1)(t,"x","meshgrid",t instanceof eg.es?t.dtype:"float32");if(void 0===e)return[r];let i=(0,u._1)(e,"y","meshgrid",e instanceof eg.es?e.dtype:"float32"),o=(0,f.NA)(r.shape),a=(0,f.NA)(i.shape);return"xy"===n?(r=(0,B.X)(r,[1,-1]),i=(0,B.X)(i,[-1,1]),[(0,N.O)(ep([a,1],r.dtype),r),(0,N.O)(i,ep([1,o],i.dtype))]):(r=(0,B.X)(r,[-1,1]),i=(0,B.X)(i,[1,-1]),[(0,N.O)(r,ep([1,a],r.dtype)),(0,N.O)(ep([o,1],i.dtype),i)])}let ey=(0,s.op)({minimum_:function(t,e){let n=(0,u._1)(t,"a","minimum"),r=(0,u._1)(e,"b","minimum");[n,r]=(0,k.makeTypesMatch)(n,r),"bool"===n.dtype&&(n=(0,_.p)(n,"int32"),r=(0,_.p)(r,"int32")),(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape);let i={a:n,b:r};return o.BV.runKernel(a.q8u,i)}}),eb=(0,s.op)({mirrorPad_:function(t,e,n){f.hu("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=(0,u._1)(t,"x","mirrorPad");if(0===r.rank)throw Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");f.hu(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);let i="reflect"===n?1:0;for(let t=0;t<r.rank;t++)f.hu(2===e[t].length,()=>"Invalid number of paddings. Must be length of 2 each."),f.hu(e[t][0]>=0&&e[t][0]<=r.shape[t]-i&&e[t][1]>=0&&e[t][1]<=r.shape[t]-i,()=>`Padding in dimension ${t} cannot be greater than or equal to ${r.shape[t]-i} or less than 0 for input of shape ${r.shape}`);return o.BV.runKernel(a.jQs,{x:r},{paddings:e,mode:n})}}),ew=(0,s.op)({mod_:function(t,e){let n=(0,u._1)(t,"a","mod"),r=(0,u._1)(e,"b","mod");[n,r]=(0,k.makeTypesMatch)(n,r);let i={a:n,b:r};return o.BV.runKernel(a.Vbg,i)}}),ev=(0,s.op)({moments_:function(t,e=null,n=!1){t=(0,u._1)(t,"x","moments");let r=(0,f.EC)(e,t.shape),i=ef(t,r,n),o=i.shape;n||(o=(0,t$.rv)(i.shape,r));let a=ef((0,tD.h)((0,t9.l)((0,_.p)(t,"float32"),(0,B.X)(i,o))),r,n);return{mean:i,variance:a}}}),ek=(0,s.op)({multiRNNCell_:function(t,e,n,r){let i=(0,u._1)(e,"data","multiRNNCell"),o=(0,u.sI)(n,"c","multiRNNCell"),a=(0,u.sI)(r,"h","multiRNNCell"),s=i,l=[];for(let e=0;e<t.length;e++){let n=t[e](s,o[e],a[e]);l.push(n[0]),l.push(n[1]),s=n[1]}let c=[],h=[];for(let t=0;t<l.length;t+=2)c.push(l[t]),h.push(l[t+1]);return[c,h]}}),eE=(0,s.op)({multinomial_:function(t,e,n,r=!1){let i=(0,u._1)(t,"logits","multinomial"),s=i.size,l=i.rank;if(s<2)throw Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(l>2)throw Error(`Rank of probabilities must be 1 or 2, but is ${l}`);n=n||Math.random();let c=1===l?(0,B.X)(i,[1,-1]):i,h={numSamples:e,seed:n,normalized:r},f=o.BV.runKernel(a.NZg,{logits:c},h);return 1===l?(0,B.X)(f,[f.size]):f}}),ex=(0,s.op)({notEqual_:function(t,e){let n=(0,u._1)(t,"a","notEqual","string_or_numeric"),r=(0,u._1)(e,"b","notEqual","string_or_numeric");[n,r]=(0,k.makeTypesMatch)(n,r),(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape);let i={a:n,b:r};return o.BV.runKernel(a.yQU,i)}});var e_=n(8713);let eS=(0,s.op)({onesLike_:function(t){let e=(0,u._1)(t,"x","onesLike");return o.BV.runKernel(a.qWM,{x:e})}}),eB=(0,s.op)({outerProduct_:function(t,e){let n=(0,u._1)(t,"v1","outerProduct"),r=(0,u._1)(e,"v2","outerProduct");f.hu(1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let i=(0,B.X)(n,[-1,1]),o=(0,B.X)(r,[1,-1]);return(0,N.O)(i,o)}}),eA=(0,s.op)({pad_:function(t,e,n=0){let r=(0,u._1)(t,"x","pad");if(0===r.rank)throw Error("pad(scalar) is not defined. Pass non-scalar to pad");return o.BV.runKernel(a.lyA,{x:r},{paddings:e,constantValue:n})}}),e$=(0,s.op)({pad1d_:function(t,e,n=0){return(0,f.hu)(2===e.length,()=>"Invalid number of paddings. Must be length of 2."),eA(t,[e],n)}}),eI=(0,s.op)({pad2d_:function(t,e,n=0){return(0,f.hu)(2===e.length&&2===e[0].length&&2===e[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),eA(t,e,n)}}),eT=(0,s.op)({pad3d_:function(t,e,n=0){return(0,f.hu)(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),eA(t,e,n)}}),eN=(0,s.op)({pad4d_:function(t,e,n=0){return(0,f.hu)(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),eA(t,e,n)}}),eM=(0,s.op)({spaceToBatchND_:function(t,e,n){let r=(0,u._1)(t,"x","spaceToBatchND");return f.hu(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),f.hu(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),f.hu(r.shape.reduce((t,r,i)=>i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]==0:t,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`),o.BV.runKernel(a.TQc,{x:r},{blockShape:e,paddings:n})}}),eR=(0,s.op)({pool_:function(t,e,n,r,i,o,a){let s;null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");let l=(0,u._1)(t,"x","maxPool"),c=l,h=!1;3===l.rank&&(h=!0,c=(0,B.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),f.hu(S.jT(o,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${i}'`);let d=S.Xw(c.shape,e,o,i,r),p=[d.dilationHeight,d.dilationWidth];s="same"===r?function(t,e){let n=t.map((t,n)=>t+(t-1)*(e[n]-1)).map(t=>t-1),r=n.map(t=>Math.floor(t/2)),i=n.map((t,e)=>t-r[e]);return n.map((t,e)=>[r[e],i[e]])}([d.filterHeight,d.filterWidth],p):[[0,0],[0,0]];let g=1===p[0]&&1===p[1],[m,y]=function(t,e,n){let r=n.map(t=>t[0]),i=n.map(t=>t[1]),o=t.concat(r,i),a=e.map((t,e)=>(t-o[e]%t)%t),u=i.map((t,e)=>t+a[e]);return[e.map((t,e)=>[r[e],u[e]]),e.map((t,e)=>[0,a[e]])]}([d.inHeight,d.inWidth],p,s),b=g?r:"valid",w=g?c:eM(c,p,m),v=("avg"===n?()=>A(w,e,o,b,a):()=>es(w,e,o,b,a))(),k=g?v:V(v,p,y);return h?(0,B.X)(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});var eD=n(9427),eO=n(7290);let eC=(0,s.op)({prod_:function(t,e=null,n=!1){let r=(0,u._1)(t,"x","prod");"bool"===r.dtype&&(r=(0,_.p)(r,"int32"));let i={x:r};return o.BV.runKernel(a.DlI,i,{axis:e,keepDims:n})}}),eV=(0,s.op)({raggedGather_:function(t,e,n,r){let i=t.map((t,e)=>(0,u._1)(t,`tensors${e}`,"raggedGather","int32")),s=(0,u._1)(e,"paramsDenseValues","raggedGather"),l=(0,u._1)(n,"indices","raggedGather","int32"),c=o.BV.runKernel(a.dDz,{paramsNestedSplits:i,paramsDenseValues:s,indices:l},{outputRaggedRank:r});return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}}),eF=(0,s.op)({raggedRange_:function(t,e,n){let r=(0,u._1)(t,"starts","raggedRange"),i=(0,u._1)(e,"limits","raggedRange",r.dtype),s=(0,u._1)(n,"deltas","raggedRange",r.dtype),l=o.BV.runKernel(a.CQl,{starts:r,limits:i,deltas:s});return{rtNestedSplits:l[0],rtDenseValues:l[1]}}}),eP=(0,s.op)({raggedTensorToTensor_:function(t,e,n,r,i){let s=(0,u._1)(t,"shape","raggedTensorToTensor","int32"),l=(0,u._1)(e,"values","raggedTensorToTensor"),c=(0,u._1)(n,"defaultValue","raggedTensorToTensor",l.dtype),h=r.map((t,e)=>(0,u._1)(t,`tensors${e}`,"raggedTensorToTensor","int32"));return o.BV.runKernel(a.BiW,{shape:s,values:l,defaultValue:c,rowPartitionTensors:h},{rowPartitionTypes:i})}}),eL=(0,s.op)({rand_:function(t,e,n){(0,f.Mu)(t);let r=(0,f.NA)(t),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else if("bool"===n)i=new Uint8Array(r);else throw Error(`Unknown data type ${n}`);for(let t=0;t<r;t++)i[t]=e();return o.BV.makeTensor(i,t,n)}});var eU=n(9900);class eG{constructor(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let o=i||Math.random();this.random=eU.alea(o.toString())}nextValue(){let t,e;if(!isNaN(this.nextVal)){let t=this.nextVal;return this.nextVal=NaN,t}let n=!1;for(;!n;){let r,i,o;do o=(r=2*this.random()-1)*r+(i=2*this.random()-1)*i;while(o>=1||0===o);let a=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*r*a,e=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(t))&&(n=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class ez{constructor(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;let i=r||Math.random();this.randu=eU.alea(i.toString()),this.randn=new eG(0,1,n,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,i,o;for(;;){do r=this.randn.nextValue(),o=1+this.c*r;while(o<=0);if(o*=o*o,e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<e||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}class eW{constructor(t=0,e=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=eU.alea(r)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}let eq=(0,s.op)({randomGamma_:function(t,e,n=1,r="float32",i){if((0,f.Mu)(t),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw Error(`Unsupported data type ${r}`);let o=new ez(e,n,r,i),a=(0,K.f)(t,r);for(let t=0;t<a.values.length;t++)a.values[t]=o.nextValue();return a.toTensor()}}),eK=(0,s.op)({randomNormal_:function(t,e=0,n=1,r,i){if((0,f.Mu)(t),null!=r&&"bool"===r)throw Error(`Unsupported data type ${r}`);let o=new eG(e,n,r,!1,i),a=(0,K.f)(t,r);for(let t=0;t<a.values.length;t++)a.values[t]=o.nextValue();return a.toTensor()}}),ej=(0,s.op)({randomStandardNormal_:function(t,e,n){if(null!=e&&"bool"===e)throw Error(`Unsupported data type ${e}`);return eK(t,0,1,e,n)}}),eH=(0,s.op)({randomUniform_:function(t,e=0,n=1,r="float32",i){(0,f.Mu)(t);let o=(0,K.f)(t,r),a=new eW(e,n,null,i);for(let t=0;t<o.values.length;t++)o.values[t]=a.nextValue();return o.toTensor()}}),eX=(0,s.op)({randomUniformInt_:function(t,e,n,r){return eH(t,e,n,"int32",r)}});function eZ(t,e,n=1,r="float32"){if(0===n)throw Error("Cannot have a step of zero");return o.BV.runKernel(a.e6w,{},{start:t,stop:e,step:n,dtype:r})}var eJ=n(1773);let eY=(0,s.op)({reciprocal_:function(t){let e=(0,u._1)(t,"x","reciprocal");return o.BV.runKernel(a.$HU,{x:e})}});var eQ=n(114),e0=n(6762);let e1=(0,s.op)({reverse_:function(t,e){let n=(0,u._1)(t,"x","reverse");return o.BV.runKernel(a.mKl,{x:n},{dims:e})}}),e2=(0,s.op)({reverse1d_:function(t){let e=(0,u._1)(t,"x","reverse");return f.hu(1===e.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),e1(e,0)}}),e3=(0,s.op)({reverse2d_:function(t,e){let n=(0,u._1)(t,"x","reverse");return f.hu(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),e1(n,e)}}),e4=(0,s.op)({reverse3d_:function(t,e){let n=(0,u._1)(t,"x","reverse");return f.hu(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),e1(n,e)}}),e6=(0,s.op)({reverse4d_:function(t,e){let n=(0,u._1)(t,"x","reverse");return f.hu(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),e1(n,e)}}),e5=(0,s.op)({round_:function(t){let e=(0,u._1)(t,"x","round");return o.BV.runKernel(a.e07,{x:e})}}),e8=(0,s.op)({rsqrt_:function(t){let e=(0,u._1)(t,"x","rsqrt","float32");return o.BV.runKernel(a.bV0,{x:e})}}),e7=(0,s.op)({selu_:function(t){let e=(0,u._1)(t,"x","selu");return o.BV.runKernel(a.oFR,{x:e})}}),e9=(0,s.op)({separableConv2d_:function(t,e,n,r,i,o=[1,1],a="NHWC"){let s=(0,u._1)(t,"x","separableConv2d"),l=(0,u._1)(e,"depthwiseFilter","separableConv2d"),c=(0,u._1)(n,"pointwiseFilter","separableConv2d"),h=s,d=!1;if(3===s.rank&&(d=!0,h=(0,B.X)(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===a)throw Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");f.hu(4===h.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),f.hu(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),f.hu(4===c.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),f.hu(1===c.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),f.hu(1===c.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],g=l.shape[3];f.hu(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);let m=te(tp(h,l,r,i,a,o),c,1,"valid",a);return d?(0,B.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}}),nt=async function(t,e){let n=(0,u._1)(t,"x","setdiff1d"),r=(0,u._1)(e,"y","setdiff1d");f.hu(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),f.hu(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),f.hu(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);let i=await n.data(),o=new Set(await r.data()),a=0;for(let t=0;t<i.length;t++)!o.has(i[t])&&a++;let s=new eg.YD([a],n.dtype),l=new eg.YD([a],"int32");for(let t=0,e=0;t<i.length;t++)!o.has(i[t])&&(s.values[e]=i[t],l.values[e]=t,e++);return[s.toTensor(),l.toTensor()]},ne=(0,s.op)({sign_:function(t){let e=(0,u._1)(t,"x","sign");return o.BV.runKernel(a.i5y,{x:e})}}),nn=(0,s.op)({sin_:function(t){let e=(0,u._1)(t,"x","sin","float32");return o.BV.runKernel(a.RQH,{x:e})}}),nr=(0,s.op)({sinh_:function(t){let e=(0,u._1)(t,"x","sinh");return o.BV.runKernel(a.wYB,{x:e})}}),ni=(0,s.op)({slice1d_:function(t,e,n){let r=(0,u._1)(t,"x","slice1d");return f.hu(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),D(r,[e],[n])}}),no=(0,s.op)({slice2d_:function(t,e,n){let r=(0,u._1)(t,"x","slice2d");return f.hu(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),D(r,e,n)}}),na=(0,s.op)({slice3d_:function(t,e,n){let r=(0,u._1)(t,"x","slice3d");return f.hu(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),D(r,e,n)}}),nu=(0,s.op)({slice4d_:function(t,e,n){let r=(0,u._1)(t,"x","slice4d");return f.hu(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),D(r,e,n)}}),ns=(0,s.op)({softmax_:function(t,e=-1){let n=(0,u._1)(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);let r={dim:e};return o.BV.runKernel(a.Gcp,{logits:n},r)}}),nl=(0,s.op)({fft_:function(t){return(0,f.hu)("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`),o.BV.runKernel(a.vwp,{input:t})}}),nc=(0,s.op)({ifft_:function(t){return(0,f.hu)("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`),o.BV.runKernel(a.Qg5,{input:t})}}),nh=(0,s.op)({irfft_:function(t){let e;let n=t.shape[t.shape.length-1],r=t.size/n;if(n<=2)e=nc((0,B.X)(t,[r,n]));else{let i=[r,2*(n-1)],o=(0,B.X)((0,eJ.k)(t),[r,n]),a=(0,B.X)((0,tH.a)(t),[r,n]),u=e1(D(o,[0,1],[r,n-2]),1),s=(0,M.d)(e1(D(a,[0,1],[r,n-2]),1),(0,tM.i)(-1)),l=T([o,u],1),c=T([a,s],1);e=nc((0,B.X)((0,Z.P)(l,c),[i[0],i[1]]))}if(e=(0,eJ.k)(e),3===t.rank&&0!==t.shape[0]){let n=e,r=t.shape[0];e=(0,B.X)(e,[r,e.shape[0]/r,e.shape[1]]),n.dispose()}return e}}),nf=(0,s.op)({split_:function(t,e,n=0){let r=(0,u._1)(t,"x","split");return o.BV.runKernel(a.L8s,{x:r},{numOrSizeSplits:e,axis:n})}}),nd=(0,s.op)({rfft_:function(t,e){let n;(0,f.hu)("float32"===t.dtype,()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let r=t.shape[t.shape.length-1],i=t.size/r;if(null!=e&&e<r){let i=t.shape.map(t=>0),o=t.shape.map(t=>t);o[t.shape.length-1]=e,n=D(t,i,o),r=e}else if(null!=e&&e>r){let i=t.shape.map(t=>t);i[t.shape.length-1]=e-r,n=T([t,ed(i)],t.shape.length-1),r=e}else n=t;let o=(0,tk.P)(n),a=nl((0,B.X)((0,Z.P)(n,o),[i,r])),u=Math.floor(r/2)+1,s=(0,eJ.k)(a),l=(0,tH.a)(a),c=nf(s,[u,r-u],s.shape.length-1),h=nf(l,[u,r-u],l.shape.length-1),d=n.shape.slice();return d[n.shape.length-1]=u,(0,B.X)((0,Z.P)(c[0],h[0]),d)}}),np=(0,s.op)({squaredDifference_:function(t,e){let n=(0,u._1)(t,"a","squaredDifference"),r=(0,u._1)(e,"b","squaredDifference");[n,r]=(0,k.makeTypesMatch)(n,r),(0,tb.assertAndGetBroadcastShape)(n.shape,r.shape);let i={a:n,b:r};return o.BV.runKernel(a._tC,i,{})}}),ng=(0,s.op)({squeeze_:function(t,e){let n=(0,u._1)(t,"x","squeeze","string_or_numeric");return(0,B.X)(n,(0,f.bp)(n.shape,e).newShape)}}),nm=(0,s.op)({stack_:function(t,e=0){let n=(0,u.sI)(t,"tensors","stack","string_or_numeric");return f.hu(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&f.hu(e<=n[0].rank,()=>"Axis must be <= rank of the tensor"),o.BV.runKernel(a.QiL,n,{axis:e})}});var ny=n(9794);let nb=(0,s.op)({stridedSlice_:function(t,e,n,r,i=0,s=0,l=0,c=0,h=0){let f=(0,u._1)(t,"x","stridedSlice","string_or_numeric");return o.BV.runKernel(a.jQk,{x:f},{begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:l,newAxisMask:c,shrinkAxisMask:h})}}),nw=(0,s.op)({tan_:function(t){let e=(0,u._1)(t,"x","tan","float32");return o.BV.runKernel(a.sEM,{x:e})}});var nv=n(1802),nk=n(1185);function nE(t,e){(0,f.Cq)(t);let n=(0,u.C)(t,e);if(1!==n.length)throw Error("tensor1d() requires values to be a flat/TypedArray");return(0,nk.H)(t,null,n,e)}function nx(t,e,n){if((0,f.Cq)(t),null!=e&&2!==e.length)throw Error("tensor2d() requires shape to have two numbers");let r=(0,u.C)(t,n);if(2!==r.length&&1!==r.length)throw Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,nk.H)(t,e,r,n)}var n_=n(1051);function nS(t,e,n){if((0,f.Cq)(t),null!=e&&4!==e.length)throw Error("tensor4d() requires shape to have four numbers");let r=(0,u.C)(t,n);if(4!==r.length&&1!==r.length)throw Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,nk.H)(t,e,r,n)}function nB(t,e,n){if((0,f.Cq)(t),null!=e&&5!==e.length)throw Error("tensor5d() requires shape to have five numbers");let r=(0,u.C)(t,n);if(5!==r.length&&1!==r.length)throw Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,nk.H)(t,e,r,n)}function nA(t,e,n){if((0,f.Cq)(t),null!=e&&6!==e.length)throw Error("tensor6d() requires shape to have six numbers");let r=(0,u.C)(t,n);if(6!==r.length&&1!==r.length)throw Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,(0,nk.H)(t,e,r,n)}var n$=n(8604);let nI=(0,s.op)({tensorScatterUpdate_:function(t,e,n){let r=(0,u._1)(t,"tensor","tensorScatterupdate"),i=(0,u._1)(e,"indices","tensorScatterupdate","int32"),s=(0,u._1)(n,"updates","tensorScatterupdate");if(n$.validateInput(s,i,r.shape),r.dtype!==s.dtype)throw Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);return o.BV.runKernel(a.SIB,{tensor:r,indices:i,updates:s},{})}}),nT=(0,s.op)({topk_:function(t,e=1,n=!0){let r=(0,u._1)(t,"x","topk");if(0===r.rank)throw Error("topk() expects the input to be of rank 1 or higher");let i=r.shape[r.shape.length-1];if(e<0)throw Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);let[s,l]=o.BV.runKernel(a.cWu,{x:r},{k:e,sorted:n});return{values:s,indices:l}}}),nN=(0,s.op)({truncatedNormal_:function(t,e=0,n=1,r,i){if((0,f.Mu)(t),null!=r&&"bool"===r)throw Error("Unsupported data type $ { dtype }");let o=new eG(e,n,r,!0,i),a=(0,K.f)(t,r);for(let t=0;t<a.values.length;t++)a.values[t]=o.nextValue();return a.toTensor()}}),nM=(0,s.op)({unique_:function(t,e=0){let n=(0,u._1)(t,"x","unique","string_or_numeric");(0,f.hu)(n.rank>0,()=>"The input tensor must be at least 1D");let[r,i]=o.BV.runKernel(a.kpP,{x:n},{axis:e});return{values:r,indices:i}}}),nR=(0,s.op)({unsortedSegmentSum_:function(t,e,n){let r=(0,u._1)(t,"x","unsortedSegmentSum"),i=(0,u._1)(e,"segmentIds","unsortedSegmentSum","int32");return(0,f.hu)((0,f.GN)(n),()=>"numSegments must be of dtype int"),o.BV.runKernel(a.Qvg,{x:r,segmentIds:i},{numSegments:n})}}),nD=(0,s.op)({unstack_:function(t,e=0){let n=(0,u._1)(t,"x","unstack","string_or_numeric");return f.hu(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`),o.BV.runKernel(a.ToN,{value:n},{axis:e})}});function nO(t,e){return ea(t,e,"right")}function nC(t,e=!0,n,r){return o.BV.makeVariable(t,e,n,r)}var nV=n(9846);let nF=async function(t){let e=(0,u._1)(t,"condition","whereAsync","bool"),n=await e.data(),r=(0,nV.Z)(e.shape,n);return t!==e&&e.dispose(),r},nP=async function(t,e,n){let r=(0,u._1)(t,"tensor","boolMask"),i=(0,u._1)(e,"mask","boolMask","bool"),o=null==n?0:n,a=i.rank,s=r.shape;f.hu(a>0,()=>"mask cannot be scalar"),f.k5(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let t=o;t<o+a;t++)l*=s[t];let c=s.slice(0,o).concat([l],s.slice(o+a)),h=(0,B.X)(r,c),d=(0,B.X)(i,[-1]),p=await nF(d),g=ng(p,[1]),m=tq(h,g,o);return t!==r&&r.dispose(),e!==i&&i.dispose(),g.dispose(),h.dispose(),d.dispose(),p.dispose(),m};var nL=n(5250);let nU=(0,s.op)({movingAverage_:function(t,e,n,r,i=!0){let o=(0,u._1)(t,"v","movingAverage"),a=(0,u._1)(e,"x","movingAverage"),s=(0,u._1)(n,"decay","movingAverage");(0,k.assertTypesMatch)(o,a),f.hu(f.cO(o.shape,a.shape),()=>"Shape mismatch in v and x");let l=(0,tM.i)(1),c=(0,t9.l)(l,s),d=(0,M.d)((0,t9.l)(a,o),c);if(i){f.hu(null!=r,()=>"When using zeroDebias: true, step is required.");let t=(0,u._1)(r,"step","movingAverage");d=(0,ty.h)(d,(0,t9.l)(l,(0,tN.s)(s,t)))}return(0,h.I)(o,d)}}),nG=(0,s.op)({scatterND_:function(t,e,n){(0,f.Mu)(n);let r=(0,u._1)(t,"indices","scatterND","int32"),i=(0,u._1)(e,"updates","scatterND");return n$.validateInput(i,r,n),o.BV.runKernel(a.xQA,{indices:r,updates:i},{shape:n})}}),nz=(0,s.op)({sparseToDense_:function(t,e,n,r=0){(0,f.Mu)(n);let i=(0,u._1)(t,"sparseIndices","sparseToDense","int32"),s=(0,u._1)(e,"sparseValues","sparseToDense","string_or_numeric"),l=(0,u._1)(r,"defaultValue","sparseToDense",s.dtype);return!function(t,e,n,r){if("int32"!==t.dtype)throw Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let i=t.rank>0?t.shape[0]:1,o=t.rank>1?t.shape[1]:1;if(n.length!==o)throw Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${o}.`);let a=e.size;if(!(0===e.rank||1===e.rank&&a===i))throw Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw Error("sparseValues.dtype must match defaultValues.dtype")}(i,s,n,l),o.BV.runKernel(a.D2d,{sparseIndices:i,sparseValues:s,defaultValue:l},{outputShape:n})}}),nW=(0,s.op)({gatherND_:function(t,e){let n=(0,u._1)(e,"indices","gatherND","int32"),r=(0,u._1)(t,"x","gatherND","string_or_numeric");return o.BV.runKernel(a.q1x,{params:r,indices:n})}}),nq=(0,s.op)({dropout_:function(t,e,n,r){let i=(0,u._1)(t,"x","dropout");if(f.hu("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),f.hu(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),0===e)return t instanceof eg.es?i.clone():i;let o=function(t,e){if(null==e)return t.shape.slice();if(f.cO(t.shape,e))return e;if(t.shape.length===e.length){let n=[];for(let r=0;r<t.shape.length;r++)null==e[r]&&null!=t.shape[r]?n.push(t.shape[r]):n.push(e[r]);return n}return e}(i,n),a=1-e,s=(0,ty.h)(tz((0,h.I)(eH(o,0,1,"float32",r),a)),a);return(0,M.d)(i,s)}});function nK(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function nj(t,e,n){let r=1-t%2,i=new Float32Array(t);for(let o=0;o<t;++o){let a=2*Math.PI*o/(t+r-1);i[o]=e-n*Math.cos(a)}return nE(i,"float32")}let nH=async function(t,e,n=1){let r=(0,u._1)(t,"predictions","inTopK"),i=(0,u._1)(e,"targets","inTopK");(0,f.hu)(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),(0,f.hu)(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),(0,f.k5)(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let o=r.shape[r.shape.length-1];(0,f.hu)(n>0&&n<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${n}`);let a=await r.data(),s=await i.data(),[l,c]=[a.length/o,o],h=(0,f.WP)("bool",l);for(let t=0;t<l;t++){let e=t*c,r=a.subarray(e,e+c),i=[];for(let t=0;t<r.length;t++)i.push({value:r[t],index:t});i.sort((t,e)=>e.value-t.value),h[t]=0;for(let e=0;e<n;e++)if(i[e].index===s[t]){h[t]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),(0,nv.X)(h,i.shape,"bool")},nX=(0,s.op)({conv2DBackpropFilter_:function(t,e,n,r,i,u="NHWC",s){let l=t;3===t.rank&&(l=(0,B.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;3===c.rank&&(c=(0,B.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]])),f.hu(4===l.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${l.shape}.`),f.hu(4===c.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`),f.hu(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let h="NHWC"===u?l.shape[3]:l.shape[1],d="NHWC"===u?c.shape[3]:c.shape[1];f.hu(h===n[2],()=>`Error in conv2dDerFilter: depth of input ${h}) must match input depth in filter (${n[2]}.`),f.hu(d===n[3],()=>`Error in conv2dDerFilter: depth of dy (${d}) must match output depth for filter (${n[3]}).`),S.m("conv2dDerFilter",i,s);let p={x:l,dy:c};return o.BV.runKernel(a.wUP,p,{strides:r,pad:i,dataFormat:u,dimRoundingMode:s,filterShape:n})}});var nZ=n(1575);let nJ=(0,s.op)({fusedConv2d_:function({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:l,bias:c,activation:d="linear",preluActivationWeights:p,leakyreluAlpha:g}){let m,y;if(d=d||"linear",!1===(0,nZ.uy)(o.BV.state.gradientDepth,d)){f.hu("NHWC"===i,()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let o=te(t,e,n,r,i,s,l);return null!=c&&(o=(0,h.I)(o,c)),(0,nZ.QH)(o,d,p,g)}let b=(0,u._1)(t,"x","conv2d","float32"),w=(0,u._1)(e,"filter","conv2d","float32"),v=b,E=!1;3===b.rank&&(E=!0,v=(0,B.X)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),f.hu(4===v.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${v.rank}.`),f.hu(4===w.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${w.rank}.`),S.m("fused conv2d",r,l);let x="NHWC"===i?v.shape[3]:v.shape[1];f.hu(w.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${w.shape[2]}.`),f.hu(S.jT(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let _=S.Ix(v.shape,w.shape,n,s,r,l);if(null!=c&&(m=(0,u._1)(c,"bias","fused conv2d"),[m]=(0,k.makeTypesMatch)(m,b),"NHWC"===i?tb.assertAndGetBroadcastShape(_.outShape,m.shape):(f.hu(m.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${m.shape.length}.`),f.hu(0===m.shape.length||m.shape[0]===_.outChannels||1===m.shape[0],()=>`Error in fused conv2d: bias shape (${m.shape}) is not compatible with the number of output channels (${_.outChannels})`))),null!=p){let t=p.shape;if(f.hu(t.length<=1||3===t.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${t.length}.`),1===t.length)f.hu(1===t[0]||t[0]===_.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${t}) is not compatible with the number of output channels (${_.outChannels}).`);else if(3===t.length)try{tb.assertAndGetBroadcastShape(t,_.outShape)}catch(e){throw Error(`Error in fused conv2d: PReLU activation weights (${t}) is not compatible with the output shape of the conv2d (${_.outShape}).`)}y=(0,u._1)(p,"prelu weights","fused conv2d")}let A=(t,e)=>{f.hu("NHWC"===i,()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[o,a,u,l]=e,c=(0,nZ.Fr)(t,u,d);f.hu(S.I0(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let h=[tr(a.shape,c,o,n,r),nX(a,c,o.shape,n,r)];if(null!=l){let t=(0,nZ.pf)(l,c);h.push(t)}return h},$={x:v,filter:w,bias:m,preluActivationWeights:y},I={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:l,activation:d,leakyreluAlpha:g};return null==c?(0,t6.cb)((t,e,n)=>{let r=o.BV.runKernel(a._V0,$,I);return n([e,t,r]),E&&(r=(0,B.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:A}})(v,w):(0,t6.cb)((t,e,n,r)=>{let i=o.BV.runKernel(a._V0,$,I);return r([e,t,i,n]),E&&(i=(0,B.X)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:A}})(v,w,m)}}),nY=(0,s.op)({depthwiseConv2dNativeBackpropFilter_:function(t,e,n,r,i,u=[1,1],s){let l=t;3===t.rank&&(l=(0,B.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;3===c.rank&&(c=(0,B.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let h={x:l,dy:c};return o.BV.runKernel(a.sL$,h,{strides:r,pad:i,dimRoundingMode:s,dilations:u,filterShape:n})}}),nQ=(0,s.op)({depthwiseConv2dNativeBackpropInput_:function(t,e,n,r,i,u=[1,1],s){let l=e,c=!1;3===e.rank&&(c=!0,l=(0,B.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let h={dy:l,filter:n},f=o.BV.runKernel(a.y7R,h,{strides:r,pad:i,dimRoundingMode:s,dilations:u,inputShape:t});return c?(0,B.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),n0=(0,s.op)({fusedDepthwiseConv2d_:function({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:l,bias:c,activation:d="linear",preluActivationWeights:p,leakyreluAlpha:g}){let m,y;if(!1===(0,nZ.uy)(o.BV.state.gradientDepth,d)){let o=tp(t,e,n,r,i,s,l);return null!=c&&(o=(0,h.I)(o,c)),(0,nZ.QH)(o,d,p,g)}let b=(0,u._1)(t,"x","depthwiseConv2d","float32"),w=(0,u._1)(e,"filter","depthwiseConv2d","float32"),v=b,E=!1;3===b.rank&&(E=!0,v=(0,B.X)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),f.hu(4===v.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${v.rank}.`),f.hu(4===w.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${w.rank}.`),f.hu(v.shape[3]===w.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${v.shape[3]}) must match the inChannels dimension in filter ${w.shape[2]}.`),null==s&&(s=[1,1]),f.hu(S.jT(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),S.m("fused depthwiseConv2d",r,l);let x=S.Ix(v.shape,w.shape,n,s,r,l,!0);null!=c&&(m=(0,u._1)(c,"bias","fused conv2d"),[m]=(0,k.makeTypesMatch)(m,b),tb.assertAndGetBroadcastShape(x.outShape,m.shape)),null!=p&&(y=(0,u._1)(p,"prelu weights","fused depthwiseConv2d"));let _=(t,e)=>{f.hu(S.I0(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[i,o,a,u]=e,c=(0,nZ.Fr)(t,a,d),h=nQ(o.shape,c,i,n,r,s,l),p=nY(o,c,i.shape,n,r,s,l);return null!=u?[h,p,(0,nZ.pf)(m,c)]:[h,p]},A={x:v,filter:w,bias:m,preluActivationWeights:y},$={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:l,activation:d,leakyreluAlpha:g};return null==c?(0,t6.cb)((t,e,n)=>{let r=o.BV.runKernel(a.luS,A,$);return n([e,t,r]),E&&(r=(0,B.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:_}})(v,w):(0,t6.cb)((t,e,n,r)=>{let i=o.BV.runKernel(a.luS,A,$);return r([e,t,i,n]),E&&(i=(0,B.X)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:_}})(v,w,m)}}),n1=(0,s.op)({fusedMatMul_:function({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:l,leakyreluAlpha:c=.2}){let d,p;if(!1===(0,nZ.uy)(o.BV.state.gradientDepth,s)){let o=(0,N.O)(t,e,n,r);return null!=i&&(o=(0,h.I)(o,i)),(0,nZ.QH)(o,s,l,c)}let g=(0,u._1)(t,"a","fused matMul"),m=(0,u._1)(e,"b","fused matMul");[g,m]=(0,k.makeTypesMatch)(g,m);let y=n?g.shape[g.rank-2]:g.shape[g.rank-1],b=r?m.shape[m.rank-1]:m.shape[m.rank-2],w=n?g.shape[g.rank-1]:g.shape[g.rank-2],v=r?m.shape[m.rank-2]:m.shape[m.rank-1],E=g.shape.slice(0,-2),x=m.shape.slice(0,-2),_=f.NA(E),S=f.NA(x);f.hu(y===b,()=>`Error in fused matMul: inner shapes (${y}) and (${b}) of Tensors with shapes ${g.shape} and ${m.shape} and transposeA=${n} and transposeB=${r} must match.`);let A=tb.assertAndGetBroadcastShape(g.shape.slice(0,-2),m.shape.slice(0,-2)).concat([w,v]),$=n?(0,B.X)(g,[_,y,w]):(0,B.X)(g,[_,w,y]),I=r?(0,B.X)(m,[S,v,b]):(0,B.X)(m,[S,b,v]);null!=i&&(d=(0,u._1)(i,"bias","fused matMul"),[d]=(0,k.makeTypesMatch)(d,g),tb.assertAndGetBroadcastShape(A,d.shape)),null!=l&&(p=(0,u._1)(l,"prelu weights","fused matMul"));let T=(t,e)=>{let o,a;let[u,l,c,h]=e,f=(0,nZ.Fr)((0,B.X)(t,c.shape),c,s);return(n||r?!n&&r?(o=(0,N.O)(f,l,!1,!1),a=(0,N.O)(f,u,!0,!1)):n&&!r?(o=(0,N.O)(l,f,!1,!0),a=(0,N.O)(u,f,!1,!1)):(o=(0,N.O)(l,f,!0,!0),a=(0,N.O)(f,u,!0,!0)):(o=(0,N.O)(f,l,!1,!0),a=(0,N.O)(u,f,!0,!1)),null!=i)?[o,a,(0,nZ.pf)(h,f)]:[o,a]},M={a:$,b:I,bias:d,preluActivationWeights:p},R={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:c};return null==i?(0,t6.cb)((t,e,n)=>{let r=o.BV.runKernel(a.usg,M,R);return n([t,e,r]),{value:(0,B.X)(r,A),gradFunc:T}})($,I):(0,t6.cb)((t,e,n,r)=>{let i=o.BV.runKernel(a.usg,M,R);return r([t,e,i,n]),{value:(0,B.X)(i,A),gradFunc:T}})($,I,d)}}),n2=(0,s.op)({hammingWindow_:function(t){return nj(t,.54,.46)}}),n3=(0,s.op)({hannWindow_:function(t){return nj(t,.5,.5)}}),n4=(0,s.op)({frame_:function(t,e,n,r=!1,i=0){let o=0,a=[];for(;o+e<=t.size;)a.push(D(t,o,e)),o+=n;if(r)for(;o<t.size;){let r=o+e-t.size,u=T([D(t,o,e-r),(0,H.h)([r],i)]);a.push(u),o+=n}return 0===a.length?nx([],[0,e]):(0,B.X)(T(a),[a.length,e])}}),n6=(0,s.op)({stft_:function(t,e,n,r,i=n3){null==r&&(r=nK(e));let o=n4(t,e,n);return nd((0,M.d)(o,i(e)),r)}}),n5=(0,s.op)({cropAndResize_:function(t,e,n,r,i="bilinear",s=0){let l=(0,u._1)(t,"image","cropAndResize"),c=(0,u._1)(e,"boxes","cropAndResize","float32"),h=(0,u._1)(n,"boxInd","cropAndResize","int32"),d=c.shape[0];return f.hu(4===l.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${l.rank}.`),f.hu(2===c.rank&&4===c.shape[1],()=>`Error in cropAndResize: boxes must be have size [${d},4] but had shape ${c.shape}.`),f.hu(1===h.rank&&h.shape[0]===d,()=>`Error in cropAndResize: boxInd must be have size [${d}] but had shape ${c.shape}.`),f.hu(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),f.hu(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),f.hu("bilinear"===i||"nearest"===i,()=>`method must be bilinear or nearest, but was ${i}`),o.BV.runKernel(a.VcC,{image:l,boxes:c,boxInd:h},{method:i,extrapolationValue:s,cropSize:r})}}),n8=(0,s.op)({flipLeftRight_:function(t){let e=(0,u._1)(t,"image","flipLeftRight","float32");return f.hu(4===e.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`),o.BV.runKernel(a.Uyb,{image:e},{})}}),n7=(0,s.op)({grayscaleToRGB_:function(t){let e=(0,u._1)(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];f.hu(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),f.hu(1===r,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let i=Array(e.rank);return i.fill(1,0,n),i[n]=3,tU(e,i)}}),n9=(0,s.op)({rgbToGrayscale_:function(t){let e;let n=(0,u._1)(t,"image","RGBToGrayscale"),r=n.rank-1,i=n.shape[r];f.hu(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),f.hu(3===i,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);let o=n.dtype,a=(0,_.p)(n,"float32"),s=nE([.2989,.587,.114]);switch(n.rank){case 2:e=t_("ij,j->i",a,s);break;case 3:e=t_("ijk,k->ij",a,s);break;case 4:e=t_("ijkl,l->ijk",a,s);break;case 5:e=t_("ijklm,m->ijkl",a,s);break;case 6:e=t_("ijklmn,n->ijklm",a,s);break;default:throw Error("Not a valid tensor rank.")}return e=tP(e,-1),(0,_.p)(e,o)}}),rt=(0,s.op)({rotateWithOffset_:function(t,e,n=0,r=.5){let i=(0,u._1)(t,"image","rotateWithOffset","float32");return f.hu(4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`),o.BV.runKernel(a.b9H,{image:i},{radians:e,fillValue:n,center:r})}});function re(t,e,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);let a=t.shape[0];return n=Math.min(n,a),f.hu(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),f.hu(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),f.hu(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),f.hu(1===e.rank,()=>"scores must be a 1D tensor"),f.hu(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),f.hu(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}let rn=(0,s.op)({nonMaxSuppression_:function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){let s=(0,u._1)(t,"boxes","nonMaxSuppression","float32"),l=(0,u._1)(e,"scores","nonMaxSuppression","float32"),c=re(s,l,n,r,i),h={maxOutputSize:n=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:i=c.scoreThreshold};return o.BV.runKernel(a.uv1,{boxes:s,scores:l},h)}});var rr=n(3021);async function ri(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){let o=(0,u._1)(t,"boxes","nonMaxSuppressionAsync"),a=(0,u._1)(e,"scores","nonMaxSuppressionAsync"),s=re(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;let l=await Promise.all([o.data(),a.data()]),c=l[0],h=l[1],{selectedIndices:f}=(0,rr.GP)(c,h,n,r,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),nE(f,"int32")}let ro=(0,s.op)({nonMaxSuppressionWithScore_:function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){let l=(0,u._1)(t,"boxes","nonMaxSuppression"),c=(0,u._1)(e,"scores","nonMaxSuppression"),h=re(l,c,n,r,i,s);n=h.maxOutputSize,r=h.iouThreshold;let f={maxOutputSize:n,iouThreshold:r,scoreThreshold:i=h.scoreThreshold,softNmsSigma:s=h.softNmsSigma},d=o.BV.runKernel(a.W0H,{boxes:l,scores:c},f);return{selectedIndices:d[0],selectedScores:d[1]}}});async function ra(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){let a=(0,u._1)(t,"boxes","nonMaxSuppressionAsync"),s=(0,u._1)(e,"scores","nonMaxSuppressionAsync"),l=re(a,s,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;let c=await Promise.all([a.data(),s.data()]),h=c[0],f=c[1],{selectedIndices:d,selectedScores:p}=(0,rr.pA)(h,f,n,r,i,o);return a!==t&&a.dispose(),s!==e&&s.dispose(),{selectedIndices:nE(d,"int32"),selectedScores:nE(p)}}let ru=(0,s.op)({nonMaxSuppressionPadded_:function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){let l=(0,u._1)(t,"boxes","nonMaxSuppression"),c=(0,u._1)(e,"scores","nonMaxSuppression"),h=re(l,c,n,r,i,null),f=h.maxOutputSize,d=h.iouThreshold,p=h.scoreThreshold,g=o.BV.runKernel(a.cye,{boxes:l,scores:c},{maxOutputSize:f,iouThreshold:d,scoreThreshold:p,padToMaxOutputSize:s});return{selectedIndices:g[0],validOutputs:g[1]}}});async function rs(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){let a=(0,u._1)(t,"boxes","nonMaxSuppressionAsync"),s=(0,u._1)(e,"scores","nonMaxSuppressionAsync"),l=re(a,s,n,r,i,null),c=l.maxOutputSize,h=l.iouThreshold,f=l.scoreThreshold,[d,p]=await Promise.all([a.data(),s.data()]),{selectedIndices:g,validOutputs:m}=(0,rr.qP)(d,p,c,h,f,o);return a!==t&&a.dispose(),s!==e&&s.dispose(),{selectedIndices:nE(g,"int32"),validOutputs:(0,tM.i)(m,"int32")}}let rl=(0,s.op)({resizeBilinear_:function(t,e,n=!1,r=!1){let i=(0,u._1)(t,"images","resizeBilinear");f.hu(3===i.rank||4===i.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),f.hu(2===e.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),f.hu(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,l=!1;3===i.rank&&(l=!0,s=(0,B.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=e,c={images:s},h=o.BV.runKernel(a._Yw,c,{alignCorners:n,halfPixelCenters:r,size:e});return l?(0,B.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),rc=(0,s.op)({resizeNearestNeighbor_:function(t,e,n=!1,r=!1){let i=(0,u._1)(t,"images","resizeNearestNeighbor");f.hu(3===i.rank||4===i.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),f.hu(2===e.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),f.hu("float32"===i.dtype||"int32"===i.dtype,()=>"`images` must have `int32` or `float32` as dtype"),f.hu(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,l=!1;3===i.rank&&(l=!0,s=(0,B.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=e,c={images:s},h=o.BV.runKernel(a.dpD,c,{alignCorners:n,halfPixelCenters:r,size:e});return l?(0,B.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),rh=(0,s.op)({threshold_:function(t,e="binary",n=!1,r=.5){let i,o,a,s;let l=(0,u._1)(t,"image","threshold"),c=l.shape[0]*l.shape[1],d=(0,M.d)(nE([r]),255);if(f.hu(3===l.rank,()=>`Error in threshold: image must be rank 3,but got rank ${l.rank}.`),f.hu(3===l.shape[2]||1===l.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${l.shape[2]}.`),f.hu("int32"===l.dtype||"float32"===l.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${l.dtype}.`),f.hu("otsu"===e||"binary"===e,()=>`Method must be binary or otsu, but was ${e}`),3===l.shape[2]){[i,o,a]=nf(l,[1,1,1],-1);let t=(0,M.d)(i,.2989),e=(0,M.d)(o,.587),n=(0,M.d)(a,.114);s=(0,h.I)((0,h.I)(t,e),n)}else s=t;"otsu"===e&&(d=function(t,e){let n,r,i,o,a,u,s=nE([-1]),l=nE([0]),c=nE([0]);for(let f=0;f<t.size-1;f++){n=D(t,0,f+1),r=D(t,f+1),a=(0,ty.h)((0,tO.S)(n),e),u=(0,ty.h)((0,tO.S)(r),e);let d=(0,tO.S)((0,M.d)(n,eZ(0,n.size)));i=(0,ty.h)(d,(0,tO.S)(n));let p=(0,H.h)(r.shape,n.size),g=(0,h.I)(eZ(0,r.size),p),m=(0,M.d)(r,g);o=(0,ty.h)((0,tO.S)(m),(0,tO.S)(r));let y=(0,t9.l)(i,o),b=(0,t9.l)(i,o),w=(0,M.d)(a,u),v=tK(c=(0,M.d)((0,M.d)(w,y),b),l);l=tv(v,c,l),s=tv(v,nE([f]),s)}return s}(G((0,_.p)(e5(s),"int32"),(0,nv.X)([]),256),c));let p=n?t0(s,d):tK(s,d);return(0,_.p)((0,M.d)(p,255),"int32")}}),rf=(0,s.op)({transform_:function(t,e,n="nearest",r="constant",i=0,s){let l=(0,u._1)(t,"image","transform","float32"),c=(0,u._1)(e,"transforms","transform","float32");return f.hu(4===l.rank,()=>`Error in transform: image must be rank 4,but got rank ${l.rank}.`),f.hu(2===c.rank&&(c.shape[0]===l.shape[0]||1===c.shape[0])&&8===c.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),f.hu(null==s||2===s.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`),o.BV.runKernel(a.wx7,{image:l,transforms:c},{interpolation:n,fillMode:r,fillValue:i,outputShape:s})}}),rd=(0,s.op)({bandPart_:function(t,e,n){let r,i;let o=(0,u._1)(t,"a","bandPart");(0,f.hu)(o.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${o.rank}.`);let a=o.shape,[s,l]=o.shape.slice(-2);"number"==typeof e?((0,f.hu)(e%1==0,()=>`bandPart(): numLower must be an integer, got ${e}.`),(0,f.hu)(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),r=(0,u._1)(e<0?s:e,"numLower","bandPart")):((0,f.hu)("int32"===e.dtype,()=>"bandPart(): numLower's dtype must be an int32."),r=tv(tQ(e,0),s,ey(e,s))),"number"==typeof n?((0,f.hu)(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),(0,f.hu)(n<=l,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${l}).`),i=(0,u._1)(n<0?l:n,"numUpper","bandPart")):((0,f.hu)("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),i=tv(tQ(n,0),l,ey(n,l)));let c=(0,B.X)(eZ(0,s,1,"int32"),[-1,1]),h=eZ(0,l,1,"int32"),d=(0,t9.l)(c,h),p=en(t0(d,r),tj(d,(0,t5.W)(i))),g=ed([s,l],o.dtype);return(0,B.X)(nm(nD((0,B.X)(o,[-1,s,l])).map(t=>tv(p,t,g))),a)}}),rp=(0,s.op)({gramSchmidt_:function(t){let e;if(Array.isArray(t)){e=!1,(0,f.hu)(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let n=t[0].shape[0];for(let e=1;e<t.length;++e)(0,f.hu)(t[e].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[e].shape[0]} vs. ${n})`)}else e=!0,t=nf(t,t.shape[0],0).map(t=>ng(t,[0]));(0,f.hu)(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],r=t;for(let e=0;e<t.length;++e)n.push(o.BV.tidy(()=>{let t=r[e];if(e>0)for(let r=0;r<e;++r){let e=(0,M.d)((0,tO.S)((0,M.d)(n[r],t)),n[r]);t=(0,t9.l)(t,e)}return(0,ty.h)(t,tC(t,"euclidean"))}));return e?nm(n,0):n}});var rg=n(5823);function rm(t,e=!1){return o.BV.tidy(()=>{(0,f.hu)(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],r=t.shape[1],i=tG(n),a=(0,I.d)(t),u=nx([[1]],[1,1]),s=(0,I.d)(u),l=n>=r?r:n;for(let t=0;t<l;++t){let e=a,l=s,c=i;[s,a,i]=o.BV.tidy(()=>{let e=D(a,[t,t],[n-t,1]),o=tC(e),l=D(a,[t,t],[1,1]),c=tv(tK(l,0),nx([[-1]]),nx([[1]])),h=(0,t9.l)(l,(0,M.d)(c,o)),f=(0,ty.h)(e,h);s=1===f.shape[0]?(0,I.d)(u):T([u,D(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);let d=(0,t5.W)((0,ty.h)((0,N.O)(c,h),o)),p=D(a,[t,0],[n-t,r]),g=(0,M.d)(d,s),m=(0,nL.p)(s);if(0===t)a=(0,t9.l)(p,(0,N.O)(g,(0,N.O)(m,p)));else{let e=(0,t9.l)(p,(0,N.O)(g,(0,N.O)(m,p)));a=T([D(a,[0,0],[t,r]),e],0)}let y=(0,nL.p)(g),b=D(i,[0,t],[n,i.shape[1]-t]);if(0===t)i=(0,t9.l)(b,(0,N.O)((0,N.O)(b,s),y));else{let e=(0,t9.l)(b,(0,N.O)((0,N.O)(b,s),y));i=T([D(i,[0,0],[n,t]),e],1)}return[s,a,i]}),(0,rg.B9)([e,l,c])}return!e&&n>r&&(i=D(i,[0,0],[n,r]),a=D(a,[0,0],[r,r])),[i,a]})}let ry=(0,s.op)({qr_:function(t,e=!1){if((0,f.hu)(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),2===t.rank)return rm(t,e);{let n=t.shape.slice(0,t.shape.length-2).reduce((t,e)=>t*e),r=nD((0,B.X)(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(t=>{let[n,r]=rm(t,e);i.push(n),o.push(r)}),[(0,B.X)(nm(i,0),t.shape),(0,B.X)(nm(o,0),t.shape)]}}});var rb=n(6405);let rw=(0,s.op)({computeWeightedLoss_:function(t,e,n=rb.I.SUM_BY_NONZERO_WEIGHTS){let r=(0,u._1)(t,"losses","computeWeightedLoss"),i=null;null!=e&&(i=(0,u._1)(e,"weights","computeWeightedLoss"));let o=null==i?r:(0,M.d)(r,i);if(n===rb.I.NONE)return o;if(n===rb.I.SUM)return(0,tO.S)(o);if(n===rb.I.MEAN){if(null==i)return ef(o);{let t=r.size/i.size,e=(0,ty.h)((0,tO.S)(o),(0,tO.S)(i));return t>1?(0,ty.h)(e,(0,tM.i)(t)):e}}if(n===rb.I.SUM_BY_NONZERO_WEIGHTS){if(null==i)return(0,ty.h)((0,tO.S)(o),(0,tM.i)(r.size));{let t=(0,M.d)(i,ep(r.shape)),e=(0,_.p)((0,tO.S)(ex(t,(0,tM.i)(0))),"float32");return(0,ty.h)((0,tO.S)(o),e)}}throw Error(`Unknown reduction: ${n}`)}}),rv=(0,s.op)({absoluteDifference_:function(t,e,n,r=rb.I.SUM_BY_NONZERO_WEIGHTS){let o=(0,u._1)(t,"labels","absoluteDifference"),a=(0,u._1)(e,"predictions","absoluteDifference"),s=null;return null!=n&&(s=(0,u._1)(n,"weights","absoluteDifference")),(0,f.k5)(o.shape,a.shape,"Error in absoluteDifference: "),rw((0,i.W)((0,t9.l)(o,a)),s,r)}}),rk=(0,s.op)({cosineDistance_:function(t,e,n,r,i=rb.I.SUM_BY_NONZERO_WEIGHTS){let o=(0,u._1)(t,"labels","cosineDistance"),a=(0,u._1)(e,"predictions","cosineDistance"),s=null;null!=r&&(s=(0,u._1)(r,"weights","cosineDistance")),(0,f.k5)(o.shape,a.shape,"Error in cosineDistance: ");let l=(0,tM.i)(1);return rw((0,t9.l)(l,(0,tO.S)((0,M.d)(o,a),n,!0)),s,i)}}),rE=(0,s.op)({hingeLoss_:function(t,e,n,r=rb.I.SUM_BY_NONZERO_WEIGHTS){let i=(0,u._1)(t,"labels","hingeLoss"),o=(0,u._1)(e,"predictions","hingeLoss"),a=null;null!=n&&(a=(0,u._1)(n,"weights","hingeLoss")),(0,f.k5)(i.shape,o.shape,"Error in hingeLoss: ");let s=(0,tM.i)(1);return i=(0,t9.l)((0,M.d)((0,tM.i)(2),i),s),rw((0,eQ.U)((0,t9.l)(s,(0,M.d)(i,o))),a,r)}}),rx=(0,s.op)({huberLoss_:function(t,e,n,r=1,o=rb.I.SUM_BY_NONZERO_WEIGHTS){let a=(0,u._1)(t,"labels","huberLoss"),s=(0,u._1)(e,"predictions","huberLoss"),l=null;null!=n&&(l=(0,u._1)(n,"weights","huberLoss")),(0,f.k5)(a.shape,s.shape,"Error in huberLoss: ");let c=(0,tM.i)(r),d=(0,i.W)((0,t9.l)(s,a)),p=ey(d,c),g=(0,t9.l)(d,p);return rw((0,h.I)((0,M.d)((0,tM.i)(.5),(0,tD.h)(p)),(0,M.d)(c,g)),l,o)}}),r_=(0,s.op)({logLoss_:function(t,e,n,r=1e-7,i=rb.I.SUM_BY_NONZERO_WEIGHTS){let o=(0,u._1)(t,"labels","logLoss"),a=(0,u._1)(e,"predictions","logLoss"),s=null;null!=n&&(s=(0,u._1)(n,"weights","logLoss")),(0,f.k5)(o.shape,a.shape,"Error in logLoss: ");let l=(0,tM.i)(1),c=(0,tM.i)(r),d=(0,t5.W)((0,M.d)(o,t3((0,h.I)(a,c)))),p=(0,M.d)((0,t9.l)(l,o),t3((0,h.I)((0,t9.l)(l,a),c)));return rw((0,t9.l)(d,p),s,i)}}),rS=(0,s.op)({meanSquaredError_:function(t,e,n,r=rb.I.SUM_BY_NONZERO_WEIGHTS){let i=(0,u._1)(t,"labels","meanSquaredError"),o=(0,u._1)(e,"predictions","meanSquaredError"),a=null;return null!=n&&(a=(0,u._1)(n,"weights","meanSquaredError")),(0,f.k5)(i.shape,o.shape,"Error in meanSquaredError: "),rw(np(i,o),a,r)}}),rB=(0,s.op)({sigmoidCrossEntropy_:function(t,e,n,r=0,o=rb.I.SUM_BY_NONZERO_WEIGHTS){let a=(0,u._1)(t,"multiClassLabels","sigmoidCrossEntropy"),s=(0,u._1)(e,"logits","sigmoidCrossEntropy"),l=null;if(null!=n&&(l=(0,u._1)(n,"weights","sigmoidCrossEntropy")),(0,f.k5)(a.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let t=(0,tM.i)(r),e=(0,tM.i)(1),n=(0,tM.i)(.5);a=(0,h.I)((0,M.d)(a,(0,t9.l)(e,t)),(0,M.d)(n,t))}return rw(function(t,e){let n=(0,u._1)(t,"labels","sigmoidCrossEntropyWithLogits"),r=(0,u._1)(e,"logits","sigmoidCrossEntropyWithLogits");(0,f.k5)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=(0,eQ.U)(r),a=(0,M.d)(r,n),s=t4(tF((0,t5.W)((0,i.W)(r))));return(0,h.I)((0,t9.l)(o,a),s)}(a,s),l,o)}}),rA=(0,s.op)({softmaxCrossEntropy_:function(t,e,n,r=0,i=rb.I.SUM_BY_NONZERO_WEIGHTS){let o=(0,u._1)(t,"onehotLabels","softmaxCrossEntropy"),a=(0,u._1)(e,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=(0,u._1)(n,"weights","softmaxCrossEntropy")),(0,f.k5)(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){let t=(0,tM.i)(r),e=(0,tM.i)(1),n=(0,tM.i)(o.shape[1]);o=(0,h.I)((0,M.d)(o,(0,t9.l)(e,t)),(0,ty.h)(t,n))}return rw(function(t,e,n=-1){if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return(0,t6.cb)((t,e,r)=>{let i=ee(e,[n],!0),o=(0,t9.l)((0,_.p)(e,"float32"),i);r([t,o]);let a=(0,t5.W)((0,M.d)(o,t));return{value:(0,tO.S)(a,[n]),gradFunc:(t,e)=>{let[r,i]=e,o=(0,t$.rv)(t.shape,[n]);return[(0,M.d)((0,B.X)(t,o),(0,t9.l)((0,_.p)(r,"float32"),tF(i))),(0,M.d)((0,B.X)(t,o),(0,t9.l)(tF(i),(0,_.p)(r,"float32")))]}}})(t,e)}(o,a),s,i)}}),r$=(0,s.op)({sparseFillEmptyRows_:function(t,e,n,r){let i=(0,u._1)(t,"indices","sparseFillEmptyRows","int32"),s=(0,u._1)(e,"values","sparseFillEmptyRows"),l=(0,u._1)(n,"denseShape","sparseFillEmptyRows","int32"),c=(0,u._1)(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(2!==i.rank)throw Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(1!==s.rank)throw Error(`Values should be Tensor1D but received shape ${s.shape}`);if(1!==l.rank)throw Error(`Dense shape should be Tensor1D but received shape ${l.shape}`);if(0!==c.rank)throw Error(`Default value should be a scalar but received shape ${c.shape}`);let h=o.BV.runKernel(a.O3z,{indices:i,values:s,denseShape:l,defaultValue:c});return{outputIndices:h[0],outputValues:h[1],emptyRowIndicator:h[2],reverseIndexMap:h[3]}}}),rI=(0,s.op)({sparseReshape_:function(t,e,n){let r=(0,u._1)(t,"inputIndices","sparseReshape","int32"),i=(0,u._1)(e,"inputShape","sparseReshape","int32"),s=(0,u._1)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(1!==i.rank)throw Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(1!==s.rank)throw Error(`New shape should be Tensor1D but received shape ${s.shape}`);let l=o.BV.runKernel(a.nhH,{inputIndices:r,inputShape:i,newShape:s});return{outputIndices:l[0],outputShape:l[1]}}}),rT=(0,s.op)({sparseSegmentMean_:function(t,e,n){let r=(0,u._1)(t,"data","sparseSegmentMean"),i=(0,u._1)(e,"indices","sparseSegmentMean","int32"),s=(0,u._1)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(1!==s.rank)throw Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);return o.BV.runKernel(a.w3H,{data:r,indices:i,segmentIds:s})}}),rN=(0,s.op)({sparseSegmentSum_:function(t,e,n){let r=(0,u._1)(t,"data","sparseSegmentSum"),i=(0,u._1)(e,"indices","sparseSegmentSum","int32"),s=(0,u._1)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(1!==s.rank)throw Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);return o.BV.runKernel(a.ZjV,{data:r,indices:i,segmentIds:s})}}),rM=(0,s.op)({stringNGrams_:function(t,e,n,r,i,s,l,c){let h=(0,u._1)(t,"data","stringNGrams","string");if("string"!==h.dtype)throw Error("Data must be of datatype string");if(1!==h.shape.length)throw Error(`Data must be a vector, saw: ${h.shape}`);let f=(0,u._1)(e,"dataSplits","stringNGrams");if("int32"!==f.dtype)throw Error("Data splits must be of datatype int32");let d=o.BV.runKernel(a._JP,{data:h,dataSplits:f},{separator:n,nGramWidths:r,leftPad:i,rightPad:s,padWidth:l,preserveShortSequences:c});return{nGrams:d[0],nGramsSplits:d[1]}}}),rR=(0,s.op)({stringSplit_:function(t,e,n=!0){let r=(0,u._1)(t,"input","stringSplit","string"),i=(0,u._1)(e,"delimiter","stringSplit","string");if(1!==r.rank)throw Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==i.rank)throw Error(`Delimiter should be a scalar but received shape ${i.shape}`);let s=o.BV.runKernel(a.s1s,{input:r,delimiter:i},{skipEmpty:n});return{indices:s[0],values:s[1],shape:s[2]}}}),rD=(0,s.op)({stringToHashBucketFast_:function(t,e){let n=(0,u._1)(t,"input","stringToHashBucketFast","string");if(e<=0)throw Error("Number of buckets must be at least 1");return o.BV.runKernel(a.XkS,{input:n},{numBuckets:e})}}),rO=(0,s.op)({staticRegexReplace_:function(t,e,n,r=!0){let i=(0,u._1)(t,"input","staticRegexReplace","string");return o.BV.runKernel(a.e0R,{x:i},{pattern:e,rewrite:n,replaceGlobal:r})}}),rC={fft:nl,ifft:nc,rfft:nd,irfft:nh},rV={hammingWindow:n2,hannWindow:n3,frame:n4,stft:n6},rF={flipLeftRight:n8,grayscaleToRGB:n7,resizeNearestNeighbor:rc,resizeBilinear:rl,rgbToGrayscale:n9,rotateWithOffset:rt,cropAndResize:n5,nonMaxSuppression:rn,nonMaxSuppressionAsync:ri,nonMaxSuppressionWithScore:ro,nonMaxSuppressionWithScoreAsync:ra,nonMaxSuppressionPadded:ru,nonMaxSuppressionPaddedAsync:rs,threshold:rh,transform:rf},rP={bandPart:rd,gramSchmidt:rp,qr:ry},rL={absoluteDifference:rv,computeWeightedLoss:rw,cosineDistance:rk,hingeLoss:rE,huberLoss:rx,logLoss:r_,meanSquaredError:rS,sigmoidCrossEntropy:rB,softmaxCrossEntropy:rA},rU={sparseFillEmptyRows:r$,sparseReshape:rI,sparseSegmentMean:rT,sparseSegmentSum:rN},rG={stringNGrams:rM,stringSplit:rR,stringToHashBucketFast:rD,staticRegexReplace:rO}},2611:function(t,e,n){"use strict";n.d(e,{s:function(){return u}});var r=n(9681),i=n(5047),o=n(5420),a=n(971);let u=(0,n(2888).op)({pow_:function(t,e){let n=(0,a._1)(t,"base","pow"),u=(0,a._1)(e,"exp","pow");[n,u]=(0,o.makeTypesMatch)(n,u);let s={a:n,b:u};return r.BV.runKernel(i.pe_,s)}})},9427:function(t,e,n){"use strict";n.d(e,{A:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({prelu_:function(t,e){let n=(0,o._1)(t,"x","prelu"),a=(0,o._1)(e,"alpha","prelu");return r.BV.runKernel(i.o0g,{x:n,alpha:a})}})},7290:function(t,e,n){"use strict";function r(t,e=!1){console.log(t.toString(e))}n.d(e,{S:function(){return r}})},1773:function(t,e,n){"use strict";n.d(e,{k:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({real_:function(t){let e=(0,o._1)(t,"input","real");return r.BV.runKernel(i.xJR,{input:e})}})},114:function(t,e,n){"use strict";n.d(e,{U:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({relu_:function(t){let e=(0,o._1)(t,"x","relu");return r.BV.runKernel(i.qkr,{x:e})}})},6762:function(t,e,n){"use strict";n.d(e,{b:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({relu6_:function(t){let e=(0,o._1)(t,"x","relu6");return r.BV.runKernel(i.SbG,{x:e})}})},6439:function(t,e,n){"use strict";n.d(e,{X:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({reshape_:function(t,e){let n=(0,o._1)(t,"x","reshape","string_or_numeric");return r.BV.runKernel(i.HZH,{x:n},{shape:e})}})},6070:function(t,e,n){"use strict";n.d(e,{i:function(){return o}});var r=n(2904),i=n(1185);function o(t,e){if(((0,r.isTypedArray)(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&(0,r.isTypedArray)(t)&&!(t instanceof Uint8Array))throw Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,i.H)(t,[],[],e)}},8604:function(t,e,n){"use strict";n.r(e),n.d(e,{calculateShapes:function(){return a},validateInput:function(){return o},validateUpdateShape:function(){return i}});var r=n(2771);function i(t,e,n){let r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw Error(o+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw Error(o+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw Error(o+` update.rank != ${i+t.length-r}`);for(let t=0;t<i;++t)if(n.shape[t]!==e.shape[t])throw Error(o+` updates.shape[${t}] (${n.shape[t]}) != indices.shape[${t}] (${e.shape[t]}).`);for(let e=0;e<n.rank-i;++e)if(n.shape[e+i]!==t[e+r])throw Error(o+` updates.shape[${e+i}] (${n.shape[e+i]}) != shape[${e+i}] (${t[e+i]})`)}function o(t,e,n){if(e.rank<1)throw Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==e.dtype)throw Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===e.size)throw Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(0===t.size)throw Error(`Updates specified for empty output. updates shape: ${t.shape}`)}i(n,e,t)}function a(t,e,n){let i=e.shape.length,o=i>1?e.shape[i-1]:1,a=n.length,u=1;for(let t=o;t<a;++t)u*=n[t];let s=o<1?1:o,l=(0,r.NA)(e.shape)/s,c=[...(0,r.e3)(n.slice(0,o)),1];return{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:(0,r.NA)(n)}}},5986:function(t,e,n){"use strict";n.d(e,{X:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({sigmoid_:function(t){let e=(0,o._1)(t,"x","sigmoid","float32");return r.BV.runKernel(i.a5O,{x:e})}})},9467:function(t,e,n){"use strict";n.d(e,{_:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({sqrt_:function(t){let e=(0,o._1)(t,"x","sqrt","float32");return r.BV.runKernel(i.FKq,{x:e})}})},7941:function(t,e,n){"use strict";n.d(e,{h:function(){return o}});var r=n(9681),i=n(971);let o=(0,n(2888).op)({square_:function(t){let e=(0,i._1)(t,"x","square");return r.BV.runKernel("Square",{x:e},{})}})},9794:function(t,e,n){"use strict";n.d(e,{N:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({step_:function(t,e=0){let n=(0,o._1)(t,"x","step");return r.BV.runKernel(i.h8e,{x:n},{alpha:e})}})},5799:function(t,e,n){"use strict";n.d(e,{l:function(){return u}});var r=n(9681),i=n(5047),o=n(5420),a=n(971);let u=(0,n(2888).op)({sub_:function(t,e){let n=(0,a._1)(t,"a","sub"),u=(0,a._1)(e,"b","sub");[n,u]=(0,o.makeTypesMatch)(n,u);let s={a:n,b:u};return r.BV.runKernel(i.Tr8,s)}})},1101:function(t,e,n){"use strict";n.d(e,{S:function(){return u}});var r=n(9681),i=n(5047),o=n(971),a=n(8893);let u=(0,n(2888).op)({sum_:function(t,e=null,n=!1){let u=(0,o._1)(t,"x","sum");"bool"===u.dtype&&(u=(0,a.p)(u,"int32"));let s={x:u};return r.BV.runKernel(i.GBy,s,{axis:e,keepDims:n})}})},1802:function(t,e,n){"use strict";n.d(e,{X:function(){return o}});var r=n(971),i=n(1185);function o(t,e,n){let o=(0,r.C)(t,n);return(0,i.H)(t,e,o,n)}},1051:function(t,e,n){"use strict";n.d(e,{w:function(){return a}});var r=n(971),i=n(2771),o=n(1185);function a(t,e,n){if((0,i.Cq)(t),null!=e&&3!==e.length)throw Error("tensor3d() requires shape to have three numbers");let a=(0,r.C)(t,n);if(3!==a.length&&1!==a.length)throw Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===a.length&&null==e)throw Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,o.H)(t,e,a,n)}},1185:function(t,e,n){"use strict";n.d(e,{H:function(){return u}});var r=n(9681),i=n(8638),o=n(2771),a=n(2904);function u(t,e,n,u){if(null==u)u=(0,o.D2)(t);else if("complex64"===u)throw Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if((0,i.$F)(t)||(0,i.Oq)(t)){if("float32"!==u&&"int32"!==u)throw Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${u}.`);return r.BV.backend.createTensorFromGPUData(t,e||n,u)}if(!(0,a.isTypedArray)(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){(0,o.Mu)(e);let t=(0,o.NA)(e),r=(0,o.NA)(n);(0,o.hu)(t===r,()=>`Based on the provided shape, [${e}], the tensor should have ${t} values but has ${r}`);for(let t=0;t<n.length;++t){let r=n[t],i=t!==n.length-1||r!==(0,o.NA)(e.slice(t));(0,o.hu)(n[t]===e[t]||!i,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return(0,a.isTypedArray)(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==u?(0,a.toTypedArray)(t,u):(0,a.flatten)(t,[],!0),r.BV.makeTensor(t,e,u)}},5250:function(t,e,n){"use strict";n.d(e,{p:function(){return d}});var r=n(9681),i=n(5823),o=n(5047),a=n(971),u=n(2771),s=n(7977),l=n(8587),c=n(2666),h=n(2888),f=n(1773);let d=(0,h.op)({transpose_:function(t,e,n){let h=(0,a._1)(t,"x","transpose");if(null==e&&(e=h.shape.map((t,e)=>e).reverse()),u.hu(h.rank===e.length,()=>`Error in transpose: rank of input ${h.rank} must match length of perm ${e}.`),e.forEach(t=>{u.hu(t>=0&&t<h.rank,()=>`All entries in 'perm' must be between 0 and ${h.rank-1} but got ${e}`)}),h.rank<=1)return h.clone();let d={perm:e};return"complex64"===h.dtype?(0,i.lu)(()=>{let t=(0,f.k)(h),e=(0,l.a)(h);return t=r.BV.runKernel(o.G3Y,{x:t},d),e=r.BV.runKernel(o.G3Y,{x:e},d),n&&(e=(0,c.W)(e)),(0,s.P)(t,e)}):r.BV.runKernel(o.G3Y,{x:h},d)}})},2898:function(t,e,n){"use strict";n.d(e,{P:function(){return a}});var r=n(9681),i=n(5047),o=n(971);let a=(0,n(2888).op)({zerosLike_:function(t){let e=(0,o._1)(t,"x","zerosLike");return r.BV.runKernel(i.RuY,{x:e})}})},8719:function(t,e,n){"use strict";function r(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}n.d(e,{j:function(){return r}})},6150:function(t,e,n){"use strict";n.d(e,{es:function(){return g},YD:function(){return l},_w:function(){return y},t3:function(){return m},FZ:function(){return p},Vp:function(){return d},Vi:function(){return f}});var r=n(5490),i=n(2771);function o(t,e,n){let r;return r=Array.isArray(t)?`${parseFloat(t[0].toFixed(7))} + ${parseFloat(t[1].toFixed(7))}j`:(0,i.HD)(t)?`'${t}'`:"bool"===n?a(t):parseFloat(t.toFixed(7)).toString(),(0,i.oj)(r,e)}function a(t){return 0===t?"false":"true"}function u(t){let e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var s=n(2904);class l{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=i.NA(t),null!=n){let t=n.length;i.hu(t===this.size,()=>`Length of values '${t}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===e)throw Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||i.rQ(e,this.size),this.strides=(0,i.e3)(t)}set(t,...e){0===e.length&&(e=[0]),i.hu(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);let n=this.locToIndex(e);this.values[n]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(let n of t){if(n<0||n>=this.shape[e])throw Error(`Requested out of range element at ${t}.   Buffer shape=${this.shape}`);e++}let n=t[t.length-1];for(let e=0;e<t.length-1;++e)n+=this.strides[e]*t[e];return this.values[n]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];let e=Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return c().makeTensor(this.values,this.shape,this.dtype)}}let c=null,h=null;function f(t){c=t}function d(t){h=t}function p(t){}class g{constructor(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=i.NA(t),this.strides=(0,i.e3)(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let t=await this.data();return h.buffer(this.shape,this.dtype,t)}bufferSync(){return h.buffer(this.shape,this.dtype,this.dataSync())}async array(){let t=await this.data();return(0,i.GX)(this.shape,t,"complex64"===this.dtype)}arraySync(){return(0,i.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();let t=c().read(this.dataId);if("string"===this.dtype){let e=await t;try{return e.map(t=>s.decodeString(t))}catch(t){throw Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),c().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();let t=c().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>s.decodeString(t))}catch(t){throw Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();let t=await c().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),c().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw Error("Tensor is disposed.")}print(t=!1){return h.print(this,t)}clone(){return this.throwIfDisposed(),h.clone(this)}toString(t=!1){return function(t,e,n,r){let s=(0,i.e3)(e),l=function(t,e,n,r){let a=(0,i.NA)(e),s=r[r.length-1],l=Array(s).fill(0),c=e.length,h="complex64"===n?u(t):t;if(c>1)for(let t=0;t<a/s;t++){let e=t*s;for(let t=0;t<s;t++)l[t]=Math.max(l[t],o(h[e+t],0,n).length)}return l}(t,e,n,s),c=e.length,h=function t(e,n,r,i,s,l=!0){let c="complex64"===r?2:1,h=n[0],f=n.length;if(0===f)return"complex64"===r?[o(u(e)[0],0,r)]:"bool"===r?[a(e[0])]:[e[0].toString()];if(1===f){if(h>20){let t=Array.from(e.slice(0,3*c)),n=Array.from(e.slice((h-3)*c,h*c));return"complex64"===r&&(t=u(t),n=u(n)),["["+t.map((t,e)=>o(t,s[e],r)).join(", ")+", ..., "+n.map((t,e)=>o(t,s[h-3+e],r)).join(", ")+"]"]}return["["+("complex64"===r?u(e):Array.from(e)).map((t,e)=>o(t,s[e],r)).join(", ")+"]"]}let d=n.slice(1),p=i.slice(1),g=i[0]*c,m=[];if(h>20){for(let n=0;n<3;n++){let i=n*g,o=i+g;m.push(...t(e.slice(i,o),d,r,p,s,!1))}m.push("...");for(let n=h-3;n<h;n++){let i=n*g,o=i+g;m.push(...t(e.slice(i,o),d,r,p,s,n===h-1))}}else for(let n=0;n<h;n++){let i=n*g,o=i+g;m.push(...t(e.slice(i,o),d,r,p,s,n===h-1))}let y=2===f?",":"";m[0]="["+(h>0?m[0]+y:"");for(let t=1;t<m.length-1;t++)m[t]=" "+m[t]+y;let b=",\n";for(let t=2;t<f;t++)b+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(l?"":b),m}(t,e,n,s,l),f=["Tensor"];return r&&(f.push(`  dtype: ${n}`),f.push(`  rank: ${c}`),f.push(`  shape: [${e}]`),f.push("  values:")),f.push(h.map(t=>"    "+t).join("\n")),f.join("\n")}(this.dataSync(),this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),h.cast(this,t)}variable(t=!0,e,n){return this.throwIfDisposed(),c().makeVariable(this,t,e,n)}}function m(){return(0,r.R)("Tensor",()=>g)}Object.defineProperty(g,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),m();class y extends g{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!i.cO(t.shape,this.shape))throw Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);c().disposeTensor(this),this.dataId=t.dataId,c().incRef(this,null)}dispose(){c().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(y,Symbol.hasInstance,{value:t=>t instanceof g&&null!=t.assign&&t.assign instanceof Function})},5420:function(t,e,n){"use strict";n.r(e),n.d(e,{assertTypesMatch:function(){return u},getTensorsInContainer:function(){return l},isTensorInList:function(){return s},makeTypesMatch:function(){return a}});var r=n(6150),i=n(8638),o=n(2771);function a(t,e){if(t.dtype===e.dtype)return[t,e];let n=(0,i.x8)(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function u(t,e){(0,o.hu)(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function s(t,e){return e.some(e=>e.id===t.id)}function l(t){let e=[];return function t(e,n,i){if(null!=e){if(e instanceof r.es){n.push(e);return}if(Array.isArray(e)||"object"==typeof e)for(let r in e){let o=e[r];i.has(o)||(i.add(o),t(o,n,i))}}}(t,e,new Set),e}},971:function(t,e,n){"use strict";n.d(e,{C:function(){return l},_1:function(){return h},sI:function(){return f}});var r=n(9681),i=n(6472),o=n(6150),a=n(8638),u=n(2904),s=n(2771);function l(t,e){let n=t;if((0,u.isTypedArray)(t))return"string"===e?[]:[t.length];if((0,a.Oq)(t)){let e=t.channels||"RGBA";return[t.height,t.width*e.length]}if((0,a.$F)(t))return[t.buffer.size/(null==e?4:(0,s.bT)(e))];if(!Array.isArray(t))return[];let r=[];for(;Array.isArray(n)||(0,u.isTypedArray)(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&(0,i.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],!Array.isArray(e)&&!(0,u.isTypedArray)(e)){(0,s.hu)(0===n.length,()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);return}(0,s.hu)(n.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${e.length} elements`),(0,s.hu)(e.length===n[0],()=>`Element arr[${r.join("][")}] should have ${n[0]} elements, but has ${e.length} elements`);let i=n.slice(1);for(let n=0;n<e.length;++n)t(e[n],i,r.concat(n))}(t,r,[]),r}function c(t,e,n,r){if("string_or_numeric"!==t){if(null==t)throw Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==e||"numeric"===t&&"string"===e)throw Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function h(t,e,n,i="numeric"){if(t instanceof(0,o.t3)())return c(i,t.dtype,e,n),t;let a=(0,s.D2)(t);if("string"!==a&&["bool","int32","float32"].indexOf(i)>=0&&(a=i),c(i,a,e,n),null==t||!(0,u.isTypedArray)(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t){let r=null==t?"null":t.constructor.name;throw Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}let h=l(t,a);(0,u.isTypedArray)(t)||Array.isArray(t)||(t=[t]);let f="string"!==a?(0,u.toTypedArray)(t,a):(0,u.flatten)(t,[],!0);return r.BV.makeTensor(f,h,a)}function f(t,e,n,r="numeric"){if(!Array.isArray(t))throw Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((t,i)=>h(t,`${e}[${i}]`,n,r))}},8638:function(t,e,n){"use strict";var r,i,o,a,u,s,l,c,h,f;n.d(e,{$F:function(){return y},Oq:function(){return m},x8:function(){return p},yw:function(){return r},z4:function(){return g}}),(s=r||(r={})).R0="R0",s.R1="R1",s.R2="R2",s.R3="R3",s.R4="R4",s.R5="R5",s.R6="R6",(l=i||(i={})).float32="float32",l.int32="int32",l.bool="int32",l.complex64="complex64",(c=o||(o={})).float32="float32",c.int32="int32",c.bool="bool",c.complex64="complex64",(h=a||(a={})).float32="float32",h.int32="float32",h.bool="float32",h.complex64="complex64",(f=u||(u={})).float32="complex64",f.int32="complex64",f.bool="complex64",f.complex64="complex64";let d={float32:a,int32:i,bool:o,complex64:u};function p(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw Error(`Can not upcast ${t} with ${e}`)}return d[t][e]}function g(t){return p(t,"int32")}function m(t){return null!=t&&"object"==typeof t&&"texture"in t&&t.texture instanceof WebGLTexture}function y(t){return"undefined"!=typeof GPUBuffer&&null!=t&&"object"==typeof t&&"buffer"in t&&t.buffer instanceof GPUBuffer}},2904:function(t,e,n){"use strict";n.r(e),n.d(e,{arraysEqual:function(){return o.cO},arraysEqualWithNull:function(){return o.DK},assert:function(){return o.hu},assertNonNegativeIntegerDimensions:function(){return o.Mu},assertNonNull:function(){return o.Cq},assertShapesMatch:function(){return o.k5},bytesFromStringArray:function(){return o.Ub},bytesPerElement:function(){return o.bT},checkConversionForErrors:function(){return o.D5},clamp:function(){return o.uZ},computeStrides:function(){return o.e3},convertBackendValuesAndArrayBuffer:function(){return o.KS},createScalarValue:function(){return w},createShuffledIndices:function(){return o.U$},decodeString:function(){return _},distSquared:function(){return o.E7},encodeString:function(){return x},fetch:function(){return E},fingerPrint64:function(){return b},flatten:function(){return B},getArrayFromDType:function(){return o.rQ},getTypedArrayFromDType:function(){return o.WP},hasEncodingLoss:function(){return o.QB},hexToLong:function(){return s},indexToLoc:function(){return o.NE},inferDtype:function(){return o.D2},inferFromImplicitShape:function(){return o.JZ},isBoolean:function(){return o.jn},isFunction:function(){return o.mf},isInt:function(){return o.GN},isNumber:function(){return o.hj},isPromise:function(){return o.tI},isScalarShape:function(){return o.xH},isString:function(){return o.HD},isTypedArray:function(){return S},isValidDtype:function(){return o.LP},locToIndex:function(){return o.qy},makeOnesTypedArray:function(){return o.p8},makeZerosNestedTypedArray:function(){return o.l6},makeZerosTypedArray:function(){return o.wT},nearestDivisor:function(){return o.jP},nearestLargerEven:function(){return o.nY},now:function(){return k},parseAxisParam:function(){return o.EC},randUniform:function(){return o.bj},repeatedTry:function(){return o.WD},rightPad:function(){return o.oj},shuffle:function(){return o.TV},shuffleCombo:function(){return o.d7},sizeFromShape:function(){return o.NA},sizeToSquarishShape:function(){return o.YP},squeezeShape:function(){return o.bp},sum:function(){return o.Sm},swap:function(){return o.LF},tanh:function(){return o.AE},toNestedArray:function(){return o.GX},toTypedArray:function(){return v}});var r=n(6472),i=n(8719),o=n(2771),a=n(398);let u=n.n(a)()||a;function s(t){return u.fromString(t,!0,16)}let l=s("c3a5c85c97cb3127"),c=s("b492b66fbe98f273"),h=s("9ae16a3b2f90404f");function f(t){return t.xor(t.shru(47))}function d(t,e,n){let r=t.slice(e,e+n);return u.fromBytes(Array.from(r),!0,!0)}function p(t,e){return d(t,e,8)}function g(t,e){return 0===e?t:t.shru(e).or(t.shl(64-e))}function m(t,e,n=s("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return(i=i.xor(i.shru(47))).mul(n)}function y(t,e,n,r){return function(t,e,n,r,i,o){i=i.add(t),o=g(o.add(i).add(r),21);let a=i;return i=(i=i.add(e)).add(n),o=o.add(g(i,44)),[i.add(r),o.add(a)]}(p(t,e),p(t,e+8),p(t,e+16),p(t,e+24),n,r)}function b(t,e=t.length){let n=u.fromNumber(81,!0);if(e<=32)return e<=16?function(t,e=t.length){if(e>=8){let n=h.add(2*e),r=p(t,0).add(h),i=p(t,e-8);return m(g(i,37).mul(n).add(r),g(r,25).add(i).mul(n),n)}if(e>=4){let n=h.add(2*e);return m(d(t,0,4).shl(3).add(e),d(t,e-4,4),n)}if(e>0){let n=t[0],r=t[e>>1],i=t[e-1];return f(h.mul(n+(r<<8)).xor(l.mul(e+(i<<2)))).mul(h)}return h}(t,e):function(t,e=t.length){let n=h.add(2*e),r=p(t,0).mul(c),i=p(t,8),o=p(t,e-8).mul(n),a=p(t,e-16).mul(h);return m(g(r.add(i),43).add(g(o,30)).add(a),r.add(g(i.add(h),18)).add(o),n)}(t,e);if(e<=64)return function(t,e=t.length){let n=h.add(2*e),r=p(t,0).mul(h),i=p(t,8),o=p(t,e-8).mul(n),a=p(t,e-16).mul(h),u=g(r.add(i),43).add(g(o,30)).add(a),s=m(u,r.add(g(i.add(h),18)).add(o),n),l=p(t,16).mul(n),c=p(t,24),f=u.add(p(t,e-32)).mul(n),d=s.add(p(t,e-24)).mul(n);return m(g(l.add(c),43).add(g(f,30)).add(d),l.add(g(c.add(r),18)).add(f),n)}(t,e);let r=n,i=n.mul(c).add(113),o=f(i.mul(h).add(113)).mul(h),a=[u.UZERO,u.UZERO],s=[u.UZERO,u.UZERO];r=r.mul(h).add(p(t,0));let b=0,w=(e-1>>6)*64;do r=g(r.add(i).add(a[0]).add(p(t,b+8)),37).mul(c),i=g(i.add(a[1]).add(p(t,b+48)),42).mul(c),r=r.xor(s[1]),i=i.add(a[0]).add(p(t,b+40)),o=g(o.add(s[0]),33).mul(c),a=y(t,b,a[1].mul(c),r.add(s[0])),s=y(t,b+32,o.add(s[1]),i.add(p(t,b+16))),[o,r]=[r,o],b+=64;while(b!==w);let v=c.add(o.and(255).shl(1));return b=w+(e-1&63)-63,s[0]=s[0].add(e-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),r=g(r.add(i).add(a[0]).add(p(t,b+8)),37).mul(v),i=g(i.add(a[1]).add(p(t,b+48)),42).mul(v),r=r.xor(s[1].mul(9)),i=i.add(a[0].mul(9).add(p(t,b+40))),o=g(o.add(s[0]),33).mul(v),a=y(t,b,a[1].mul(v),r.add(s[0])),s=y(t,b+32,o.add(s[1]),i.add(p(t,b+16))),[o,r]=[r,o],m(m(a[0],s[0],v).add(f(i).mul(l)).add(o),m(a[1],s[1],v).add(r),v)}function w(t,e){return"string"===e?x(t):v([t],e)}function v(t,e){var n;if("string"===e)throw Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=B(t)),(0,r.OB)().getBool("DEBUG")&&o.D5(t,e),(n=t)instanceof Float32Array&&"float32"===e||n instanceof Int32Array&&"int32"===e||n instanceof Uint8Array&&"bool"===e)return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){let e=new Uint8Array(t.length);for(let n=0;n<e.length;++n)0!==Math.round(t[n])&&(e[n]=1);return e}throw Error(`Unknown data type ${e}`)}function k(){return(0,r.OB)().platform.now()}function E(t,e){return(0,r.OB)().platform.fetch(t,e)}function x(t,e="utf-8"){return e=e||"utf-8",(0,r.OB)().platform.encode(t,e)}function _(t,e="utf-8"){return e=e||"utf-8",(0,r.OB)().platform.decode(t,e)}function S(t){return null!=(0,r.OB)().platform.isTypedArray?(0,r.OB)().platform.isTypedArray(t):(0,i.j)(t)}function B(t,e=[],n=!1){if(null==e&&(e=[]),"boolean"==typeof t||"number"==typeof t||"string"==typeof t||o.tI(t)||null==t||S(t)&&n)e.push(t);else if(Array.isArray(t)||S(t))for(let r=0;r<t.length;++r)B(t[r],e,n);else{let r=-1;for(let e of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(e)&&(r=Math.max(r,Number(e)));for(let i=0;i<=r;i++)B(t[i],e,n)}return e}},2771:function(t,e,n){"use strict";function r(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,u(t,--e,n)}function i(t,e){if(t.length!==e.length)throw Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,u(t,--n,r),u(e,n,r)}function o(t,e,n){return Math.max(t,Math.min(e,n))}function a(t){return t%2==0?t:t+1}function u(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function s(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function l(t,e){let n=Math.random();return e*n+(1-n)*t}function c(t,e){let n=0;for(let r=0;r<t.length;r++){let i=Number(t[r])-Number(e[r]);n+=i*i}return n}function h(t,e){if(!t)throw Error("string"==typeof e?e:e())}function f(t,e,n=""){h(y(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function d(t){h(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function p(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function g(t){return 0===t.length}function m(t,e){if(t===e)return!0;if(null==t||null==e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(null!==t[n]&&null!==e[n]&&t[n]!==e[n])return!1;return!0}function y(t,e){if(t===e)return!0;if(null==t||null==e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function b(t){return t%1==0}function w(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return -1;{let e=Math.exp(2*t);return(e-1)/(e+1)}}function v(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function k(t){let e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return r(e),e}function E(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function x(t,e=t=>0,n,r){return new Promise((i,o)=>{let a=0,u=()=>{if(t()){i();return}let s=e(++a);if(null!=n&&a>=n){o();return}null!=r?r(u,s):setTimeout(u,s)};u()})}function _(t,e){let n=1,r=-1;for(let e=0;e<t.length;++e)if(t[e]>=0)n*=t[e];else if(-1===t[e]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${e}`);r=e}else if(t[e]<0)throw Error(`Shapes can not be < 0. Found ${t[e]} at dim ${e}`);if(-1===r){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);let i=t.slice();return i[r]=e/n,i}function S(t,e){let n=e.length;return h((t=null==t?e.map((t,e)=>e):[].concat(t)).every(t=>t>=-n&&t<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),h(t.every(t=>b(t)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(t=>t<0?n+t:t)}function B(t,e){let n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,o=null==e||i?null:S(e,t).sort(),a=0;for(let e=0;e<t.length;++e){if(null!=o){if(o[a]===e&&1!==t[e])throw Error(`Can't squeeze axis ${e} since its dim '${t[e]}' is not 1`);(null==o[a]||o[a]>e)&&1===t[e]&&(n.push(t[e]),r.push(e)),o[a]<=e&&a++}1!==t[e]&&(n.push(t[e]),r.push(e))}return{newShape:n,keptDims:r}}function A(t,e){return $(t,e)}function $(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else if("string"===t)n=Array(e);else throw Error(`Unknown data type ${t}`);return n}function I(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function T(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function N(t,e){return"complex64"!==e&&("float32"!==e||"complex64"===t)&&("int32"!==e||"float32"===t||"complex64"===t)&&("bool"!==e||"bool"!==t)}function M(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw Error(`Unknown dtype ${t}`)}function R(t){if(null==t)return 0;let e=0;return t.forEach(t=>e+=t.length),e}function D(t){return"string"==typeof t||t instanceof String}function O(t){return"boolean"==typeof t}function C(t){return"number"==typeof t}function V(t){return!!(t&&t.constructor&&t.call&&t.apply)}function F(t,e){for(let n=e;n<t;++n)if(t%n==0)return n;return t}function P(t){let e=t.length;if(e<2)return[];let n=Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function L(t,e,n=!1){if(0===t.length)return e[0];let r=t.reduce((t,e)=>t*e)*(n?2:1);if(0===r)return[];if(r!==e.length)throw Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return function t(e,n,r,i=!1){let o=[];if(1===n.length){let t=n[0]*(i?2:1);for(let n=0;n<t;n++)o[n]=r[e+n]}else{let a=n[0],u=n.slice(1),s=u.reduce((t,e)=>t*e)*(i?2:1);for(let n=0;n<a;n++)o[n]=t(e+n*s,u,r,i)}return o}(0,t,e,n)}function U(t,e){if(Array.isArray(t))return t;if("float32"===e)return t instanceof Float32Array?t:new Float32Array(t);if("int32"===e)return t instanceof Int32Array?t:new Int32Array(t);if("bool"===e||"string"===e)return Uint8Array.from(new Int32Array(t));throw Error(`Unknown dtype ${e}`)}function G(t,e){let n=z(t,e);for(let t=0;t<n.length;t++)n[t]=1;return n}function z(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw Error(`Unknown data type ${e}`)}function W(t,e){let n=t.reduce((t,e)=>t*e,1);if(null==e||"float32"===e)return L(t,new Float32Array(n));if("int32"===e)return L(t,new Int32Array(n));if("bool"===e)return L(t,new Uint8Array(n));throw Error(`Unknown data type ${e}`)}function q(t){t.forEach(e=>{h(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function K(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let e=0;e<t.length-1;++e)r+=n[e]*t[e];return r}function j(t,e,n){if(0===e)return[];if(1===e)return[t];let r=Array(e);for(let e=0;e<r.length-1;++e)r[e]=Math.floor(t/n[e]),t-=r[e]*n[e];return r[r.length-1]=t,r}function H(t){return t&&t.then&&"function"==typeof t.then}n.d(e,{AE:function(){return w},Cq:function(){return d},D2:function(){return function t(e){if(Array.isArray(e))return t(e[0]);if(e instanceof Float32Array);else if(e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return"int32";else if(C(e));else if(D(e))return"string";else if(O(e))return"bool";return"float32"}},D5:function(){return I},DK:function(){return m},E7:function(){return c},EC:function(){return S},GN:function(){return b},GX:function(){return L},HD:function(){return D},JZ:function(){return _},KS:function(){return U},LF:function(){return u},LP:function(){return T},Mu:function(){return q},NA:function(){return p},NE:function(){return j},QB:function(){return N},Sm:function(){return s},TV:function(){return r},U$:function(){return k},Ub:function(){return R},WD:function(){return x},WP:function(){return A},YP:function(){return v},bT:function(){return M},bj:function(){return l},bp:function(){return B},cO:function(){return y},d7:function(){return i},e3:function(){return P},hj:function(){return C},hu:function(){return h},jP:function(){return F},jn:function(){return O},k5:function(){return f},l6:function(){return W},mf:function(){return V},nY:function(){return a},oj:function(){return E},p8:function(){return G},qy:function(){return K},rQ:function(){return $},tI:function(){return H},uZ:function(){return o},wT:function(){return z},xH:function(){return g}})},398:function(t){t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=o[t]))?r:(n=s(t,(0|t)<0?-1:0,!0),a&&(o[t]=n),n):(t|=0,(a=-128<=t&&t<128)&&(r=i[t]))?r:(n=s(t,t<0?-1:0,!1),a&&(i[t]=n),n)}function u(t,e){if(isNaN(t))return e?y:m;if(e){if(t<0)return y;if(t>=d)return E}else{if(t<=-p)return x;if(t+1>=p)return k}return t<0?u(-t,e).neg():s(t%f|0,t/f|0,e)}function s(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=u,n.fromBits=s;var l=Math.pow;function c(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return m;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(t.substring(1),e,n).neg();for(var r,i=u(l(n,8)),o=m,a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a),h=parseInt(t.substring(a,a+s),n);if(s<8){var f=u(l(n,s));o=o.mul(f).add(u(h))}else o=(o=o.mul(i)).add(u(h))}return o.unsigned=e,o}function h(t,e){return"number"==typeof t?u(t,e):"string"==typeof t?c(t,e):s(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=c,n.fromValue=h;var f=4294967296,d=18446744073709552e3,p=0x7fffffffffffffff,g=a(16777216),m=a(0);n.ZERO=m;var y=a(0,!0);n.UZERO=y;var b=a(1);n.ONE=b;var w=a(1,!0);n.UONE=w;var v=a(-1);n.NEG_ONE=v;var k=s(-1,2147483647,!1);n.MAX_VALUE=k;var E=s(-1,-1,!0);n.MAX_UNSIGNED_VALUE=E;var x=s(0,-2147483648,!1);n.MIN_VALUE=x;var _=n.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},_.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(x))return"-"+this.neg().toString(t);var e=u(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}for(var i=u(l(t,6),this.unsigned),o=this,a="";;){var s=o.div(i),c=(o.sub(s.mul(i)).toInt()>>>0).toString(t);if((o=s).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return 0!=this.high?e+33:e+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(1&this.low)==1},_.isEven=function(){return(1&this.low)==0},_.equals=function(t){return r(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},_.eq=_.equals,_.notEquals=function(t){return!this.eq(t)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(t){return 0>this.comp(t)},_.lt=_.lessThan,_.lessThanOrEqual=function(t){return 0>=this.comp(t)},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(t){return this.comp(t)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(t){return this.comp(t)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(t){if(r(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(b)},_.neg=_.negate,_.add=function(t){r(t)||(t=h(t));var e,n,i=this.high>>>16,o=65535&this.high,a=this.low>>>16,u=65535&this.low,l=t.high>>>16,c=65535&t.high,f=t.low>>>16,d=65535&t.low,p=0,g=0;return e=0+((n=0+(u+d))>>>16),n&=65535,e+=a+f,g+=e>>>16,e&=65535,g+=o+c,p+=g>>>16,g&=65535,p+=i+l,s(e<<16|n,(p&=65535)<<16|g,this.unsigned)},_.subtract=function(t){return r(t)||(t=h(t)),this.add(t.neg())},_.sub=_.subtract,_.multiply=function(t){if(this.isZero())return m;if(r(t)||(t=h(t)),e)return s(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(x))return t.isOdd()?x:m;if(t.eq(x))return this.isOdd()?x:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return u(this.toNumber()*t.toNumber(),this.unsigned);var n,i,o=this.high>>>16,a=65535&this.high,l=this.low>>>16,c=65535&this.low,f=t.high>>>16,d=65535&t.high,p=t.low>>>16,y=65535&t.low,b=0,w=0;return n=0+((i=0+c*y)>>>16),i&=65535,n+=l*y,w+=n>>>16,n&=65535,n+=c*p,w+=n>>>16,n&=65535,w+=a*y,b+=w>>>16,w&=65535,w+=l*p,b+=w>>>16,w&=65535,w+=c*d,b+=w>>>16,w&=65535,b+=o*y+a*p+l*d+c*f,s(n<<16|i,(b&=65535)<<16|w,this.unsigned)},_.mul=_.multiply,_.divide=function(t){if(r(t)||(t=h(t)),t.isZero())throw Error("division by zero");if(e){var n,i,o;return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?s((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return w;o=y}else{if(this.eq(x))return t.eq(b)||t.eq(v)?x:t.eq(x)?b:(n=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?b:v:(i=this.sub(t.mul(n)),o=n.add(i.div(t)));if(t.eq(x))return this.unsigned?y:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=m}for(i=this;i.gte(t);){for(var a=Math.ceil(Math.log(n=Math.max(1,Math.floor(i.toNumber()/t.toNumber())))/Math.LN2),c=a<=48?1:l(2,a-48),f=u(n),d=f.mul(t);d.isNegative()||d.gt(i);)n-=c,d=(f=u(n,this.unsigned)).mul(t);f.isZero()&&(f=b),o=o.add(f),i=i.sub(d)}return o},_.div=_.divide,_.modulo=function(t){return(r(t)||(t=h(t)),e)?s((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return s(~this.low,~this.high,this.unsigned)},_.and=function(t){return r(t)||(t=h(t)),s(this.low&t.low,this.high&t.high,this.unsigned)},_.or=function(t){return r(t)||(t=h(t)),s(this.low|t.low,this.high|t.high,this.unsigned)},_.xor=function(t){return r(t)||(t=h(t)),s(this.low^t.low,this.high^t.high,this.unsigned)},_.shiftLeft=function(t){return(r(t)&&(t=t.toInt()),0==(t&=63))?this:t<32?s(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):s(0,this.low<<t-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(t){return(r(t)&&(t=t.toInt()),0==(t&=63))?this:t<32?s(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):s(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?s(this.low>>>t|e<<32-t,e>>>t,this.unsigned):32===t?s(e,0,this.unsigned):s(e>>>t-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},_.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},_.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},257:function(t,e,n){"use strict";var r,i;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(4227)},6434:function(t){!function(){var e={675:function(t,e){"use strict";e.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return(n+r)*3/4-r},e.toByteArray=function(t){var e,n,o=s(t),a=o[0],u=o[1],l=new i((a+u)*3/4-u),c=0,h=u>0?a-4:a;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;return 2===u&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[c++]=255&e),1===u&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e),l},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,u=r-i;a<u;a+=16383)o.push(function(t,e,r){for(var i,o=[],a=e;a<r;a+=3)o.push(n[(i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(t,a,a+16383>u?u:a+16383));return 1===i?o.push(n[(e=t[r-1])>>2]+n[e<<4&63]+"=="):2===i&&o.push(n[(e=(t[r-2]<<8)+t[r-1])>>10]+n[e>>4&63]+n[e<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},72:function(t,e,n){"use strict";var r=n(675),i=n(783),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return c(t)}return s(t,e,n)}function s(t,e,n){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!u.isEncoding(e))throw TypeError("Unknown encoding: "+e);var n=0|d(t,e),r=a(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(I(t,ArrayBuffer)||t&&I(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(I(t,SharedArrayBuffer)||t&&I(t.buffer,SharedArrayBuffer)))return function(t,e,n){var r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),u.prototype),r}(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);var i=function(t){if(u.isBuffer(t)){var e,n=0|f(t.length),r=a(n);return 0===r.length||t.copy(r,0,0,n),r}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?a(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return l(t),a(t<0?0:0|f(t))}function h(t){for(var e=t.length<0?0:0|f(t.length),n=a(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||I(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return S(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return A(t).length;default:if(i)return r?-1:S(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){var i,o,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=T[t[o]];return i}(this,e,n);case"utf8":case"utf-8":return b(this,e,n);case"ascii":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":return i=e,o=n,0===i&&o===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,e,n);default:if(a)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){var o;if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(o=n=+n)!=o&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return -1;n=t.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;a=2,u/=2,s/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<u;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===s)return c*a}else -1!==c&&(o-=o-c),c=-1}else for(n+s>u&&(n=u-s),o=n;o>=0;o--){for(var h=!0,f=0;f<s;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return -1}function b(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,u,s,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:(192&(o=t[i+1]))==128&&(s=(31&l)<<6|63&o)>127&&(c=s);break;case 3:o=t[i+1],a=t[i+2],(192&o)==128&&(192&a)==128&&(s=(15&l)<<12|(63&o)<<6|63&a)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:o=t[i+1],a=t[i+2],u=t[i+3],(192&o)==128&&(192&a)==128&&(192&u)==128&&(s=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(c=s)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function w(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function v(t,e,n,r,i,o){if(!u.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw RangeError('"value" argument is out of bounds');if(n+r>t.length)throw RangeError("Index out of range")}function k(t,e,n,r,i,o){if(n+r>t.length||n<0)throw RangeError("Index out of range")}function E(t,e,n,r,o){return e=+e,n>>>=0,o||k(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function x(t,e,n,r,o){return e=+e,n>>>=0,o||k(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647,u.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return s(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return(l(t),t<=0)?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)},u.allocUnsafe=function(t){return c(t)},u.allocUnsafeSlow=function(t){return c(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(I(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),I(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);if(void 0===e)for(n=0,e=0;n<t.length;++n)e+=t[n].length;var n,r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(I(o,Uint8Array)&&(o=u.from(o)),!u.isBuffer(o))throw TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=this.length;return 0===t?"":0==arguments.length?b(this,0,t):p.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,i){if(I(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return -1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),l=this.slice(r,i),c=t.slice(e,n),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return -1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,o,a,u,s,l,c,h,f,d,p,g,m=this.length-e;if((void 0===n||n>m)&&(n=m),t.length>0&&(n<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var y=!1;;)switch(r){case"hex":return function(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(u!=u)break;t[n+a]=u}return a}(this,t,e,n);case"utf8":case"utf-8":return s=e,l=n,$(S(t,this.length-s),this,s,l);case"ascii":return c=e,h=n,$(B(t),this,c,h);case"latin1":case"binary":return i=this,o=t,a=e,u=n,$(B(o),i,a,u);case"base64":return f=e,d=n,$(A(t),this,f,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=e,g=n,$(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,this.length-p),this,p,g);default:if(y)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),y=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return t>>>=0,e||w(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return(t>>>=0,e||w(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||w(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||w(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return t>>>=0,e||w(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||w(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||w(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||w(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;v(this,t,e,n,i,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;v(this,t,e,n,i,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);v(this,t,e,n,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);v(this,t,e,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeFloatLE=function(t,e,n){return E(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return E(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return x(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return x(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;o>=0;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){var i,o=t.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(t=o)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=u.isBuffer(t)?t:u.from(t,r),s=a.length;if(0===s)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=a[i%s]}return this};var _=/[^+/0-9A-Za-z-_]/g;function S(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319||a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function B(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function A(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(_,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length)&&!(i>=t.length);++i)e[i+n]=t[i];return i}function I(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}var T=function(){for(var t="0123456789abcdef",e=Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()},783:function(t,e){e.read=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,l=s>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=u;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,u,s,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?5960464477539062e-23:0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),a+h>=1?e+=f/s:e+=f*Math.pow(2,1-h),e*s>=2&&(a++,s/=2),a+h>=c?(u=0,a=c):a+h>=1?(u=(e*s-1)*Math.pow(2,i),a+=h):(u=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&u,d+=p,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;t[n+d]=255&a,d+=p,a/=256,l-=8);t[n+d-p]|=128*g}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}},a=!0;try{e[t](o,o.exports,r),a=!1}finally{a&&delete n[t]}return o.exports}r.ab="//";var i=r(72);t.exports=i}()},4227:function(t){!function(){var e={229:function(t){var e,n,r,i=t.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function u(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var s=[],l=!1,c=-1;function h(){l&&r&&(l=!1,r.length?s=r.concat(s):c=-1,s.length&&f())}function f(){if(!l){var t=u(h);l=!0;for(var e=s.length;e;){for(r=s,s=[];++c<e;)r&&r[c].run();c=-1,e=s.length}r=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new d(t,e)),1!==s.length||l||u(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}},a=!0;try{e[t](o,o.exports,r),a=!1}finally{a&&delete n[t]}return o.exports}r.ab="//";var i=r(229);t.exports=i}()},9900:function(t,e,n){var r=n(4170),i=n(6085),o=n(6543),a=n(1871),u=n(5794),s=n(1849),l=n(3957);l.alea=r,l.xor128=i,l.xorwow=o,l.xorshift7=a,l.xor4096=u,l.tychei=s,t.exports=l},4170:function(t,e,n){var r;!function(t,i,o){function a(t){var e,n=this,r=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return(e>>>0)*23283064365386963e-26});n.next=function(){var t=2091639*n.s0+23283064365386963e-26*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1)}function u(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function s(t,e){var n=new a(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+(2097152*i()|0)*11102230246251565e-32},i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0!==(r=(function(){return s}).call(e,n,e,i))&&(i.exports=r):this.alea=s}(0,t=n.nmd(t),n.amdD)},1849:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function u(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function s(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0!==(r=(function(){return s}).call(e,n,e,i))&&(i.exports=r):this.tychei=s}(0,t=n.nmd(t),n.amdD)},6085:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function u(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function s(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0!==(r=(function(){return s}).call(e,n,e,i))&&(i.exports=r):this.xor128=s}(0,t=n.nmd(t),n.amdD)},5794:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,a,u=[],s=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,s=Math.max(s,e.length)),i=0,o=-32;o<s;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=u[127&o]^=r+a)?i+1:0);for(i>=128&&(u[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=u[i+34&127],n=u[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[i]=r^n;t.w=a,t.X=u,t.i=i}(e,t)}function u(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function s(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.X&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0!==(r=(function(){return s}).call(e,n,e,i))&&(i.exports=r):this.xor4096=s}(0,t=n.nmd(t),n.amdD)},1871:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],t^=t>>>7,n=t^t<<24^((t=r[i+1&7])^t>>>10)^((t=r[i+3&7])^t>>>3)^((t=r[i+4&7])^t<<7),t=r[i+7&7],t^=t<<13,n^=t^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(n=0,e=""+e;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function u(t,e){return e.x=t.x.slice(),e.i=t.i,e}function s(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.x&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0!==(r=(function(){return s}).call(e,n,e,i))&&(i.exports=r):this.xorshift7=s}(0,t=n.nmd(t),n.amdD)},6543:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^(t^t<<1))|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function u(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function s(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0!==(r=(function(){return s}).call(e,n,e,i))&&(i.exports=r):this.xorwow=s}(0,t=n.nmd(t),n.amdD)},3957:function(t,e,n){var r;!function(i,o,a){var u,s=a.pow(256,6),l=a.pow(2,52),c=2*l;function h(t,e,n){var r=[],h=p(function t(e,n){var r,i=[],o=typeof e;if(n&&"object"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==o?e:e+"\0"}((e=!0==e?{entropy:!0}:e||{}).entropy?[t,g(o)]:null==t?function(){try{var t;return u&&(t=u.randomBytes)?t=t(256):(t=new Uint8Array(256),(i.crypto||i.msCrypto).getRandomValues(t)),g(t)}catch(t){var e=i.navigator,n=e&&e.plugins;return[+new Date,i,n,i.screen,g(o)]}}():t,3),r),m=new f(r),y=function(){for(var t=m.g(6),e=s,n=0;t<l;)t=(t+n)*256,e*=256,n=m.g(1);for(;t>=c;)t/=2,e/=2,n>>>=1;return(t+n)/e};return y.int32=function(){return 0|m.g(4)},y.quick=function(){return m.g(4)/4294967296},y.double=y,p(g(m.S),o),(e.pass||n||function(t,e,n,r){return(r&&(r.S&&d(r,m),t.state=function(){return d(m,{})}),n)?(a.random=t,e):t})(y,h,"global"in e?e.global:this==a,e.state)}function f(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[o=255&o+t[i%n]+(e=a[i])],a[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,a=r.S;t--;)e=a[i=255&i+1],n=256*n+a[255&(a[i]=a[o=255&o+e])+(a[o]=e)];return r.i=i,r.j=o,n})(256)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function p(t,e){for(var n,r=t+"",i=0;i<r.length;)e[255&i]=255&(n^=19*e[255&i])+r.charCodeAt(i++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(p(a.random(),o),t.exports){t.exports=h;try{u=n(5042)}catch(t){}}else void 0!==(r=(function(){return h}).call(e,n,e,t))&&(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)}}]);