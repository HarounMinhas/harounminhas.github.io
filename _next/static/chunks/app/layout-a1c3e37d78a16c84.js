(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8704:function(t,e,n){Promise.resolve().then(n.t.bind(n,7960,23)),Promise.resolve().then(n.bind(n,5435)),Promise.resolve().then(n.t.bind(n,2972,23))},5435:function(t,e,n){"use strict";n.d(e,{default:function(){return a}});var r=n(7437),i=n(2265),o=n(9376),s=n(1525);function a(){let[t,e]=(0,i.useState)(""),[n,a]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),l=(0,o.useRouter)();(0,i.useEffect)(()=>{let t=!1;return async function(){try{let e=null;{let t=sessionStorage.getItem("all-opportunities");if(t)try{e=JSON.parse(t)}catch(t){}}let n=e||await (0,s.Oj)();if(t)return;u(n),e||sessionStorage.setItem("all-opportunities",JSON.stringify(n))}catch(t){console.error(t)}}(),()=>{t=!0}},[]),(0,i.useEffect)(()=>{if(!t){a([]);return}let e=t.toLowerCase();a(c.filter(t=>t.title.toLowerCase().includes(e)).slice(0,5))},[t,c]);let p=t=>{l.push("/opportunities?id=".concat(encodeURIComponent(t))),a([]),e("")};return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),t.trim()&&(l.push("/opportunities?search=".concat(encodeURIComponent(t.trim()))),a([]))},children:(0,r.jsx)("input",{type:"text",value:t,onChange:t=>e(t.target.value),placeholder:"Search...",className:"w-48 rounded border px-3 py-1 text-sm","aria-label":"Search opportunities"})}),n.length>0&&(0,r.jsx)("ul",{className:"absolute z-10 mt-1 w-48 rounded border bg-white text-sm",children:n.map(t=>(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"block w-full px-3 py-1 text-left hover:bg-gray-100",onClick:()=>p(t.id),children:t.title})},t.id))})]})}},1525:function(t,e,n){"use strict";n.d(e,{Oj:function(){return s},ZY:function(){return o}});let r="https://api.artconnect.com/v1";async function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new URL(r+"/opportunities/");e.searchParams.set("page",String(t));let n=await fetch(e.toString(),{headers:{Accept:"application/json"}});if(409===n.status)throw Error("409");if(!n.ok)throw Error("List fetch failed: ".concat(n.status));return await n.json()}async function o(t){async function e(){let n=await fetch("".concat(r,"/opportunities/").concat(encodeURIComponent(t),"/"),{headers:{Accept:"application/json"}});if(409===n.status)return await new Promise(t=>setTimeout(t,1e3)),e();if(!n.ok)throw Error("Detail fetch failed: ".concat(n.status));return await n.json()}return e()}async function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,n=1,r=[];for(;;){let o;try{o=await i(n)}catch(t){if("string"==typeof t.message&&t.message.includes("409")){await new Promise(t=>setTimeout(t,1e3));continue}throw t}if(r.push(...o.data),t&&t(r.slice(),n,o.pages),!o.pages||n>=o.pages)break;n++,e>0&&await new Promise(t=>setTimeout(t,e))}return r}},7960:function(){}},function(t){t.O(0,[587,965,971,117,744],function(){return t(t.s=8704)}),_N_E=t.O()}]);