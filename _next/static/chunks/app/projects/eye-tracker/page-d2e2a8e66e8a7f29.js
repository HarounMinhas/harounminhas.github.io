(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851],{3529:function(e,t,n){Promise.resolve().then(n.bind(n,596))},3072:function(e,t,n){"use strict";var a=n(7437),r=n(2265),o=n(257);let c=["2025-11-16T15:35:34Z",o.env.NEXT_PUBLIC_BUILD_TIMESTAMP,o.env.NEXT_PUBLIC_BUILD_TIME,o.env.NEXT_PUBLIC_VERCEL_DEPLOYMENT_DATETIME],l=e=>e.toString().padStart(2,"0"),i=e=>{let t=l(e.getDate()),n=l(e.getMonth()+1),a=e.getFullYear(),r=l(e.getHours()),o=l(e.getMinutes()),c=l(e.getSeconds()),i=-e.getTimezoneOffset(),s=Math.abs(i),u=l(Math.floor(s/60)),d=l(s%60);return"".concat(t,"-").concat(n,"-").concat(a," ").concat(r,":").concat(o,":").concat(c," (UTC").concat(i>=0?"+":"-").concat(u,":").concat(d,")")},s=e=>{let t=e.trim();if(!t)return null;let n=new Date(t);if(Number.isNaN(n.getTime())){let e=Number.parseInt(t,10);Number.isNaN(e)||(n=new Date(10===t.length?1e3*e:e))}return Number.isNaN(n.getTime())?null:n},u=Object.freeze({rawValue:null,displayValue:null,isParsed:!1}),d=e=>{var t;return null!==(t=e.find(e=>"string"==typeof e&&e.trim().length>0))&&void 0!==t?t:null},g=function(e){var t,n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=d(e);if(!r)return u;let o=r.trim(),c=null!==(t=a.parse)&&void 0!==t?t:s,l=null!==(n=a.format)&&void 0!==n?n:i,g=c(o);return g?{rawValue:o,displayValue:l(g),isParsed:!0}:{rawValue:o,displayValue:"Onbekend formaat (".concat(o,")"),isParsed:!1}},m=e=>{let t="rounded-lg border border-sky-200 bg-sky-50 px-4 py-3 text-sm text-sky-900 shadow-sm";return e?"".concat(t," ").concat(e):t},h=(e,t)=>e.rawValue===t.rawValue&&e.displayValue===t.displayValue&&e.isParsed===t.isParsed;t.default=e=>{let{className:t}=e,[n,o]=(0,r.useState)(u);(0,r.useEffect)(()=>{let e=g(c);o(t=>h(t,e)?t:e)},[]);let{rawValue:l,displayValue:i,isParsed:s}=n,d=m(t);return(0,a.jsxs)("div",{className:d,title:null!=l?l:void 0,children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-sky-900",children:"Versie gedeployed op:"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-sky-800",children:null!=i?i:"Versie-informatie niet beschikbaar"}),l&&(0,a.jsxs)("p",{className:"mt-2 text-xs text-sky-600",children:["Bronstempel: ",(0,a.jsx)("code",{className:"rounded bg-sky-100 px-1 py-0.5 text-sky-700",children:l}),!s&&" — controleer het formaat van deze waarde."]})]})}},596:function(e,t,n){"use strict";n.r(t);var a=n(7437),r=n(2265),o=n(3072);let c=[33,133,160,159,158,157,173,155,154,153,145,144,163,7,246,161],l=[362,263,387,386,385,384,398,382,381,380,374,373,390,249,466,388],i="[EyeTracker]",s={idle:"",searching:"Zoeken naar gezicht en ogen...",detected:"Ogen gedetecteerd! Live tracking actief."},u=(e,t,n)=>Number.isNaN(e)?t:Math.min(Math.max(e,t),n),d=(e,t,n)=>{let{width:a,height:r}=n,o=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=!1;if(t.forEach(t=>{let n=e[t];if(!n)return;let u=n.x,d=n.y;Number.isFinite(u)&&Number.isFinite(d)&&(1.5>=Math.abs(u)&&1.5>=Math.abs(d)&&(u*=a,d*=r),o=Math.min(o,u),c=Math.min(c,d),l=Math.max(l,u),i=Math.max(i,d),s=!0)}),!s)return null;let d=u(o,0,a),g=u(c,0,r);return{x:d,y:g,width:Math.max(0,u(l,0,a)-d),height:Math.max(0,u(i,0,r)-g)}};t.default=()=>{let e=(0,r.useRef)(null),t=(0,r.useRef)(null),u=(0,r.useRef)(null),g=(0,r.useRef)(),m=(0,r.useRef)(null),h=(0,r.useRef)(null),f=(0,r.useRef)(0),p=(0,r.useRef)("idle"),[y,v]=(0,r.useState)("Loading the eye tracking model. This usually takes a few seconds..."),[x,b]=(0,r.useState)(null),[k,w]=(0,r.useState)(!1),[N,T]=(0,r.useState)(!1),[E,S]=(0,r.useState)(!1),[j,C]=(0,r.useState)("idle"),[M,I]=(0,r.useState)(""),D=(0,r.useCallback)(e=>{console.log("".concat(i," Status update: ").concat(e||"(leeg)")),v(e)},[v]),F=(0,r.useCallback)(e=>{e?console.log("".concat(i," Error message set: ").concat(e)):console.log("".concat(i," Error message cleared.")),b(e)},[b]),P=(0,r.useCallback)(e=>{if(p.current===e)return;p.current=e,C(e);let t=s[e];I(t),console.log("".concat(i,' Detection state changed to "').concat(e,'"').concat(t?" (".concat(t,")"):"","."))},[I,C]),_=(0,r.useCallback)(e=>{h.current!==e&&(h.current=e,console.log("".concat(i," ").concat(e)))},[]),V=(0,r.useCallback)(()=>{let e=t.current;if(!e){console.log("".concat(i," Skipping canvas clear: canvas element is missing."));return}let n=e.getContext("2d");if(!n){console.log("".concat(i," Skipping canvas clear: 2D context unavailable."));return}n.clearRect(0,0,e.width,e.height),console.log("".concat(i," Canvas cleared."))},[]),L=(0,r.useCallback)(async()=>{let n;let a=e.current,r=t.current,o=u.current;if(!a||!r||!o){let e=[a?null:"video element",r?null:"canvas element",o?null:"detector"].filter(Boolean).join(", ");e&&_("Detection skipped: missing ".concat(e,".")),P("searching");return}if(a.readyState<HTMLMediaElement.HAVE_ENOUGH_DATA){_("Detection waiting: video readyState ".concat(a.readyState," is insufficient for processing.")),P("searching");return}if(!a.videoWidth||!a.videoHeight){_("Detection waiting: video dimensions are not available yet."),P("searching");return}(r.width!==a.videoWidth||r.height!==a.videoHeight)&&(console.log("".concat(i," Resizing canvas overlay to ").concat(a.videoWidth,"x").concat(a.videoHeight,".")),r.width=a.videoWidth,r.height=a.videoHeight);try{n=await o.estimateFaces(a,{flipHorizontal:!1})}catch(e){console.error("".concat(i," Error while estimating faces."),e),_("Detection error: the model could not estimate facial landmarks."),P("searching");return}let s=r.getContext("2d");if(!s){_("Detection skipped: unable to access the 2D canvas context."),P("searching");return}if(s.clearRect(0,0,r.width,r.height),!n.length){_("Geen gezicht gedetecteerd in dit frame."),P("searching");return}n.length>1&&console.log("".concat(i," ").concat(n.length," gezichten gedetecteerd. De eerste wordt gebruikt voor tracking."));let{keypoints:g}=n[0],m={width:r.width,height:r.height},p=[{label:"linker",box:d(g,c,m)},{label:"rechter",box:d(g,l,m)}],y=p.filter(e=>{let{box:t}=e;return!t}).map(e=>{let{label:t}=e;return t});s.lineWidth=3,s.strokeStyle="#22d3ee",s.fillStyle="rgba(34, 211, 238, 0.2)";let v=!1;if(p.forEach(e=>{let{box:t}=e;t&&(v=!0,s.fillRect(t.x,t.y,t.width,t.height),s.strokeRect(t.x,t.y,t.width,t.height))}),!v){_("Geen geldige oogkaders gevonden, hoewel er een gezicht is gedetecteerd."),P("searching");return}y.length>0?_("Niet alle ogen konden worden gevolgd: ".concat(y.join(" en "),".")):h.current=null,P("detected");let x=Date.now();if(x-f.current>=750){f.current=x;let e=p.map(e=>{let{label:t,box:n}=e;return n?"".concat(t," oog → x=").concat(n.x.toFixed(1),", y=").concat(n.y.toFixed(1),", w=").concat(n.width.toFixed(1),", h=").concat(n.height.toFixed(1)):"".concat(t," oog → niet gevonden")}).join(" | ");console.log("".concat(i," ").concat(e))}},[_,P]);(0,r.useEffect)(()=>{console.log("".concat(i," Component mounted. Initialising detector."));let t=!1;(async()=>{try{D("Loading the eye tracking model. This usually takes a few seconds..."),console.log("".concat(i," Loading TensorFlow and face landmarks model."));let[{createDetector:e,SupportedModels:a},r]=await Promise.all([Promise.all([n.e(434),n.e(94),n.e(269),n.e(315),n.e(914)]).then(n.bind(n,7315)),Promise.all([n.e(434),n.e(94),n.e(682)]).then(n.bind(n,9094))]);if(await Promise.all([Promise.all([n.e(938),n.e(498),n.e(434),n.e(94),n.e(568),n.e(119)]).then(n.bind(n,1941)),Promise.all([n.e(434),n.e(94),n.e(269),n.e(920)]).then(n.bind(n,5269))]),console.log("".concat(i," TensorFlow packages imported.")),await r.setBackend("webgl"),console.log("".concat(i," TensorFlow backend set to WebGL.")),await r.ready(),console.log("".concat(i," TensorFlow backend ready.")),t){console.log("".concat(i," Detector load cancelled before creation."));return}let o=await e(a.MediaPipeFaceMesh,{runtime:"tfjs",refineLandmarks:!0,maxFaces:1});if(console.log("".concat(i," Face landmarks detector created.")),t){console.log("".concat(i," Detector load cancelled after creation. Disposing instance.")),await o.dispose();return}u.current=o,T(!0),console.log("".concat(i," Detector ready for use.")),D("Model ready. Start the camera to begin tracking your eyes.")}catch(e){console.error("".concat(i," Failed to load detector."),e),t||(F("We couldn't load the eye tracking model. Please refresh the page and try again."),D(""))}})();let a=e.current;return()=>{if(console.log("".concat(i," Cleaning up detector and media resources.")),t=!0,g.current&&(console.log("".concat(i," Cancelling animation frame ").concat(g.current,".")),cancelAnimationFrame(g.current),g.current=void 0),u.current&&(console.log("".concat(i," Disposing detector instance during cleanup.")),u.current.dispose(),u.current=null),a){console.log("".concat(i," Releasing video element resources.")),a.pause();let{srcObject:e}=a;e instanceof MediaStream&&e.getTracks().forEach(e=>{console.log("".concat(i," Stopping video element track (").concat(e.kind,").")),e.stop()}),a.srcObject=null}m.current&&(console.log("".concat(i," Stopping stored media stream tracks.")),m.current.getTracks().forEach(e=>{console.log("".concat(i," Stopping stored track (").concat(e.kind,").")),e.stop()}),m.current=null),P("idle")}},[P,F,D]),(0,r.useEffect)(()=>{if(!k)return;console.log("".concat(i," Starting detection loop.")),P("searching");let e=!1,t=async()=>{e||(await L(),g.current=requestAnimationFrame(t))};return g.current=requestAnimationFrame(t),console.log("".concat(i," First detection frame requested: ").concat(g.current,".")),()=>{console.log("".concat(i," Stopping detection loop.")),e=!0,g.current&&(cancelAnimationFrame(g.current),g.current=void 0)}},[k,L,P]),(0,r.useEffect)(()=>{k&&N&&D("Camera active. Keep your eyes in view to see the live tracking.")},[k,N,D]);let O=async()=>{var t;if(console.log("".concat(i," Start camera requested.")),!(null===(t=navigator.mediaDevices)||void 0===t?void 0:t.getUserMedia)){F("Camera access isn't supported in this browser. Please try a different one."),D("Camera inactive.");return}if(E){console.log("".concat(i," Start camera ignored: already starting."));return}if(k){console.log("".concat(i," Start camera ignored: camera already active."));return}F(null),S(!0),console.log("".concat(i," Requesting user media."));try{let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});console.log("".concat(i," Media stream received.")),m.current=t;let n=e.current;if(!n)throw Error("Video element missing");n.srcObject=t,console.log("".concat(i," Video element linked to media stream.")),await n.play(),console.log("".concat(i," Video playback started.")),w(!0),console.log("".concat(i," Camera marked as active.")),D(N?"Camera active. Keep your eyes in view to see the live tracking.":"Camera active. Eye tracking will start as soon as the model finishes loading."),P("searching")}catch(n){console.error("".concat(i," Unable to start the camera."),n),F("We couldn't access the camera. Please check your permissions and try again."),D("Camera inactive."),m.current&&(m.current.getTracks().forEach(e=>{console.log("".concat(i," Stopping track after failure (").concat(e.kind,").")),e.stop()}),m.current=null);let t=e.current;t&&(t.srcObject=null),P("idle")}finally{S(!1),console.log("".concat(i," Start camera sequence completed."))}},R=(0,r.useCallback)(()=>{console.log("".concat(i," Stop camera requested."));let t=e.current;(null==t?void 0:t.srcObject)instanceof MediaStream&&(console.log("".concat(i," Stopping ").concat(t.srcObject.getTracks().length," track(s) from the video element.")),t.srcObject.getTracks().forEach(e=>{console.log("".concat(i," Stopping video element track (").concat(e.kind,").")),e.stop()}),t.srcObject=null),m.current&&(console.log("".concat(i," Releasing stored media stream.")),m.current.getTracks().forEach(e=>{console.log("".concat(i," Stopping stored track (").concat(e.kind,").")),e.stop()}),m.current=null),t&&t.pause(),V(),w(!1),console.log("".concat(i," Camera marked as inactive.")),P("idle"),D("Camera stopped. Start the camera again to resume tracking.")},[V,P,D]);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(o.default,{className:"max-w-2xl"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold",children:"Live Eye Tracking Camera"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Allow camera access to preview the live video feed. Once the model detects your face, glowing squares will follow your eyes in real time."})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:O,disabled:E||k,className:"rounded-md bg-sky-500 px-4 py-2 text-white transition hover:bg-sky-600 disabled:cursor-not-allowed disabled:opacity-60",children:E?"Starting camera...":"Start camera"}),k&&(0,a.jsx)("button",{type:"button",onClick:R,className:"rounded-md border border-gray-300 px-4 py-2 text-gray-700 transition hover:bg-gray-100",children:"Stop camera"})]}),(0,a.jsxs)("div",{className:"relative w-full max-w-3xl overflow-hidden rounded-xl bg-black",children:[(0,a.jsx)("video",{ref:e,className:"h-full w-full object-cover",playsInline:!0,autoPlay:!0,muted:!0}),(0,a.jsx)("canvas",{ref:t,className:"pointer-events-none absolute inset-0 h-full w-full"}),!k&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center px-6 text-center text-sm font-medium text-white/80",children:"Camera preview will appear here once you start the camera."})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[y&&(0,a.jsx)("p",{className:"text-sm text-gray-700",children:y}),M&&(0,a.jsx)("p",{className:"text-sm ".concat("detected"===j?"text-emerald-600":"text-sky-600"),children:M}),x&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:x})]}),(0,a.jsxs)("div",{className:"space-y-2 rounded-lg border border-dashed border-gray-300 bg-gray-50 p-4 text-sm text-gray-600",children:[(0,a.jsx)("p",{className:"font-medium",children:"Tips for best results"}),(0,a.jsxs)("ul",{className:"list-disc space-y-1 pl-5",children:[(0,a.jsx)("li",{children:"Make sure you are in a well-lit environment so your eyes are easy to detect."}),(0,a.jsx)("li",{children:"Position your face roughly one arm's length away from the camera."}),(0,a.jsx)("li",{children:"Keep your eyes visible and avoid heavy glare from glasses."})]})]})]})}},257:function(e,t,n){"use strict";var a,r;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,a,r=e.exports={};function o(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:c}catch(e){n=c}}();var i=[],s=!1,u=-1;function d(){s&&a&&(s=!1,a.length?i=a.concat(i):u=-1,i.length&&g())}function g(){if(!s){var e=l(d);s=!0;for(var t=i.length;t;){for(a=i,i=[];++u<t;)a&&a[u].run();u=-1,t=i.length}a=null,s=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new m(e,t)),1!==i.length||s||l(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}},c=!0;try{t[e](o,o.exports,a),c=!1}finally{c&&delete n[e]}return o.exports}a.ab="//";var r=a(229);e.exports=r}()}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3529)}),_N_E=e.O()}]);