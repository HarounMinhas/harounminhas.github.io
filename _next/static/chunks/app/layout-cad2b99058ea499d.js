(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8704:function(e,t,n){Promise.resolve().then(n.t.bind(n,7960,23)),Promise.resolve().then(n.bind(n,5435)),Promise.resolve().then(n.t.bind(n,2972,23))},5435:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var s=n(7437),i=n(2265),r=n(9376),a=n(1525);function o(){let[e,t]=(0,i.useState)(""),[n,o]=(0,i.useState)([]),[c,l]=(0,i.useState)([]),u=(0,r.useRouter)();(0,i.useEffect)(()=>{let e=!1;return async function(){try{let t=null;{let e=sessionStorage.getItem("all-opportunities");if(e)try{t=JSON.parse(e)}catch(e){}}let n=t||await (0,a.Oj)();if(e)return;l(n),t||sessionStorage.setItem("all-opportunities",JSON.stringify(n))}catch(e){console.error(e)}}(),()=>{e=!0}},[]),(0,i.useEffect)(()=>{if(!e){o([]);return}let t=e.toLowerCase();o(c.filter(e=>e.title.toLowerCase().includes(t)).slice(0,5))},[e,c]);let p=e=>{u.push("/opportunities?id=".concat(encodeURIComponent(e))),o([]),t("")};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&(u.push("/opportunities?search=".concat(encodeURIComponent(e.trim()))),o([]))},className:"relative",children:[(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2 text-gray-500",children:(0,s.jsx)("i",{className:"bi bi-search"})}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search...",className:"w-48 rounded border pl-8 pr-3 py-1 text-sm","aria-label":"Search opportunities"})]}),n.length>0&&(0,s.jsx)("ul",{className:"absolute z-10 mt-1 w-48 rounded border bg-white text-sm",children:n.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"block w-full px-3 py-1 text-left hover:bg-gray-100",onClick:()=>p(e.id),children:e.title})},e.id))})]})}},1525:function(e,t,n){"use strict";n.d(t,{Oj:function(){return a},ZY:function(){return r}});let s="https://api.artconnect.com/v1";async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new URL(s+"/opportunities/");t.searchParams.set("page",String(e));let n=await fetch(t.toString(),{headers:{Accept:"application/json"}});if(409===n.status)throw Error("409");if(!n.ok)throw Error("List fetch failed: ".concat(n.status));return await n.json()}async function r(e){async function t(){let n=await fetch("".concat(s,"/opportunities/").concat(encodeURIComponent(e),"/"),{headers:{Accept:"application/json"}});return n.ok?await n.json():(await new Promise(e=>setTimeout(e,1e3)),t())}return t()}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=1,s=[];for(;;){let r;try{r=await i(n)}catch(e){await new Promise(e=>setTimeout(e,1e3));continue}if(s.push(...r.data),e&&e(s.slice(),n,r.pages),!r.pages||n>=r.pages)break;n++,t>0&&await new Promise(e=>setTimeout(e,t))}return s}},7960:function(){}},function(e){e.O(0,[587,965,971,117,744],function(){return e(e.s=8704)}),_N_E=e.O()}]);