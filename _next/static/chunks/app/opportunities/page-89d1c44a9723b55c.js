(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[237],{9480:function(e,a,t){Promise.resolve().then(t.bind(t,4344))},4344:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return B}});var r,i,n=t(7437),l=t(2265),s=t(9376),o=t(1525);function c(e){return e?i[e]||e:null!=e?e:void 0}function d(e){let{children:a,className:t}=e;return(0,n.jsx)("span",{className:"rounded px-2 py-0.5 text-xs ".concat(t),children:a})}function u(e){let{type:a}=e;return a?(0,n.jsx)(d,{className:"bg-blue-100 text-blue-800",children:a.replace(/_/g," ")}):null}function p(e){let{text:a}=e;return(0,n.jsx)(d,{className:"bg-yellow-100 text-yellow-800",children:a})}function m(e){let{text:a}=e;return(0,n.jsx)(d,{className:"bg-green-100 text-green-800",children:a})}function h(){return(0,n.jsx)(d,{className:"bg-pink-100 text-pink-800",children:"Sponsored"})}function g(e){var a,t,r,i,l;let{item:s,onClick:o}=e,d=[s.profile.city,c(s.profile.country)].filter(Boolean).join(", "),g=s.rewards&&s.rewards.rewardTypes&&s.rewards.rewardTypes.length>0;return(0,n.jsxs)("button",{onClick:o,className:"flex w-full flex-col overflow-hidden rounded border bg-white text-left shadow-sm hover:shadow-md focus:outline-none focus:ring","aria-label":"View details for ".concat(s.title),children:[(0,n.jsx)("div",{className:"h-40 w-full overflow-hidden bg-gray-100",children:s.profile.profileImageUrl?(0,n.jsx)("img",{src:s.profile.profileImageUrl,alt:"".concat(s.profile.organizationName," logo"),className:"h-full w-full object-cover"}):(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center text-gray-400",children:"No image"})}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-2 p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:s.title}),(null===(a=s.boost)||void 0===a?void 0:a.isHighlighted)&&(0,n.jsx)(h,{})]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,n.jsx)("span",{children:s.profile.organizationName}),s.profile.verified?(0,n.jsx)("span",{className:"ml-1","aria-label":"verified",children:"✔️"}):null]}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:d}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,n.jsx)(u,{type:s.type}),(0,n.jsx)(p,{text:function(e){if("FREE"===e.fee)return"Free";if(e.applicationFees&&e.applicationFees.length>0){let a=e.applicationFees[0];return"".concat(a.price," ").concat(a.currency)}return e.fee?e.fee:"No fee"}(s)}),g?s.rewards.rewardTypes.map(e=>(0,n.jsx)(m,{text:e},e)):(null===(t=s.rewards)||void 0===t?void 0:t.rewardDescription)&&(0,n.jsx)(m,{text:s.rewards.rewardDescription.slice(0,20)})]}),(0,n.jsx)("div",{className:"text-sm text-gray-700",children:(l=null===(i=s.description)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.content)?l.replace(/\n+/g," ").slice(0,200)+(l.length>200?"…":""):""}),(0,n.jsxs)("div",{className:"mt-auto text-sm font-medium",children:["Deadline: ",function(e){if(!e)return"No deadline";try{return new Date(e).toLocaleDateString()}catch(a){return e}}(s.deadline)]})]})]})}function x(e){var a,t,r,i,l;let{item:s,onClick:o}=e,d=[s.profile.city,c(s.profile.country)].filter(Boolean).join(", "),g=s.rewards&&s.rewards.rewardTypes&&s.rewards.rewardTypes.length>0;return(0,n.jsxs)("button",{onClick:o,className:"list-group-item list-group-item-action d-flex gap-3 py-3 text-start","aria-label":"View details for ".concat(s.title),style:{marginBottom:10},children:[s.profile.profileImageUrl?(0,n.jsx)("img",{src:s.profile.profileImageUrl,alt:"".concat(s.profile.organizationName," logo"),width:100,height:100,className:"rounded object-cover flex-shrink-0",style:{objectFit:"cover"}}):(0,n.jsx)("div",{className:"rounded flex-shrink-0 bg-gray-200 d-flex align-items-center justify-content-center",style:{width:100,height:100},children:"N/A"}),(0,n.jsxs)("div",{className:"d-flex gap-2 w-100 justify-content-between",children:[(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[(0,n.jsx)("h6",{className:"mb-0",children:s.title}),(null===(a=s.boost)||void 0===a?void 0:a.isHighlighted)&&(0,n.jsx)(h,{})]}),(0,n.jsxs)("div",{className:"mb-1 text-sm text-muted",children:[s.profile.organizationName,s.profile.verified?(0,n.jsx)("span",{className:"ms-1","aria-label":"verified",children:"✔️"}):null,d?(0,n.jsxs)("span",{children:[" – ",d]}):null]}),(0,n.jsxs)("div",{className:"d-flex flex-wrap gap-1 mb-1",children:[(0,n.jsx)(u,{type:s.type}),(0,n.jsx)(p,{text:function(e){if("FREE"===e.fee)return"Free";if(e.applicationFees&&e.applicationFees.length>0){let a=e.applicationFees[0];return"".concat(a.price," ").concat(a.currency)}return e.fee?e.fee:"No fee"}(s)}),g?s.rewards.rewardTypes.map(e=>(0,n.jsx)(m,{text:e},e)):(null===(t=s.rewards)||void 0===t?void 0:t.rewardDescription)&&(0,n.jsx)(m,{text:s.rewards.rewardDescription.slice(0,20)})]}),(0,n.jsx)("p",{className:"mb-0 opacity-75",children:(l=null===(i=s.description)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.content)?l.replace(/\n+/g," ").slice(0,200)+(l.length>200?"…":""):""})]}),(0,n.jsx)("small",{className:"opacity-50 text-nowrap",children:function(e){if(!e)return"No deadline";try{return new Date(e).toLocaleDateString()}catch(a){return e}}(s.deadline)})]})]})}function f(){return(0,n.jsxs)("div",{className:"flex w-full flex-col overflow-hidden rounded border bg-white p-4 shadow-sm animate-pulse",children:[(0,n.jsx)("div",{className:"mb-4 h-40 w-full bg-gray-200"}),(0,n.jsx)("div",{className:"mb-2 h-4 w-3/4 bg-gray-200"}),(0,n.jsx)("div",{className:"mb-2 h-3 w-1/2 bg-gray-200"}),(0,n.jsx)("div",{className:"h-3 w-full bg-gray-200"})]})}function y(e){let{page:a,totalPages:t,onPageChange:r}=e;if(!t||t<=1)return null;let i=Array.from({length:t},(e,a)=>a+1);return(0,n.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2","aria-label":"Pagination navigation",children:[(0,n.jsx)("button",{className:"rounded border px-2 py-1 text-sm disabled:opacity-50",onClick:()=>r(a-1),disabled:a<=1,"aria-label":"Previous page",children:"Prev"}),i.map(e=>(0,n.jsx)("button",{className:"rounded border px-2 py-1 text-sm ".concat(e===a?"bg-gray-200":""),onClick:()=>r(e),"aria-current":e===a?"page":void 0,children:e},e)),(0,n.jsx)("button",{className:"rounded border px-2 py-1 text-sm disabled:opacity-50",onClick:()=>r(a+1),disabled:a>=t,"aria-label":"Next page",children:"Next"})]})}function v(e){let{value:a,onChange:t}=e;return(0,n.jsxs)("select",{"aria-label":"Sort opportunities",className:"rounded border px-2 py-1 text-sm",value:a,onChange:e=>t(e.target.value),children:[(0,n.jsx)("option",{value:"-deadline",children:"Deadline (latest)"}),(0,n.jsx)("option",{value:"deadline",children:"Deadline (earliest)"}),(0,n.jsx)("option",{value:"-createdAt",children:"Newest"})]})}function j(e){let{value:a,onChange:t}=e;return(0,n.jsxs)("select",{"aria-label":"Items per page",className:"rounded border px-2 py-1 text-sm",value:String(a),onChange:e=>t(e.target.value),children:[(0,n.jsx)("option",{value:"20",children:"20"}),(0,n.jsx)("option",{value:"40",children:"40"}),(0,n.jsx)("option",{value:"0",children:"All"})]})}function b(e){let{label:a,options:t,selected:r,onChange:i,open:s,onToggle:o,onClose:c}=e,d=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=e=>{s&&d.current&&!d.current.contains(e.target)&&c()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s,c]);let u=e=>{r.includes(e)?i(r.filter(a=>a!==e)):i([...r,e])};return(0,n.jsxs)("div",{className:"relative",ref:d,children:[(0,n.jsx)("button",{type:"button","aria-haspopup":"listbox","aria-expanded":s,onClick:o,className:"rounded border px-2 py-1 text-sm",children:r.length?"".concat(a," (").concat(r.length,")"):a}),s&&(0,n.jsx)("div",{className:"absolute z-10 mt-1 w-56 max-h-60 overflow-y-auto rounded border bg-white shadow",children:t.map(e=>(0,n.jsxs)("label",{className:"flex cursor-pointer gap-2 border-b p-2 last:border-b-0",children:[(0,n.jsx)("input",{type:"checkbox",className:"form-checkbox mt-1",checked:r.includes(e.value),onChange:()=>u(e.value)}),(0,n.jsxs)("span",{className:"text-sm",children:[e.label,e.description&&(0,n.jsx)("small",{className:"block text-xs text-gray-500",children:e.description})]})]},e.value))})]})}function N(e){let{type:a=[],city:t=[],country:r=[],pageLength:i,onChange:s,typeOptions:o=[],countryOptions:c=[],cityOptions:d=[],view:u,onViewChange:p}=e,[m,h]=(0,l.useState)(null);return(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(b,{label:"Type",options:o,selected:a,onChange:e=>s("type",e),open:"type"===m,onToggle:()=>h("type"===m?null:"type"),onClose:()=>h(null)}),(0,n.jsx)(b,{label:"Country",options:c,selected:r,onChange:e=>s("country",e),open:"country"===m,onToggle:()=>h("country"===m?null:"country"),onClose:()=>h(null)}),(0,n.jsx)(b,{label:"City",options:d,selected:t,onChange:e=>s("city",e),open:"city"===m,onToggle:()=>h("city"===m?null:"city"),onClose:()=>h(null)}),(0,n.jsx)(j,{value:i,onChange:e=>s("pageLength",e)}),(0,n.jsxs)("div",{className:"flex items-center gap-1 ml-auto",children:[(0,n.jsx)("button",{type:"button",className:"p-1 ".concat("grid"===u?"text-primary":"text-gray-500"),onClick:()=>p("grid"),"aria-label":"Grid view",children:(0,n.jsx)("i",{className:"bi bi-grid"})}),(0,n.jsx)("button",{type:"button",className:"p-1 ".concat("list"===u?"text-primary":"text-gray-500"),onClick:()=>p("list"),"aria-label":"List view",children:(0,n.jsx)("i",{className:"bi bi-list"})})]})]})}function S(){let e=(0,s.useSearchParams)(),a=(0,s.useRouter)(),t=e.get("sortBy")||"-deadline",r=parseInt(e.get("page")||"1",10),i=e.get("type")||"",d=e.get("country")||"",u=e.get("city")||"",p=e.get("search")||"",m=(0,l.useMemo)(()=>i?i.split(",").filter(Boolean):[],[i]),h=(0,l.useMemo)(()=>d?d.split(",").filter(Boolean):[],[d]),j=(0,l.useMemo)(()=>u?u.split(",").filter(Boolean):[],[u]),b=e.get("pageLength"),S=b?parseInt(b,10):20,w="list"===e.get("view")?"list":"grid",[C,M]=(0,l.useState)([]),[A,I]=(0,l.useState)(null),[B,T]=(0,l.useState)(!0),[L,P]=(0,l.useState)(null),[G,k]=(0,l.useState)([]),[E,R]=(0,l.useState)([]),[F,U]=(0,l.useState)([]),[D,K]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(!e.toString()){let e=sessionStorage.getItem("opportunity-search");e&&a.replace("/opportunities?".concat(e))}},[]);let O=e.toString();(0,l.useEffect)(()=>{sessionStorage.setItem("opportunity-search",O)},[O]),(0,l.useEffect)(()=>{let e=!1,a=sessionStorage.getItem("all-opportunities");if(a)try{let e=JSON.parse(a);M(e),K(100);return}catch(e){}return async function(){try{await (0,o.Oj)((a,t,r)=>{!e&&(M(a),sessionStorage.setItem("all-opportunities",JSON.stringify(a)),r&&K(t/r*100))},100)}catch(e){console.error(e),P(e.message)}}(),()=>{e=!0}},[]),(0,l.useEffect)(()=>{let e=(e,a)=>{let t=p.toLowerCase();return e.filter(e=>{var r,i,n,l,s;return(!(null===(r=a.type)||void 0===r?void 0:r.length)||e.type&&a.type.includes(e.type))&&(!(null===(i=a.country)||void 0===i?void 0:i.length)||(null===(n=e.profile)||void 0===n?void 0:n.country)&&a.country.includes(e.profile.country))&&(!(null===(l=a.city)||void 0===l?void 0:l.length)||(null===(s=e.profile)||void 0===s?void 0:s.city)&&a.city.includes(e.profile.city))&&(!p||e.title.toLowerCase().includes(t))})},a=e(C,{country:h,city:j}),t=e(C,{type:m,city:j}),r=e(C,{type:m,country:h}),i=Array.from(new Set(a.map(e=>e.type).filter(e=>!!e))).sort(),n=Array.from(new Set(t.map(e=>{var a;return null===(a=e.profile)||void 0===a?void 0:a.country}).filter(e=>!!e))).sort(),l=Array.from(new Set(r.map(e=>{var a;return null===(a=e.profile)||void 0===a?void 0:a.city}).filter(e=>!!e))).sort();k(i.map(e=>({value:e,label:e}))),R(n.map(e=>({value:e,label:c(e)||e}))),U(l.map(e=>({value:e,label:e})))},[C,m,h,j,p]),(0,l.useEffect)(()=>{T(!0),P(null);try{let e=C;if(m.length&&(e=e.filter(e=>e.type&&m.includes(e.type))),h.length&&(e=e.filter(e=>{var a;return(null===(a=e.profile)||void 0===a?void 0:a.country)&&h.includes(e.profile.country)})),j.length&&(e=e.filter(e=>{var a;return(null===(a=e.profile)||void 0===a?void 0:a.city)&&j.includes(e.profile.city)})),p){let a=p.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(a))}let a=t.startsWith("-")?t.slice(1):t,i=t.startsWith("-")?-1:1;e=e.slice().sort((e,t)=>{let r=e[a],n=t[a];if(!r||!n)return 0;let l=Date.parse(r),s=Date.parse(n);return Number.isNaN(l)||Number.isNaN(s)?String(r).localeCompare(String(n))*i:(l-s)*i});let n=S?Math.ceil(e.length/S):1,l=S?(r-1)*S:0,s=S?e.slice(l,l+S):e;I({data:s,pages:S?n:void 0,entries:e.length})}catch(e){P(e.message)}finally{T(!1)}},[C,t,r,m,h,j,S,p]);let V=e=>{a.push("/opportunities?".concat(e.toString()))},H=a=>{let t=new URLSearchParams(e.toString());t.set("sortBy",a),t.set("page","1"),V(t)},z=t=>{let r=new URLSearchParams(e.toString());r.set("id",t),a.push("/opportunities?".concat(r.toString()))};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-4 flex flex-col gap-2",children:[(0,n.jsx)(N,{type:m,country:h,city:j,pageLength:S,onChange:(a,t)=>{let r=new URLSearchParams(e.toString());Array.isArray(t)?t.length?r.set(a,t.join(",")):r.delete(a):t?r.set(a,t):r.delete(a),r.set("page","1"),V(r)},typeOptions:G,countryOptions:E,cityOptions:F,view:w,onViewChange:a=>{let t=new URLSearchParams(e.toString());t.set("view",a),V(t)}}),(0,n.jsx)("div",{className:"flex items-center justify-end",children:(0,n.jsx)(v,{value:t,onChange:H})})]}),D>0&&D<100&&(0,n.jsx)("div",{className:"progress mb-4",children:(0,n.jsxs)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(D,"%")},"aria-valuenow":D,"aria-valuemin":0,"aria-valuemax":100,children:[Math.round(D),"%"]})}),L&&(0,n.jsxs)("div",{className:"mb-4 rounded border border-red-200 bg-red-50 p-4",children:[(0,n.jsx)("p",{className:"text-red-700",children:"Failed to load opportunities."}),(0,n.jsx)("button",{className:"mt-2 rounded border px-2 py-1",onClick:()=>H(t),"aria-label":"Retry loading opportunities",children:"Retry"})]}),!B||(null==A?void 0:A.data.length)?"grid"===w?(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:null==A?void 0:A.data.map(e=>(0,n.jsx)(g,{item:e,onClick:()=>z(e.id)},e.id))}):(0,n.jsx)("div",{className:"list-group",children:null==A?void 0:A.data.map(e=>(0,n.jsx)(x,{item:e,onClick:()=>z(e.id)},e.id))}):(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:S||20}).map((e,a)=>(0,n.jsx)(f,{},a))}),!L&&A&&0!==S&&(0,n.jsx)(y,{page:r,totalPages:A.pages,onPageChange:a=>{let t=new URLSearchParams(e.toString());t.set("page",String(a)),V(t)}})]})}(r=i||(i={})).AF="Afghanistan",r.AX="\xc5land Islands",r.AL="Albania",r.DZ="Algeria",r.AS="American Samoa",r.AD="Andorra",r.AO="Angola",r.AI="Anguilla",r.AQ="Antarctica",r.AG="Antigua & Barbuda",r.AR="Argentina",r.AM="Armenia",r.AW="Aruba",r.AU="Australia",r.AT="Austria",r.AZ="Azerbaijan",r.BS="Bahamas",r.BH="Bahrain",r.BD="Bangladesh",r.BB="Barbados",r.BY="Belarus",r.BE="Belgium",r.BZ="Belize",r.BJ="Benin",r.BM="Bermuda",r.BT="Bhutan",r.BO="Bolivia",r.BA="Bosnia & Herzegovina",r.BW="Botswana",r.BV="Bouvet Island",r.BR="Brazil",r.IO="British Indian Ocean Territory",r.VG="British Virgin Islands",r.BN="Brunei",r.BG="Bulgaria",r.BF="Burkina Faso",r.BI="Burundi",r.KH="Cambodia",r.CM="Cameroon",r.CA="Canada",r.CV="Cape Verde",r.BQ="Caribbean Netherlands",r.KY="Cayman Islands",r.CF="Central African Republic",r.TD="Chad",r.CL="Chile",r.CN="China",r.CX="Christmas Island",r.CC="Cocos (Keeling) Islands",r.CO="Colombia",r.KM="Comoros",r.CG="Congo - Brazzaville",r.CD="Congo - Kinshasa",r.CK="Cook Islands",r.CR="Costa Rica",r.CI="C\xf4te d’Ivoire",r.HR="Croatia",r.CU="Cuba",r.CW="Cura\xe7ao",r.CY="Cyprus",r.CZ="Czechia",r.DK="Denmark",r.DJ="Djibouti",r.DM="Dominica",r.DO="Dominican Republic",r.EC="Ecuador",r.EG="Egypt",r.SV="El Salvador",r.GQ="Equatorial Guinea",r.ER="Eritrea",r.EE="Estonia",r.SZ="Eswatini",r.ET="Ethiopia",r.FK="Falkland Islands",r.FO="Faroe Islands",r.FJ="Fiji",r.FI="Finland",r.FR="France",r.GF="French Guiana",r.PF="French Polynesia",r.TF="French Southern Territories",r.GA="Gabon",r.GM="Gambia",r.GE="Georgia",r.DE="Germany",r.GH="Ghana",r.GI="Gibraltar",r.GR="Greece",r.GL="Greenland",r.GD="Grenada",r.GP="Guadeloupe",r.GU="Guam",r.GT="Guatemala",r.GG="Guernsey",r.GN="Guinea",r.GW="Guinea-Bissau",r.GY="Guyana",r.HT="Haiti",r.HM="Heard & McDonald Islands",r.HN="Honduras",r.HK="Hong Kong SAR China",r.HU="Hungary",r.IS="Iceland",r.IN="India",r.ID="Indonesia",r.IR="Iran",r.IQ="Iraq",r.IE="Ireland",r.IM="Isle of Man",r.IL="Israel",r.IT="Italy",r.JM="Jamaica",r.JP="Japan",r.JE="Jersey",r.JO="Jordan",r.KZ="Kazakhstan",r.KE="Kenya",r.KI="Kiribati",r.KW="Kuwait",r.KG="Kyrgyzstan",r.LA="Laos",r.LV="Latvia",r.LB="Lebanon",r.LS="Lesotho",r.LR="Liberia",r.LY="Libya",r.LI="Liechtenstein",r.LT="Lithuania",r.LU="Luxembourg",r.MO="Macao SAR China",r.MG="Madagascar",r.MW="Malawi",r.MY="Malaysia",r.MV="Maldives",r.ML="Mali",r.MT="Malta",r.MH="Marshall Islands",r.MQ="Martinique",r.MR="Mauritania",r.MU="Mauritius",r.YT="Mayotte",r.MX="Mexico",r.FM="Micronesia",r.MD="Moldova",r.MC="Monaco",r.MN="Mongolia",r.ME="Montenegro",r.MS="Montserrat",r.MA="Morocco",r.MZ="Mozambique",r.MM="Myanmar (Burma)",r.NA="Namibia",r.NR="Nauru",r.NP="Nepal",r.NL="Netherlands",r.NC="New Caledonia",r.NZ="New Zealand",r.NI="Nicaragua",r.NE="Niger",r.NG="Nigeria",r.NU="Niue",r.NF="Norfolk Island",r.KP="North Korea",r.MK="North Macedonia",r.MP="Northern Mariana Islands",r.NO="Norway",r.OM="Oman",r.PK="Pakistan",r.PW="Palau",r.PS="Palestinian Territories",r.PA="Panama",r.PG="Papua New Guinea",r.PY="Paraguay",r.PE="Peru",r.PH="Philippines",r.PN="Pitcairn Islands",r.PL="Poland",r.PT="Portugal",r.PR="Puerto Rico",r.QA="Qatar",r.RE="R\xe9union",r.RO="Romania",r.RU="Russia",r.RW="Rwanda",r.WS="Samoa",r.SM="San Marino",r.ST="S\xe3o Tom\xe9 & Pr\xedncipe",r.SA="Saudi Arabia",r.SN="Senegal",r.RS="Serbia",r.SC="Seychelles",r.SL="Sierra Leone",r.SG="Singapore",r.SX="Sint Maarten",r.SK="Slovakia",r.SI="Slovenia",r.SB="Solomon Islands",r.SO="Somalia",r.ZA="South Africa",r.GS="South Georgia & South Sandwich Islands",r.KR="South Korea",r.SS="South Sudan",r.ES="Spain",r.LK="Sri Lanka",r.BL="St. Barth\xe9lemy",r.SH="St. Helena",r.KN="St. Kitts & Nevis",r.LC="St. Lucia",r.MF="St. Martin",r.PM="St. Pierre & Miquelon",r.VC="St. Vincent & Grenadines",r.SD="Sudan",r.SR="Suriname",r.SJ="Svalbard & Jan Mayen",r.SE="Sweden",r.CH="Switzerland",r.SY="Syria",r.TW="Taiwan",r.TJ="Tajikistan",r.TZ="Tanzania",r.TH="Thailand",r.TL="Timor-Leste",r.TG="Togo",r.TK="Tokelau",r.TO="Tonga",r.TT="Trinidad & Tobago",r.TN="Tunisia",r.TR="Turkey",r.TM="Turkmenistan",r.TC="Turks & Caicos Islands",r.TV="Tuvalu",r.UM="U.S. Outlying Islands",r.VI="U.S. Virgin Islands",r.UG="Uganda",r.UA="Ukraine",r.AE="United Arab Emirates",r.GB="United Kingdom",r.US="United States",r.UY="Uruguay",r.UZ="Uzbekistan",r.VU="Vanuatu",r.VA="Vatican City",r.VE="Venezuela",r.VN="Vietnam",r.WF="Wallis & Futuna",r.EH="Western Sahara",r.YE="Yemen",r.ZM="Zambia",r.ZW="Zimbabwe";var w=t(2972),C=t.n(w);function M(e){var a,t,r,i,d;let{id:u}=e,p=(0,s.useSearchParams)(),m=(0,s.useRouter)(),[h,g]=(0,l.useState)(null),[x,f]=(0,l.useState)(!0),[y,v]=(0,l.useState)(null);(0,l.useEffect)(()=>{f(!0),(0,o.ZY)(u).then(g).catch(e=>v(e.message)).finally(()=>f(!1))},[u]);let j=new URLSearchParams(p.toString());j.delete("id");let b="/opportunities?".concat(j.toString());if(x)return(0,n.jsx)("div",{className:"py-10 text-center",role:"status",children:(0,n.jsx)("div",{className:"progress mx-auto w-1/2",children:(0,n.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:"100%"},"aria-valuenow":100,"aria-valuemin":0,"aria-valuemax":100})})});if(y)return(0,n.jsxs)("div",{className:"py-10 text-center",children:["Failed to load. ",(0,n.jsx)("button",{className:"underline",onClick:()=>m.refresh(),children:"Retry"})]});if(!h)return null;let N=[h.profile.city,c(h.profile.country)].filter(Boolean).join(", ");return(0,n.jsxs)("article",{className:"space-y-4",children:[(0,n.jsx)("nav",{children:(0,n.jsx)(C(),{href:b,className:"text-blue-600 hover:underline",children:"← Back to opportunities"})}),(0,n.jsxs)("header",{className:"space-y-2",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:h.title}),(0,n.jsx)("div",{className:"text-gray-600",children:h.profile.organizationName}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:N})]}),h.profile.profileImageUrl&&(0,n.jsx)("img",{src:h.profile.profileImageUrl,alt:"".concat(h.profile.organizationName," logo"),className:"h-60 w-full rounded object-cover"}),null===(a=h.description)||void 0===a?void 0:a.map((e,a)=>(0,n.jsx)("p",{className:"whitespace-pre-wrap",children:e.content},a)),(null===(t=h.required)||void 0===t?void 0:t.items)&&h.required.items.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-semibold",children:"Requirements"}),(0,n.jsx)("ul",{className:"list-disc pl-5",children:h.required.items.map(e=>(0,n.jsx)("li",{children:e},e))}),h.required.other&&(0,n.jsx)("p",{children:h.required.other})]}),h.applicationFees&&h.applicationFees.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-semibold",children:"Application Fees"}),(0,n.jsxs)("table",{className:"mt-2 w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-left",children:"Price"}),(0,n.jsx)("th",{className:"text-left",children:"Currency"}),(0,n.jsx)("th",{className:"text-left",children:"Description"})]})}),(0,n.jsx)("tbody",{children:h.applicationFees.map((e,a)=>(0,n.jsxs)("tr",{className:"border-t",children:[(0,n.jsx)("td",{children:e.price}),(0,n.jsx)("td",{children:e.currency}),(0,n.jsx)("td",{children:e.description})]},a))})]})]}),(0,n.jsxs)("div",{className:"space-x-2",children:[(null===(r=h.apply)||void 0===r?void 0:r.onlineForm)&&(0,n.jsx)("a",{href:h.apply.onlineForm,target:"_blank",rel:"noopener noreferrer",className:"inline-block rounded bg-blue-600 px-4 py-2 text-white",children:"Apply"}),(null===(i=h.contact)||void 0===i?void 0:i.url)&&(0,n.jsx)("a",{href:h.contact.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block rounded border px-4 py-2",children:"Visit"}),(null===(d=h.contact)||void 0===d?void 0:d.email)&&(0,n.jsx)("a",{href:"mailto:".concat(h.contact.email),className:"inline-block rounded border px-4 py-2",children:"Email"})]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,n.jsxs)("div",{children:["Created: ",A(h.createdAt)]}),(0,n.jsxs)("div",{children:["Last Modified: ",A(h.lastModifiedDate)]})]})]})}function A(e){if(!e)return"—";try{return new Date(e).toLocaleString()}catch(a){return e}}function I(){let e=(0,s.useSearchParams)().get("id");return e?(0,n.jsx)(M,{id:e}):(0,n.jsx)(S,{})}function B(){return(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)("div",{className:"py-10 text-center",role:"status",children:"Loading…"}),children:(0,n.jsx)(I,{})})}},9376:function(e,a,t){"use strict";var r=t(5475);t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},1525:function(e,a,t){"use strict";t.d(a,{Oj:function(){return l},ZY:function(){return n}});let r="https://api.artconnect.com/v1";async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=new URL(r+"/opportunities/");a.searchParams.set("page",String(e));let t=await fetch(a.toString(),{headers:{Accept:"application/json"}});if(409===t.status)throw Error("409");if(!t.ok)throw Error("List fetch failed: ".concat(t.status));return await t.json()}async function n(e){async function a(){let t=await fetch("".concat(r,"/opportunities/").concat(encodeURIComponent(e),"/"),{headers:{Accept:"application/json"}});return t.ok?await t.json():(await new Promise(e=>setTimeout(e,1e3)),a())}return a()}async function l(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=1,r=[];for(;;){let n;try{n=await i(t)}catch(e){await new Promise(e=>setTimeout(e,1e3));continue}if(r.push(...n.data),e&&e(r.slice(),t,n.pages),!n.pages||t>=n.pages)break;t++,a>0&&await new Promise(e=>setTimeout(e,a))}return r}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=9480)}),_N_E=e.O()}]);