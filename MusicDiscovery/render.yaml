services:
  - type: web
    name: musicdiscovery-api
    runtime: node
    region: frankfurt
    plan: free
    buildCommand: |
      corepack enable pnpm && \
      pnpm install --frozen-lockfile && \
      pnpm build --filter=@musicdiscovery/api...
    startCommand: node apps/api/dist/index.js
    envVars:
      - key: NODE_ENV
        value: production
      # Optional: set this securely in the Render dashboard (do not commit a value).
      - key: LASTFM_API_KEY
        sync: false
