<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/d96473a3e4c19063.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-63a824f9a9815e00.js"/><script src="/_next/static/chunks/fd9d1056-b3e22152f23ae9ca.js" async=""></script><script src="/_next/static/chunks/117-ec24f51b9446ce2b.js" async=""></script><script src="/_next/static/chunks/main-app-76cd622bf10842cb.js" async=""></script><script src="/_next/static/chunks/972-35cef09aa32325a7.js" async=""></script><script src="/_next/static/chunks/app/page-69188fe929472fca.js" async=""></script><script src="/_next/static/chunks/app/layout-f2fdfc6069090275.js" async=""></script><script src="/_next/static/chunks/app/projects/music-discovery/page-467af467c69b38cd.js" async=""></script><title>MusicDiscovery Blueprint</title><meta name="description" content="Blueprint en runbook voor de MusicDiscovery app"/><link id="bootstrap-theme" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/flatly/bootstrap.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="antialiased bg-gray-50 text-gray-900"><div class="bg-primary text-white text-center py-1 w-100">Example of what can be done with Codex - local</div><header class="border-b bg-white"><div class="mx-auto flex max-w-5xl items-center justify-between gap-2 p-4"><a class="text-xl font-semibold" href="/">Projects</a><div class="flex items-center gap-2"><select class="form-select w-auto"><option value="flatly" selected="">Light</option><option value="darkly">Dark</option><option value="cyborg">Darker</option></select><div class="relative"><form class="relative"><span class="absolute inset-y-0 left-0 flex items-center pl-2 text-gray-500"><i class="bi bi-search"></i></span><input type="text" placeholder="Search..." class="w-48 rounded border pl-8 pr-3 py-1 text-sm" aria-label="Search opportunities" value=""/></form></div></div></div></header><main class="mx-auto max-w-5xl p-4"><div class="space-y-6"><div class="rounded-lg border border-sky-200 bg-sky-50 px-4 py-3 text-sm text-sky-900 shadow-sm mx-auto mt-4 max-w-3xl" title="2025-09-30T23:53:39Z"><p class="text-sm font-semibold text-sky-900">Versie gedeployed op:</p><p class="mt-1 text-sm text-sky-800">30-09-2025 23:53:39 (UTC+00:00)</p><p class="mt-2 text-xs text-sky-600">Bronstempel: <code class="rounded bg-sky-100 px-1 py-0.5 text-sky-700">2025-09-30T23:53:39Z</code></p></div><header class="space-y-2 rounded-lg border bg-white p-6 shadow-sm"><h1 class="text-2xl font-semibold text-gray-900">MusicDiscovery</h1><p class="text-sm text-gray-600">Een end-to-end blueprint voor een interactieve muziekontdekkingsapp met Spotify-integratie, force-directed graaf en gedeelde snapshots.</p></header><article class="prose prose-slate max-w-none rounded-lg border bg-white p-6 shadow-sm"><h1>MusicDiscovery Project Blueprint</h1>
<hr/>
<h2>1. Productvisie en scope</h2>
<p><strong>Doel</strong></p>
<p>Interactieve muziekontdekkingsapp. Je start bij een artiest, ziet gelijkaardige artiesten als een sleepbare graaf, klikt door het netwerk en beluistert 30-seconden previews. Je kunt nodes vastpinnen, favorieten bewaren, mini-playlists maken en delen.</p>
<p><strong>Primaire databron</strong></p>
<ul>
<li>Spotify Web API met Client Credentials Flow voor server-side calls. Voor preview gebruik je <code>preview_url</code> van Spotify tracks.</li>
<li><strong>Audius Public API</strong> (gratis en open source) als extra bron voor trending tracks, remixes en community-curated playlists zonder commerciële beperkingen. Gebruik deze als alternatief wanneer Spotify rate-limt of wanneer je een demo zonder accounts wilt draaien.</li>
<li>Optioneel Last.fm en MusicBrainz als fallback of enrichment.</li>
</ul>
<p><strong>Platformen</strong></p>
<ul>
<li>Webapp: React + Vite</li>
<li>Mobiel: React Native of .NET MAUI (beide haalbaar op basis van dezelfde backend)</li>
<li>Backend: Node.js + TypeScript (NestJS of Express), of .NET 8 Web API als alternatief</li>
<li>Database: PostgreSQL</li>
<li>Cache: Redis</li>
</ul>
<hr/>
<h2>2. Persona’s</h2>
<ol>
<li>
<p><strong>Casual Explorer</strong></p>
<p>Wil snel nieuwe artiesten ontdekken via klikken in de graaf, af en toe een preview luisteren, niets verplicht inloggen.</p>
</li>
<li>
<p><strong>Power Listener</strong></p>
<p>Wil chain-discovery, pins, notities, mini-playlists en export naar Spotify.</p>
</li>
<li>
<p><strong>Curator</strong></p>
<p>Wil vergelijkingen, thema’s, tags opslaan, b.v. “Indie folk om te studeren”.</p>
</li>
</ol>
<hr/>
<h2>3. Use cases en user stories</h2>
<h3>UC-01 Artiest zoeken</h3>
<ul>
<li>Als gebruiker wil ik een artiest zoeken zodat ik die als vertrekpunt kan nemen.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Zoek met autosuggest.</li>
<li>Enter of klik op resultaat zet die artiest als centrale node.</li>
</ul>
</li>
</ul>
<h3>UC-02 Gelijkaardige artiesten zien</h3>
<ul>
<li>Als gebruiker wil ik rond de centrale artiest 8 tot 12 gelijkaardige artiesten zien zodat ik verder kan verkennen.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Nodes met ronde avatars, labels.</li>
<li>Edges tussen centrum en buren.</li>
<li>Geen duplicaten.</li>
</ul>
</li>
</ul>
<h3>UC-03 Node interacties</h3>
<ul>
<li>Als gebruiker wil ik nodes kunnen verslepen en pinnen voor een eigen lay-out.</li>
<li>Als gebruiker wil ik op een node klikken en een contextmenu zien met: titel, Listen, More Similar Artists.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Drag met veer-effect.</li>
<li>Pin zet de node vast.</li>
<li>Contextmenu sluit bij buitenklik of ESC.</li>
</ul>
</li>
</ul>
<h3>UC-04 Meer gelijkaardigen laden</h3>
<ul>
<li>Als gebruiker wil ik op “More Similar Artists” klikken om die node tot pivot te maken en nieuwe buren te zien.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Lazy load, dedupe, animatie van edges.</li>
<li>Nieuwe buren verschijnen in een ring rond de pivot.</li>
</ul>
</li>
</ul>
<h3>UC-05 Luisterpreview</h3>
<ul>
<li>Als gebruiker wil ik 30-sec previews afspelen met play/pause en volume.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Eén globale player, nieuw nummer stopt het vorige.</li>
<li>Indien geen preview: disabled actie en link “Open in Spotify”.</li>
</ul>
</li>
</ul>
<h3>UC-06 Favorieten en pins</h3>
<ul>
<li>Als gebruiker wil ik artiesten en playlists kunnen bewaren en nodes pinnen zodat ik later kan terugkeren.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Favoriet-toggle per artiest.</li>
<li>Behouden van pin status per sessie en per opgeslagen graaf.</li>
</ul>
</li>
</ul>
<h3>UC-07 Sessies en graaf-snapshots</h3>
<ul>
<li>Als gebruiker wil ik mijn huidige graaf kunnen opslaan als snapshot en later opnieuw openen.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Slaat nodes, posities, pins en timestamp op.</li>
<li>Delen via deeplink.</li>
</ul>
</li>
</ul>
<h3>UC-08 Exporteren naar Spotify</h3>
<ul>
<li>Als power user wil ik de geselecteerde tracks kunnen exporteren naar een Spotify playlist.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Vereist OAuth Authorization Code flow.</li>
<li>Gebruiker kiest naam, playlist wordt aangemaakt.</li>
</ul>
</li>
</ul>
<h3>UC-09 Fallback en errors</h3>
<ul>
<li>Als gebruiker wil ik duidelijke meldingen bij API errors en rate limits.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Netwerkfouten tonen toasts met retry.</li>
<li>Rate limit backoff en waarschuwing.</li>
</ul>
</li>
</ul>
<h3>UC-10 Toegankelijkheid</h3>
<ul>
<li>Als gebruiker met toetsenbord wil ik nodes en menu’s kunnen bedienen.</li>
<li>Acceptatie:<!-- -->
<ul>
<li>Focus states, ARIA labels, contrast AA.</li>
</ul>
</li>
</ul>
<hr/>
<h2>4. Functionele eisen</h2>
<ul>
<li>Sleepbare, zoomable graaf met collision-avoidance.</li>
<li>Radiale ring rond pivot bij eerste plaatsing, daarna lichte force simulatie.</li>
<li>Dedupe op artiest-id door volledige graaf.</li>
<li>Cache per artiest: related en top tracks.</li>
<li>Player met progress bar en volume.</li>
<li>Zoek met debounced autosuggest.</li>
<li>Snapshots en favorieten server-side opgeslagen per gebruiker.</li>
<li>Optioneel gastmodus met localStorage.</li>
</ul>
<hr/>
<h2>5. Niet-functionele eisen</h2>
<ul>
<li>TTFB voor initieel scherm onder 200 ms vanaf CDN.</li>
<li>API p95 &lt; 300 ms voor cached routes, &lt; 800 ms voor uncached.</li>
<li>60 fps animatie bij &lt; 200 nodes op gemiddelde laptop.</li>
<li>A11y WCAG 2.1 AA.</li>
<li>Meertaligheid: NL, EN.</li>
<li>GDPR: enkel functionele data, geen gevoelige persoonsgegevens.</li>
</ul>
<hr/>
<h2>6. Informatiearchitectuur en schermen</h2>
<h3>6.1 Web UI lay-out</h3>
<ul>
<li>Header: logo, zoekbalk, user menu.</li>
<li>Main:<!-- -->
<ul>
<li>Linker 70 procent: graaf canvas.</li>
<li>Rechter 30 procent: zijpaneel player en details.</li>
</ul>
</li>
<li>Footer: volumeregelaar en transport.</li>
</ul>
<h3>6.2 Belangrijke schermen</h3>
<ol>
<li>Home: lege staat met zoekfocus.</li>
<li>Discovery: graaf + details.</li>
<li>Favorieten: lijst van artiesten.</li>
<li>Snapshots: opgeslagen grafen met thumbnails.</li>
<li>OAuth callback scherm.</li>
<li>Settings: taal, thema licht/donker, marktcode voor top tracks.</li>
</ol>
<hr/>
<h2>7. UX-interacties</h2>
<ul>
<li>Node hover: vergroting 1.05, rand highlight, edges highlight.</li>
<li>Node drag: pointer-cursor, physics pauseren tot drop.</li>
<li>Contextmenu: vaste breedte 260 px, titelregel, actieknoppen.</li>
<li>Keyboard:<!-- -->
<ul>
<li>Pijlen bewegen focus tussen nodes.</li>
<li>Enter opent contextmenu.</li>
<li>Space togglet play op geselecteerde track.</li>
</ul>
</li>
<li>Empty states: duidelijke icon + boodschap + call to action.</li>
</ul>
<hr/>
<h2>8. Architectuur</h2>
<pre><code>[Client] React SPA
   |
   | HTTPS JSON
   v
[API] Node/TS (NestJS of Express)
   |\
   | \__ Audius proxy (open API)
   |      v
   |    [Audius Public API]
   |
   | Redis cache
   v
[PostgreSQL] gebruikers, snapshots, favorieten
   |
   | Spotify OAuth tokens
   v
[Spotify Web API]

</code></pre>
<ul>
<li>Server doet Spotify calls met Client Credentials voor publieke data.</li>
<li>Audius proxy gebruikt openbare endpoints en slaat geen secrets op; alleen caching/normalisatie in backend.</li>
<li>Voor user-acties zoals playlist creatie gebruik je Authorization Code flow.</li>
</ul>
<hr/>
<h2>9. Datamodel (PostgreSQL, Prisma-stijl)</h2>
<pre><code>model User {
  id            String   @id @default(cuid())
  provider      String   // &#x27;anonymous&#x27; of &#x27;spotify&#x27;
  email         String?  @unique
  displayName   String?
  avatarUrl     String?
  locale        String   @default(&quot;nl&quot;)
  market        String   @default(&quot;BE&quot;)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  snapshots     Snapshot[]
  favorites     Favorite[]
  settings      Json?
  // OAuth tokens apart:
  spotifyAuth   SpotifyAuth?
}

model SpotifyAuth {
  id           String   @id @default(cuid())
  userId       String   @unique
  accessToken  String
  refreshToken String
  scope        String
  expiresAt    DateTime
  user         User     @relation(fields: [userId], references: [id])
}

model Favorite {
  id        String   @id @default(cuid())
  userId    String
  artistId  String   // Spotify artist id
  name      String
  imageUrl  String?
  addedAt   DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
  @@unique([userId, artistId])
}

model Snapshot {
  id         String   @id @default(cuid())
  userId     String
  title      String
  createdAt  DateTime @default(now())
  graphJson  Json     // nodes, edges, posities, pins
  previewUrl String?  // optioneel thumbnail
  user       User     @relation(fields: [userId], references: [id])
}

model AuditLog {
  id        String   @id @default(cuid())
  userId    String?
  action    String
  payload   Json?
  createdAt DateTime @default(now())
}

</code></pre>
<hr/>
<h2>10. Frontend datamodellen (TypeScript)</h2>
<pre><code class="language-tsx">export type Artist = {
  id: string;
  name: string;
  imageUrl?: string;
  genres?: string[];
  popularity?: number;
};

export type Track = {
  id: string;
  name: string;
  previewUrl?: string;
  durationMs: number;
  artists: { id: string; name: string }[];
};

export type NodeData = {
  id: string;           // unique per graph node
  artistId: string;     // Spotify id
  name: string;
  imageUrl?: string;
  pinned?: boolean;
  x?: number; y?: number; fx?: number; fy?: number;
};

export type EdgeData = { source: string; target: string };

export type GraphState = {
  nodes: NodeData[];
  edges: EdgeData[];
  pivotNodeId: string;
  loadedNeighbors: Record&lt;string, string[]&gt;; // artistId -&gt; neighbor ids
};

</code></pre>
<hr/>
<h2>11. API specificatie (REST)</h2>
<p>Alle routes onder <code>/api</code>. Responses zijn JSON. Tijdsformaat ISO 8601. Auth via JWT of session cookie. Rate limit 60 req/min per IP.</p>
<h3>11.1 Auth en gebruikers</h3>
<ul>
<li><code>POST /auth/anonymous</code>
<ul>
<li>Resultaat: <code>{ token, user: User }</code></li>
</ul>
</li>
<li><code>GET /auth/spotify/login</code>
<ul>
<li>Redirect naar Spotify</li>
</ul>
</li>
<li><code>GET /auth/spotify/callback?code=...</code>
<ul>
<li>Resultaat: set session, redirect naar app</li>
</ul>
</li>
<li><code>POST /auth/logout</code></li>
</ul>
<h3>11.2 Spotify proxy</h3>
<p>Server-side om client te ontlasten en secrets te verbergen.</p>
<ul>
<li><code>GET /spotify/search?query=ben%20howard&amp;type=artist&amp;limit=10</code>
<ul>
<li>Resultaat: <code>[{ id, name, imageUrl, genres, popularity }]</code></li>
</ul>
</li>
<li><code>GET /spotify/artists/:id</code>
<ul>
<li>Resultaat: <code>{ id, name, imageUrl, genres, popularity }</code></li>
</ul>
</li>
<li><code>GET /spotify/artists/:id/related</code>
<ul>
<li>Resultaat: <code>[{ ...Artist }]</code></li>
</ul>
</li>
<li><code>GET /spotify/artists/:id/top-tracks?market=BE</code>
<ul>
<li>Resultaat: <code>[{ ...Track }]</code></li>
</ul>
</li>
<li><code>GET /spotify/tracks/:id</code></li>
<li><code>GET /spotify/audio-features/:id</code> (optioneel, voor eigen similarity)</li>
</ul>
<p>Caching: Redis 24 uur voor <code>related</code> en 6 uur voor <code>top-tracks</code>.</p>
<h3>11.3 Audius proxy (open API)</h3>
<p>Gebruik de gratis Audius API via https://discoveryprovider.audius.co. Geen auth vereist, maar voeg een eenvoudige rate limiter toe.</p>
<ul>
<li><code>GET /audius/tracks/trending?genre=electronic&amp;limit=20</code>
<ul>
<li>Resultaat: lijst met trending tracks inclusief <code>title</code>, <code>user</code>, <code>stream_url</code>.</li>
</ul>
</li>
<li><code>GET /audius/users/:handle/tracks</code>
<ul>
<li>Resultaat: tracks per artiest/creator voor graafuitbreiding.</li>
</ul>
</li>
<li><code>GET /audius/tracks/:id/stream</code>
<ul>
<li>Resultaat: directe stream-URL voor previews.</li>
</ul>
</li>
</ul>
<p>Cache responses max 10 minuten; Audius data verandert sneller en is toch gratis beschikbaar.</p>
<h3>11.4 App-data</h3>
<ul>
<li><code>GET /me</code>
<ul>
<li>Resultaat: <code>User</code></li>
</ul>
</li>
<li><code>GET /favorites</code></li>
<li><code>POST /favorites</code>
<ul>
<li>Body: <code>{ artistId, name, imageUrl }</code></li>
</ul>
</li>
<li><code>DELETE /favorites/:artistId</code></li>
<li><code>GET /snapshots</code></li>
<li><code>POST /snapshots</code>
<ul>
<li>Body: <code>{ title, graphJson }</code></li>
</ul>
</li>
<li><code>GET /snapshots/:id</code></li>
<li><code>DELETE /snapshots/:id</code></li>
</ul>
<h3>11.5 Export</h3>
<ul>
<li><code>POST /export/spotify-playlist</code>
<ul>
<li>Auth vereist met Spotify scope <code>playlist-modify-public</code> of <code>playlist-modify-private</code></li>
<li>Body: <code>{ name, trackIds: string[] }</code></li>
<li>Resultaat: <code>{ playlistId, externalUrl }</code></li>
</ul>
</li>
</ul>
<h3>11.6 Foutcodes</h3>
<ul>
<li>
<p><code>400</code> validation_error</p>
</li>
<li>
<p><code>401</code> unauthorized</p>
</li>
<li>
<p><code>403</code> forbidden</p>
</li>
<li>
<p><code>404</code> not_found</p>
</li>
<li>
<p><code>409</code> conflict</p>
</li>
<li>
<p><code>429</code> rate_limited</p>
</li>
<li>
<p><code>500</code> server_error</p>
<p>Body altijd <code>{ error: { code, message, details? } }</code>.</p>
</li>
</ul>
<hr/>
<h2>12. Integratie met Spotify</h2>
<h3>12.1 OAuth</h3>
<ul>
<li>Voor data zonder usercontext: <strong>Client Credentials Flow</strong> op de server.</li>
<li>Voor playlist export of user-gegevens: <strong>Authorization Code Flow</strong> met refresh tokens.</li>
</ul>
<h3>12.2 Relevante endpoints</h3>
<ul>
<li><code>GET /v1/search?type=artist&amp;q=...</code></li>
<li><code>GET /v1/artists/{id}</code></li>
<li><code>GET /v1/artists/{id}/related-artists</code></li>
<li><code>GET /v1/artists/{id}/top-tracks?market=BE</code></li>
<li><code>GET /v1/tracks/{id}</code></li>
<li><code>GET /v1/audio-features/{id}</code></li>
</ul>
<p>Voorbeelden van genormaliseerde server-responses zijn hierboven gegeven. Bewaar geen Spotify secrets in de client.</p>
<h3>12.3 Audius integratie (optioneel)</h3>
<ul>
<li>Geen OAuth vereist, maar voeg een <code>User-Agent</code> header toe en respecteer <code>X-RateLimit</code> headers.</li>
<li>Normaliseer Audius response naar hetzelfde <code>Artist</code> en <code>Track</code> model (gebruik <code>user.name</code> als artiest, <code>stream_url</code> voor previews).</li>
<li>Markeer Audius-content in de UI (bijv. badge &quot;Audius&quot;) zodat gebruikers weten dat het community-sourced is.</li>
<li>Gebruik Audius vooral in gastmodus of wanneer Spotify preview ontbreekt; fallback logic: eerst Spotify preview, anders Audius stream.</li>
</ul>
<hr/>
<h2>13. Algorithmische details</h2>
<h3>13.1 Initieel plaatsen</h3>
<ul>
<li>Plaats pivot op canvas-centrum.</li>
<li>Plaats n buren op een cirkel met straal <code>R = k * sqrt(n)</code> en verdeling <code>angle = 2πi/n</code>.</li>
<li>Sla posities op in node.x, node.y en laat daarna een lichte force simulatie lopen.</li>
</ul>
<h3>13.2 Force simulatie</h3>
<ul>
<li>Use case: overlap vermijden, organisch effect.</li>
<li>Krachten:<!-- -->
<ul>
<li>Link force met lengte 150</li>
<li>Charge negative 30</li>
<li>Collision radius gelijk aan node-diameter + 4</li>
</ul>
</li>
<li>Tijdens drag: zet fx, fy op muispositie. Bij drop verwijder fx, fy tenzij pinned.</li>
</ul>
<h3>13.3 Dedupe</h3>
<ul>
<li>Nieuwe neighbor set: filter op <code>artistId</code> die al in <code>graphState.nodes</code> zit.</li>
<li>Edges: voeg enkel toe als combinatie nog niet bestaat.</li>
</ul>
<h3>13.4 Prefetch en cache</h3>
<ul>
<li>Wanneer node in viewport en niet geladen: prefetch <code>related</code> en <code>top-tracks</code>.</li>
<li>Cache key: <code>artist:{id}:related</code> en <code>artist:{id}:topTracks:{market}</code>.</li>
</ul>
<hr/>
<h2>14. Componentarchitectuur (React)</h2>
<pre><code>&lt;App&gt;
  &lt;Header&gt;
    &lt;SearchBar /&gt;
    &lt;UserMenu /&gt;
  &lt;/Header&gt;

  &lt;Main&gt;
    &lt;GraphCanvas
      graphState
      onNodeClick
      onNodeDrag
      onPinToggle
      onContextAction
    /&gt;
    &lt;SidePanel&gt;
      &lt;ArtistHeader /&gt;
      &lt;TopTracks /&gt;
      &lt;Actions /&gt;
    &lt;/SidePanel&gt;
  &lt;/Main&gt;

  &lt;Footer&gt;
    &lt;GlobalPlayer /&gt;
  &lt;/Footer&gt;
&lt;/App&gt;

</code></pre>
<p>State management:</p>
<ul>
<li>React Query voor data-fetch en cache.</li>
<li>Zustand of Redux Toolkit voor <code>GraphState</code> en player.</li>
</ul>
<hr/>
<h2>15. UI-richtlijnen</h2>
<ul>
<li>Node afmetingen: 96 px standaard, 120 px voor pivot.</li>
<li>Label max 20 tekens, ellipsis na 1 regel.</li>
<li>Edge 1 px lichtgrijs, opacity 0.6.</li>
<li>Thema licht en donker. Contrast minimaal AA.</li>
<li>Animaties: 150 tot 250 ms ease-in-out.</li>
<li>Contextmenu met duidelijke hit targets, 40 px hoogte per item.</li>
</ul>
<hr/>
<h2>16. Toegankelijkheid</h2>
<ul>
<li>Alle interacties via keyboard mogelijk.</li>
<li>Node als <code>button</code> met <code>aria-label=&quot;Artist: {name}&quot;</code>.</li>
<li>Contextmenu met roving tabindex.</li>
<li>Focusring 2 px zichtbaar.</li>
<li>Voor player: <code>aria-live=&quot;polite&quot;</code> bij trackwissel.</li>
</ul>
<hr/>
<h2>17. Internationalisatie</h2>
<ul>
<li>i18n keys in JSON, fallback EN.</li>
<li>Marktcode voor top tracks instelbaar in Settings.</li>
<li>Datum en getallen via Intl API.</li>
</ul>
<hr/>
<h2>18. Beveiliging en privacy</h2>
<ul>
<li>OAuth tokens server-side versleuteld (AES-GCM) met roterende key.</li>
<li>Cookies <code>HttpOnly</code>, <code>Secure</code>, <code>SameSite=Lax</code>.</li>
<li>CORS strikt op frontend origin.</li>
<li>Rate limiting en bot-protect op public routes.</li>
<li>CSP headers, Referrer-Policy, X-Content-Type-Options.</li>
<li>Log geen volledige tokens in audit.</li>
</ul>
<hr/>
<h2>19. Performance en schaalbaarheid</h2>
<ul>
<li>Vite bundling, code-splitting, lazy load voor SidePanel.</li>
<li>Afbeeldingen via <code>&lt;img srcset&gt;</code> en CDNs, of proxied met cache.</li>
<li>Canvas rendering voor graaf bij &gt; 100 nodes.</li>
<li>API caching op Redis. Warm caches voor populaire artiesten.</li>
</ul>
<hr/>
<h2>20. Teststrategie</h2>
<h3>20.1 Unit</h3>
<ul>
<li>Pure helpers: dedupe, layout, mappers van Spotify naar interne modellen.</li>
</ul>
<h3>20.2 Integratie</h3>
<ul>
<li>API routes met mocked Spotify via MSW of WireMock.</li>
</ul>
<h3>20.3 E2E</h3>
<ul>
<li>Playwright:<!-- -->
<ul>
<li>Zoek artiest, laad graaf, klik node, luister preview, snapshot bewaren.</li>
</ul>
</li>
</ul>
<h3>20.4 Performancetests</h3>
<ul>
<li>Lighthouse en WebPageTest.</li>
<li>K6 voor backend, scenario met 50 rps bursts.</li>
</ul>
<h3>20.5 Toegankelijkheid</h3>
<ul>
<li>axe-core geautomatiseerd in CI.</li>
</ul>
<hr/>
<h2>21. Telemetrie en analytics</h2>
<ul>
<li>Eventen: search_performed, node_opened, neighbors_loaded, track_preview_played, snapshot_saved, export_playlist.</li>
<li>Privacyvriendelijk, zonder PII.</li>
<li>Error tracking met Sentry.</li>
</ul>
<hr/>
<h2>22. CI/CD en deployment</h2>
<ul>
<li>Monorepo met Turbo of Nx.</li>
<li>CI: lint, typecheck, test, build, audit.</li>
<li>Docker images voor api en web.</li>
<li>Docker Compose voor dev.</li>
<li>Prod op Fly.io, Railway, Azure of AWS.</li>
<li>Migraties via Prisma Migrate.</li>
</ul>
<p><strong>Omgevingsvariabelen</strong></p>
<pre><code>SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=
SPOTIFY_REDIRECT_URI=https://app.example.com/auth/spotify/callback
JWT_SECRET=
DATABASE_URL=postgres://...
REDIS_URL=redis://...
BASE_URL=https://api.example.com

</code></pre>
<hr/>
<h2>23. Backlog en roadmap</h2>
<h3>MVP</h3>
<ul>
<li>Zoek, discovery graaf, drag, contextmenu, listen, top tracks, favorieten lokaal.</li>
<li>Spotify proxy met Client Credentials.</li>
<li>Gastmodus.</li>
</ul>
<h3>V1</h3>
<ul>
<li>Accounts, server-side favorieten en snapshots.</li>
<li>Deelbare deeplinks.</li>
<li>Donker thema, i18n.</li>
</ul>
<h3>V2</h3>
<ul>
<li>Spotify playlist export via OAuth.</li>
<li>Fallback naar Last.fm bij lege related.</li>
<li>Eigen similarity op basis van audio features.</li>
</ul>
<hr/>
<h2>24. Acceptatiecriteria per kernfeature</h2>
<ul>
<li><strong>Zoek</strong>: binnen 300 ms resultaten bij cache hit, geen XSS via query, keyboard navigatie ok.</li>
<li><strong>Graaf</strong>: geen overlappende nodes in rust, drag performant, dedupe 100 procent.</li>
<li><strong>Listen</strong>: preview start onder 200 ms bij cache hit, visual feedback playing.</li>
<li><strong>Snapshots</strong>: POST met 201, GET levert identieke lay-out terug.</li>
<li><strong>Export</strong>: playlist verschijnt in Spotify account en bevat juiste tracks.</li>
</ul>
<hr/>
<h2>25. Voorbeeld payloads</h2>
<h3>25.1 <code>GET /spotify/search?query=ben howard&amp;type=artist</code></h3>
<pre><code class="language-json">{
  &quot;items&quot;: [
    {
      &quot;id&quot;: &quot;5schHn4kqRZfzJ6Tu2B3Yl&quot;,
      &quot;name&quot;: &quot;Ben Howard&quot;,
      &quot;imageUrl&quot;: &quot;https://i.scdn.co/image/...&quot;,
      &quot;genres&quot;: [&quot;indie folk&quot;, &quot;singer-songwriter&quot;],
      &quot;popularity&quot;: 67
    }
  ]
}

</code></pre>
<h3>25.2 <code>GET /spotify/artists/{id}/related</code></h3>
<pre><code class="language-json">{
  &quot;items&quot;: [
    { &quot;id&quot;: &quot;0Z8k3Hc2&quot;, &quot;name&quot;: &quot;Bear&#x27;s Den&quot;, &quot;imageUrl&quot;: &quot;...&quot; },
    { &quot;id&quot;: &quot;1aS9&quot;, &quot;name&quot;: &quot;Nick Mulvey&quot;, &quot;imageUrl&quot;: &quot;...&quot; }
  ]
}

</code></pre>
<h3>25.3 <code>GET /spotify/artists/{id}/top-tracks?market=BE</code></h3>
<pre><code class="language-json">{
  &quot;items&quot;: [
    {
      &quot;id&quot;: &quot;3abc&quot;,
      &quot;name&quot;: &quot;Only Love&quot;,
      &quot;previewUrl&quot;: &quot;https://p.scdn.co/mp3-preview/...&quot;,
      &quot;durationMs&quot;: 229000,
      &quot;artists&quot;: [{ &quot;id&quot;: &quot;5sch...&quot;, &quot;name&quot;: &quot;Ben Howard&quot; }]
    }
  ]
}

</code></pre>
<hr/>
<h2>26. Pseudocode kerndelen</h2>
<h3>26.1 Neighbors laden en toevoegen</h3>
<pre><code class="language-tsx">async function expandNode(pivotArtistId: string) {
  if (graph.loadedNeighbors[pivotArtistId]) return;

  const res = await api.getRelated(pivotArtistId);
  const newArtists = res.items.filter(a =&gt; !graph.nodes.some(n =&gt; n.artistId === a.id));

  const newNodes = newArtists.map((a, i) =&gt; ({
    id: cuid(), artistId: a.id, name: a.name, imageUrl: a.imageUrl,
    ...radialPosition(i, newArtists.length, pivotPosition())
  }));

  graph.nodes.push(...newNodes);
  graph.edges.push(...newNodes.map(n =&gt; ({ source: findNodeIdByArtist(pivotArtistId), target: n.id })));
  graph.loadedNeighbors[pivotArtistId] = newArtists.map(a =&gt; a.id);
}

</code></pre>
<h3>26.2 Player</h3>
<pre><code class="language-tsx">let audio = new Audio();
function playPreview(track: Track) {
  if (!track.previewUrl) return;
  audio.src = track.previewUrl;
  audio.play();
}
function pause() { audio.pause(); }

</code></pre>
<hr/>
<h2>27. Styling en design system</h2>
<ul>
<li>Tailwind of CSS Variables.</li>
<li>Components: Button, Card, Menu, Tooltip, Tabs, Dialog.</li>
<li>Schaduwen zacht, afgeronde hoeken xl.</li>
<li>Preflight fonts: Inter of System UI.</li>
</ul>
<hr/>
<h2>28. Mobiele app aandachtspunten</h2>
<ul>
<li>Zelfde backend.</li>
<li>React Native: gebruik <code>react-native-svg</code> of <code>expo-three</code> voor graaf, of vereenvoudigde lijst-navigatie met horizontale carrousel als performance beperkt is.</li>
<li>.NET MAUI: canvas via SkiaSharp voor de graaf.</li>
<li>Offline: cache van laatst bezochte artiesten en snapshots in SQLite.</li>
</ul>
<hr/>
<h2>29. Licenties en content</h2>
<ul>
<li>Spotify preview_url en images mogen als preview gebruikt worden volgens Spotify TOS. Link altijd naar de artiest of track in Spotify bij detailweergave. Bewaar geen audio lokaal.</li>
</ul>
<hr/>
<h2>30. Things to remember tijdens implementatie</h2>
<ul>
<li>Duidelijke loading states en skeletons bij zijpaneel.</li>
<li>Dedupe strikt op Spotify artist id.</li>
<li>Backoff bij <code>429</code> met <code>Retry-After</code>.</li>
<li>Log elke Spotify call met endpoint, status, duur.</li>
<li>Feature flags voor export en eigen similarity.</li>
</ul>
<hr/>
<h2>31. Checklist om te starten</h2>
<ol>
<li>Spotify app registreren en Client ID/Secret invullen.</li>
<li>Backend scaffolding opzetten met healthcheck en één proxy route.</li>
<li>Redis en Postgres draaien via Docker.</li>
<li>Frontend met Vite, React Query, router.</li>
<li>Basisgraaf renderen met dummy data.</li>
<li>Echte <code>search</code> en <code>related</code> inbouwen.</li>
<li>Player en SidePanel toevoegen.</li>
<li>Favorieten en snapshots aansluiten op database.</li>
<li>CI/CD pipeline.</li>
<li>Lighthouse, axe en Playwright in CI.</li>
</ol></article></div></main><script src="/_next/static/chunks/webpack-63a824f9a9815e00.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/d96473a3e4c19063.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[2846,[],\"\"]\n5:I[4707,[],\"\"]\n6:I[6423,[],\"\"]\n7:I[2972,[\"972\",\"static/chunks/972-35cef09aa32325a7.js\",\"931\",\"static/chunks/app/page-69188fe929472fca.js\"],\"\"]\n8:I[7487,[\"972\",\"static/chunks/972-35cef09aa32325a7.js\",\"185\",\"static/chunks/app/layout-f2fdfc6069090275.js\"],\"default\"]\n9:I[5435,[\"972\",\"static/chunks/972-35cef09aa32325a7.js\",\"185\",\"static/chunks/app/layout-f2fdfc6069090275.js\"],\"default\"]\nb:I[1060,[],\"\"]\nc:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"IfIYB_rtuXNutlyMyRGhY\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"projects\",\"music-discovery\",\"\"],\"initialTree\":[\"\",{\"children\":[\"projects\",{\"children\":[\"music-discovery\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"projects\",{\"children\":[\"music-discovery\",{\"children\":[\"__PAGE__\",{},[[\"$L3\",\"$L4\",null],null],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\",\"music-discovery\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d96473a3e4c19063.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"id\":\"bootstrap-theme\",\"rel\":\"stylesheet\",\"href\":\"https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/flatly/bootstrap.min.css\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css\"}]]}],[\"$\",\"body\",null,{\"className\":\"antialiased bg-gray-50 text-gray-900\",\"children\":[[\"$\",\"div\",null,{\"className\":\"bg-primary text-white text-center py-1 w-100\",\"children\":\"Example of what can be done with Codex - local\"}],[\"$\",\"header\",null,{\"className\":\"border-b bg-white\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto flex max-w-5xl items-center justify-between gap-2 p-4\",\"children\":[[\"$\",\"$L7\",null,{\"href\":\"/\",\"className\":\"text-xl font-semibold\",\"children\":\"Projects\"}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"$L8\",null,{}],[\"$\",\"$L9\",null,{}]]}]]}]}],[\"$\",\"main\",null,{\"className\":\"mx-auto max-w-5xl p-4\",\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]]}]]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$La\"],\"globalErrorComponent\":\"$b\",\"missingSlots\":\"$Wc\"}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"MusicDiscovery Blueprint\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Blueprint en runbook voor de MusicDiscovery app\"}]]\n3:null\n"])</script><script>self.__next_f.push([1,"d:I[3072,[\"454\",\"static/chunks/app/projects/music-discovery/page-467af467c69b38cd.js\"],\"default\"]\ne:T5e0,model User {\n  id            String   @id @default(cuid())\n  provider      String   // 'anonymous' of 'spotify'\n  email         String?  @unique\n  displayName   String?\n  avatarUrl     String?\n  locale        String   @default(\"nl\")\n  market        String   @default(\"BE\")\n  createdAt     DateTime @default(now())\n  updatedAt     DateTime @updatedAt\n  snapshots     Snapshot[]\n  favorites     Favorite[]\n  settings      Json?\n  // OAuth tokens apart:\n  spotifyAuth   SpotifyAuth?\n}\n\nmodel SpotifyAuth {\n  id           String   @id @default(cuid())\n  userId       String   @unique\n  accessToken  String\n  refreshToken String\n  scope        String\n  expiresAt    DateTime\n  user         User     @relation(fields: [userId], references: [id])\n}\n\nmodel Favorite {\n  id        String   @id @default(cuid())\n  userId    String\n  artistId  String   // Spotify artist id\n  name      String\n  imageUrl  String?\n  addedAt   DateTime @default(now())\n  user      User     @relation(fields: [userId], references: [id])\n  @@unique([userId, artistId])\n}\n\nmodel Snapshot {\n  id         String   @id @default(cuid())\n  userId     String\n  title      String\n  createdAt  DateTime @default(now())\n  graphJson  Json     // nodes, edges, posities, pins\n  previewUrl String?  // optioneel thumbnail\n  user       User     @relation(fields: [userId], references: [id])\n}\n\nmodel AuditLog {\n  id        String   @id @default(cuid())\n  userId    String?\n  action    String\n  payload   Json?\n  createdAt DateTime @default(now())\n}\n\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"div\",null,{\"className\":\"space-y-6\",\"children\":[[\"$\",\"$Ld\",null,{\"className\":\"mx-auto mt-4 max-w-3xl\"}],[\"$\",\"header\",null,{\"className\":\"space-y-2 rounded-lg border bg-white p-6 shadow-sm\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-2xl font-semibold text-gray-900\",\"children\":\"MusicDiscovery\"}],[\"$\",\"p\",null,{\"className\":\"text-sm text-gray-600\",\"children\":\"Een end-to-end blueprint voor een interactieve muziekontdekkingsapp met Spotify-integratie, force-directed graaf en gedeelde snapshots.\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate max-w-none rounded-lg border bg-white p-6 shadow-sm\",\"children\":[[\"$\",\"h1\",\"h1-0\",{\"children\":\"MusicDiscovery Project Blueprint\"}],\"\\n\",[\"$\",\"hr\",\"hr-0\",{}],\"\\n\",[\"$\",\"h2\",\"h2-0\",{\"children\":\"1. Productvisie en scope\"}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"Doel\"}]}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Interactieve muziekontdekkingsapp. Je start bij een artiest, ziet gelijkaardige artiesten als een sleepbare graaf, klikt door het netwerk en beluistert 30-seconden previews. Je kunt nodes vastpinnen, favorieten bewaren, mini-playlists maken en delen.\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"Primaire databron\"}]}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Spotify Web API met Client Credentials Flow voor server-side calls. Voor preview gebruik je \",[\"$\",\"code\",\"code-0\",{\"children\":\"preview_url\"}],\" van Spotify tracks.\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Audius Public API\"}],\" (gratis en open source) als extra bron voor trending tracks, remixes en community-curated playlists zonder commerciële beperkingen. Gebruik deze als alternatief wanneer Spotify rate-limt of wanneer je een demo zonder accounts wilt draaien.\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Optioneel Last.fm en MusicBrainz als fallback of enrichment.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"Platformen\"}]}],\"\\n\",[\"$\",\"ul\",\"ul-1\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Webapp: React + Vite\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Mobiel: React Native of .NET MAUI (beide haalbaar op basis van dezelfde backend)\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Backend: Node.js + TypeScript (NestJS of Express), of .NET 8 Web API als alternatief\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Database: PostgreSQL\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Cache: Redis\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-1\",{}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"2. Persona’s\"}],\"\\n\",[\"$\",\"ol\",\"ol-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"Casual Explorer\"}]}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Wil snel nieuwe artiesten ontdekken via klikken in de graaf, af en toe een preview luisteren, niets verplicht inloggen.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"Power Listener\"}]}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Wil chain-discovery, pins, notities, mini-playlists en export naar Spotify.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"Curator\"}]}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Wil vergelijkingen, thema’s, tags opslaan, b.v. “Indie folk om te studeren”.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-2\",{}],\"\\n\",[\"$\",\"h2\",\"h2-2\",{\"children\":\"3. Use cases en user stories\"}],\"\\n\",[\"$\",\"h3\",\"h3-0\",{\"children\":\"UC-01 Artiest zoeken\"}],\"\\n\",[\"$\",\"ul\",\"ul-2\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker wil ik een artiest zoeken zodat ik die als vertrekpunt kan nemen.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Zoek met autosuggest.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Enter of klik op resultaat zet die artiest als centrale node.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-1\",{\"children\":\"UC-02 Gelijkaardige artiesten zien\"}],\"\\n\",[\"$\",\"ul\",\"ul-3\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker wil ik rond de centrale artiest 8 tot 12 gelijkaardige artiesten zien zodat ik verder kan verkennen.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Nodes met ronde avatars, labels.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Edges tussen centrum en buren.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Geen duplicaten.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-2\",{\"children\":\"UC-03 Node interacties\"}],\"\\n\",[\"$\",\"ul\",\"ul-4\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker wil ik nodes kunnen verslepen en pinnen voor een eigen lay-out.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Als gebruiker wil ik op een node klikken en een contextmenu zien met: titel, Listen, More Similar Artists.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Drag met veer-effect.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Pin zet de node vast.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Contextmenu sluit bij buitenklik of ESC.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-3\",{\"children\":\"UC-04 Meer gelijkaardigen laden\"}],\"\\n\",[\"$\",\"ul\",\"ul-5\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker wil ik op “More Similar Artists” klikken om die node tot pivot te maken en nieuwe buren te zien.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Lazy load, dedupe, animatie van edges.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Nieuwe buren verschijnen in een ring rond de pivot.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-4\",{\"children\":\"UC-05 Luisterpreview\"}],\"\\n\",[\"$\",\"ul\",\"ul-6\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker wil ik 30-sec previews afspelen met play/pause en volume.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Eén globale player, nieuw nummer stopt het vorige.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Indien geen preview: disabled actie en link “Open in Spotify”.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-5\",{\"children\":\"UC-06 Favorieten en pins\"}],\"\\n\",[\"$\",\"ul\",\"ul-7\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker wil ik artiesten en playlists kunnen bewaren en nodes pinnen zodat ik later kan terugkeren.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Favoriet-toggle per artiest.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Behouden van pin status per sessie en per opgeslagen graaf.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-6\",{\"children\":\"UC-07 Sessies en graaf-snapshots\"}],\"\\n\",[\"$\",\"ul\",\"ul-8\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker wil ik mijn huidige graaf kunnen opslaan als snapshot en later opnieuw openen.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Slaat nodes, posities, pins en timestamp op.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Delen via deeplink.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-7\",{\"children\":\"UC-08 Exporteren naar Spotify\"}],\"\\n\",[\"$\",\"ul\",\"ul-9\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als power user wil ik de geselecteerde tracks kunnen exporteren naar een Spotify playlist.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Vereist OAuth Authorization Code flow.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Gebruiker kiest naam, playlist wordt aangemaakt.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-8\",{\"children\":\"UC-09 Fallback en errors\"}],\"\\n\",[\"$\",\"ul\",\"ul-10\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker wil ik duidelijke meldingen bij API errors en rate limits.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Netwerkfouten tonen toasts met retry.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Rate limit backoff en waarschuwing.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-9\",{\"children\":\"UC-10 Toegankelijkheid\"}],\"\\n\",[\"$\",\"ul\",\"ul-11\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Als gebruiker met toetsenbord wil ik nodes en menu’s kunnen bedienen.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Acceptatie:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Focus states, ARIA labels, contrast AA.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-3\",{}],\"\\n\",[\"$\",\"h2\",\"h2-3\",{\"children\":\"4. Functionele eisen\"}],\"\\n\",[\"$\",\"ul\",\"ul-12\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Sleepbare, zoomable graaf met collision-avoidance.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Radiale ring rond pivot bij eerste plaatsing, daarna lichte force simulatie.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Dedupe op artiest-id door volledige graaf.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Cache per artiest: related en top tracks.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Player met progress bar en volume.\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":\"Zoek met debounced autosuggest.\"}],\"\\n\",[\"$\",\"li\",\"li-6\",{\"children\":\"Snapshots en favorieten server-side opgeslagen per gebruiker.\"}],\"\\n\",[\"$\",\"li\",\"li-7\",{\"children\":\"Optioneel gastmodus met localStorage.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-4\",{}],\"\\n\",[\"$\",\"h2\",\"h2-4\",{\"children\":\"5. Niet-functionele eisen\"}],\"\\n\",[\"$\",\"ul\",\"ul-13\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"TTFB voor initieel scherm onder 200 ms vanaf CDN.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"API p95 \u003c 300 ms voor cached routes, \u003c 800 ms voor uncached.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"60 fps animatie bij \u003c 200 nodes op gemiddelde laptop.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"A11y WCAG 2.1 AA.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Meertaligheid: NL, EN.\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":\"GDPR: enkel functionele data, geen gevoelige persoonsgegevens.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-5\",{}],\"\\n\",[\"$\",\"h2\",\"h2-5\",{\"children\":\"6. Informatiearchitectuur en schermen\"}],\"\\n\",[\"$\",\"h3\",\"h3-10\",{\"children\":\"6.1 Web UI lay-out\"}],\"\\n\",[\"$\",\"ul\",\"ul-14\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Header: logo, zoekbalk, user menu.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Main:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Linker 70 procent: graaf canvas.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Rechter 30 procent: zijpaneel player en details.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Footer: volumeregelaar en transport.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-11\",{\"children\":\"6.2 Belangrijke schermen\"}],\"\\n\",[\"$\",\"ol\",\"ol-1\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Home: lege staat met zoekfocus.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Discovery: graaf + details.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Favorieten: lijst van artiesten.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Snapshots: opgeslagen grafen met thumbnails.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"OAuth callback scherm.\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":\"Settings: taal, thema licht/donker, marktcode voor top tracks.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-6\",{}],\"\\n\",[\"$\",\"h2\",\"h2-6\",{\"children\":\"7. UX-interacties\"}],\"\\n\",[\"$\",\"ul\",\"ul-15\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Node hover: vergroting 1.05, rand highlight, edges highlight.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Node drag: pointer-cursor, physics pauseren tot drop.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Contextmenu: vaste breedte 260 px, titelregel, actieknoppen.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[\"Keyboard:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Pijlen bewegen focus tussen nodes.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Enter opent contextmenu.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Space togglet play op geselecteerde track.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Empty states: duidelijke icon + boodschap + call to action.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-7\",{}],\"\\n\",[\"$\",\"h2\",\"h2-7\",{\"children\":\"8. Architectuur\"}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"[Client] React SPA\\n   |\\n   | HTTPS JSON\\n   v\\n[API] Node/TS (NestJS of Express)\\n   |\\\\\\n   | \\\\__ Audius proxy (open API)\\n   |      v\\n   |    [Audius Public API]\\n   |\\n   | Redis cache\\n   v\\n[PostgreSQL] gebruikers, snapshots, favorieten\\n   |\\n   | Spotify OAuth tokens\\n   v\\n[Spotify Web API]\\n\\n\"}]}],\"\\n\",[\"$\",\"ul\",\"ul-16\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Server doet Spotify calls met Client Credentials voor publieke data.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Audius proxy gebruikt openbare endpoints en slaat geen secrets op; alleen caching/normalisatie in backend.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Voor user-acties zoals playlist creatie gebruik je Authorization Code flow.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-8\",{}],\"\\n\",[\"$\",\"h2\",\"h2-8\",{\"children\":\"9. Datamodel (PostgreSQL, Prisma-stijl)\"}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"$e\"}]}],\"\\n\",[\"$\",\"hr\",\"hr-9\",{}],\"\\n\",[\"$\",\"h2\",\"h2-9\",{\"children\":\"10. Frontend datamodellen (TypeScript)\"}],\"\\n\",[\"$\",\"pre\",\"pre-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-tsx\",\"children\":\"export type Artist = {\\n  id: string;\\n  name: string;\\n  imageUrl?: string;\\n  genres?: string[];\\n  popularity?: number;\\n};\\n\\nexport type Track = {\\n  id: string;\\n  name: string;\\n  previewUrl?: string;\\n  durationMs: number;\\n  artists: { id: string; name: string }[];\\n};\\n\\nexport type NodeData = {\\n  id: string;           // unique per graph node\\n  artistId: string;     // Spotify id\\n  name: string;\\n  imageUrl?: string;\\n  pinned?: boolean;\\n  x?: number; y?: number; fx?: number; fy?: number;\\n};\\n\\nexport type EdgeData = { source: string; target: string };\\n\\nexport type GraphState = {\\n  nodes: NodeData[];\\n  edges: EdgeData[];\\n  pivotNodeId: string;\\n  loadedNeighbors: Record\u003cstring, string[]\u003e; // artistId -\u003e neighbor ids\\n};\\n\\n\"}]}],\"\\n\",[\"$\",\"hr\",\"hr-10\",{}],\"\\n\",[\"$\",\"h2\",\"h2-10\",{\"children\":\"11. API specificatie (REST)\"}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":[\"Alle routes onder \",[\"$\",\"code\",\"code-0\",{\"children\":\"/api\"}],\". Responses zijn JSON. Tijdsformaat ISO 8601. Auth via JWT of session cookie. Rate limit 60 req/min per IP.\"]}],\"\\n\",[\"$\",\"h3\",\"h3-12\",{\"children\":\"11.1 Auth en gebruikers\"}],\"\\n\",[\"$\",\"ul\",\"ul-17\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"POST /auth/anonymous\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Resultaat: \",[\"$\",\"code\",\"code-0\",{\"children\":\"{ token, user: User }\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /auth/spotify/login\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Redirect naar Spotify\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /auth/spotify/callback?code=...\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Resultaat: set session, redirect naar app\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"POST /auth/logout\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-13\",{\"children\":\"11.2 Spotify proxy\"}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":\"Server-side om client te ontlasten en secrets te verbergen.\"}],\"\\n\",[\"$\",\"ul\",\"ul-18\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/search?query=ben%20howard\u0026type=artist\u0026limit=10\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Resultaat: \",[\"$\",\"code\",\"code-0\",{\"children\":\"[{ id, name, imageUrl, genres, popularity }]\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/artists/:id\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Resultaat: \",[\"$\",\"code\",\"code-0\",{\"children\":\"{ id, name, imageUrl, genres, popularity }\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/artists/:id/related\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Resultaat: \",[\"$\",\"code\",\"code-0\",{\"children\":\"[{ ...Artist }]\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/artists/:id/top-tracks?market=BE\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Resultaat: \",[\"$\",\"code\",\"code-0\",{\"children\":\"[{ ...Track }]\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/tracks/:id\"}]}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/audio-features/:id\"}],\" (optioneel, voor eigen similarity)\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":[\"Caching: Redis 24 uur voor \",[\"$\",\"code\",\"code-0\",{\"children\":\"related\"}],\" en 6 uur voor \",[\"$\",\"code\",\"code-1\",{\"children\":\"top-tracks\"}],\".\"]}],\"\\n\",[\"$\",\"h3\",\"h3-14\",{\"children\":\"11.3 Audius proxy (open API)\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":\"Gebruik de gratis Audius API via https://discoveryprovider.audius.co. Geen auth vereist, maar voeg een eenvoudige rate limiter toe.\"}],\"\\n\",[\"$\",\"ul\",\"ul-19\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /audius/tracks/trending?genre=electronic\u0026limit=20\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Resultaat: lijst met trending tracks inclusief \",[\"$\",\"code\",\"code-0\",{\"children\":\"title\"}],\", \",[\"$\",\"code\",\"code-1\",{\"children\":\"user\"}],\", \",[\"$\",\"code\",\"code-2\",{\"children\":\"stream_url\"}],\".\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /audius/users/:handle/tracks\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Resultaat: tracks per artiest/creator voor graafuitbreiding.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /audius/tracks/:id/stream\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Resultaat: directe stream-URL voor previews.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":\"Cache responses max 10 minuten; Audius data verandert sneller en is toch gratis beschikbaar.\"}],\"\\n\",[\"$\",\"h3\",\"h3-15\",{\"children\":\"11.4 App-data\"}],\"\\n\",[\"$\",\"ul\",\"ul-20\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"GET /me\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Resultaat: \",[\"$\",\"code\",\"code-0\",{\"children\":\"User\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /favorites\"}]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"POST /favorites\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Body: \",[\"$\",\"code\",\"code-0\",{\"children\":\"{ artistId, name, imageUrl }\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"DELETE /favorites/:artistId\"}]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /snapshots\"}]}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"POST /snapshots\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Body: \",[\"$\",\"code\",\"code-0\",{\"children\":\"{ title, graphJson }\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-6\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /snapshots/:id\"}]}],\"\\n\",[\"$\",\"li\",\"li-7\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"DELETE /snapshots/:id\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-16\",{\"children\":\"11.5 Export\"}],\"\\n\",[\"$\",\"ul\",\"ul-21\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"POST /export/spotify-playlist\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Auth vereist met Spotify scope \",[\"$\",\"code\",\"code-0\",{\"children\":\"playlist-modify-public\"}],\" of \",[\"$\",\"code\",\"code-1\",{\"children\":\"playlist-modify-private\"}]]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Body: \",[\"$\",\"code\",\"code-0\",{\"children\":\"{ name, trackIds: string[] }\"}]]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"Resultaat: \",[\"$\",\"code\",\"code-0\",{\"children\":\"{ playlistId, externalUrl }\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-17\",{\"children\":\"11.6 Foutcodes\"}],\"\\n\",[\"$\",\"ul\",\"ul-22\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"400\"}],\" validation_error\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"401\"}],\" unauthorized\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"403\"}],\" forbidden\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"404\"}],\" not_found\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"409\"}],\" conflict\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"429\"}],\" rate_limited\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-6\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"500\"}],\" server_error\"]}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":[\"Body altijd \",[\"$\",\"code\",\"code-0\",{\"children\":\"{ error: { code, message, details? } }\"}],\".\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-11\",{}],\"\\n\",[\"$\",\"h2\",\"h2-11\",{\"children\":\"12. Integratie met Spotify\"}],\"\\n\",[\"$\",\"h3\",\"h3-18\",{\"children\":\"12.1 OAuth\"}],\"\\n\",[\"$\",\"ul\",\"ul-23\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Voor data zonder usercontext: \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"Client Credentials Flow\"}],\" op de server.\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Voor playlist export of user-gegevens: \",[\"$\",\"strong\",\"strong-0\",{\"children\":\"Authorization Code Flow\"}],\" met refresh tokens.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-19\",{\"children\":\"12.2 Relevante endpoints\"}],\"\\n\",[\"$\",\"ul\",\"ul-24\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /v1/search?type=artist\u0026q=...\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /v1/artists/{id}\"}]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /v1/artists/{id}/related-artists\"}]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /v1/artists/{id}/top-tracks?market=BE\"}]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /v1/tracks/{id}\"}]}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /v1/audio-features/{id}\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":\"Voorbeelden van genormaliseerde server-responses zijn hierboven gegeven. Bewaar geen Spotify secrets in de client.\"}],\"\\n\",[\"$\",\"h3\",\"h3-20\",{\"children\":\"12.3 Audius integratie (optioneel)\"}],\"\\n\",[\"$\",\"ul\",\"ul-25\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Geen OAuth vereist, maar voeg een \",[\"$\",\"code\",\"code-0\",{\"children\":\"User-Agent\"}],\" header toe en respecteer \",[\"$\",\"code\",\"code-1\",{\"children\":\"X-RateLimit\"}],\" headers.\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Normaliseer Audius response naar hetzelfde \",[\"$\",\"code\",\"code-0\",{\"children\":\"Artist\"}],\" en \",[\"$\",\"code\",\"code-1\",{\"children\":\"Track\"}],\" model (gebruik \",[\"$\",\"code\",\"code-2\",{\"children\":\"user.name\"}],\" als artiest, \",[\"$\",\"code\",\"code-3\",{\"children\":\"stream_url\"}],\" voor previews).\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Markeer Audius-content in de UI (bijv. badge \\\"Audius\\\") zodat gebruikers weten dat het community-sourced is.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Gebruik Audius vooral in gastmodus of wanneer Spotify preview ontbreekt; fallback logic: eerst Spotify preview, anders Audius stream.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-12\",{}],\"\\n\",[\"$\",\"h2\",\"h2-12\",{\"children\":\"13. Algorithmische details\"}],\"\\n\",[\"$\",\"h3\",\"h3-21\",{\"children\":\"13.1 Initieel plaatsen\"}],\"\\n\",[\"$\",\"ul\",\"ul-26\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Plaats pivot op canvas-centrum.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Plaats n buren op een cirkel met straal \",[\"$\",\"code\",\"code-0\",{\"children\":\"R = k * sqrt(n)\"}],\" en verdeling \",[\"$\",\"code\",\"code-1\",{\"children\":\"angle = 2πi/n\"}],\".\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Sla posities op in node.x, node.y en laat daarna een lichte force simulatie lopen.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-22\",{\"children\":\"13.2 Force simulatie\"}],\"\\n\",[\"$\",\"ul\",\"ul-27\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Use case: overlap vermijden, organisch effect.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Krachten:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Link force met lengte 150\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Charge negative 30\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Collision radius gelijk aan node-diameter + 4\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Tijdens drag: zet fx, fy op muispositie. Bij drop verwijder fx, fy tenzij pinned.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-23\",{\"children\":\"13.3 Dedupe\"}],\"\\n\",[\"$\",\"ul\",\"ul-28\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Nieuwe neighbor set: filter op \",[\"$\",\"code\",\"code-0\",{\"children\":\"artistId\"}],\" die al in \",[\"$\",\"code\",\"code-1\",{\"children\":\"graphState.nodes\"}],\" zit.\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Edges: voeg enkel toe als combinatie nog niet bestaat.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-24\",{\"children\":\"13.4 Prefetch en cache\"}],\"\\n\",[\"$\",\"ul\",\"ul-29\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Wanneer node in viewport en niet geladen: prefetch \",[\"$\",\"code\",\"code-0\",{\"children\":\"related\"}],\" en \",[\"$\",\"code\",\"code-1\",{\"children\":\"top-tracks\"}],\".\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Cache key: \",[\"$\",\"code\",\"code-0\",{\"children\":\"artist:{id}:related\"}],\" en \",[\"$\",\"code\",\"code-1\",{\"children\":\"artist:{id}:topTracks:{market}\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-13\",{}],\"\\n\",[\"$\",\"h2\",\"h2-13\",{\"children\":\"14. Componentarchitectuur (React)\"}],\"\\n\",[\"$\",\"pre\",\"pre-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"\u003cApp\u003e\\n  \u003cHeader\u003e\\n    \u003cSearchBar /\u003e\\n    \u003cUserMenu /\u003e\\n  \u003c/Header\u003e\\n\\n  \u003cMain\u003e\\n    \u003cGraphCanvas\\n      graphState\\n      onNodeClick\\n      onNodeDrag\\n      onPinToggle\\n      onContextAction\\n    /\u003e\\n    \u003cSidePanel\u003e\\n      \u003cArtistHeader /\u003e\\n      \u003cTopTracks /\u003e\\n      \u003cActions /\u003e\\n    \u003c/SidePanel\u003e\\n  \u003c/Main\u003e\\n\\n  \u003cFooter\u003e\\n    \u003cGlobalPlayer /\u003e\\n  \u003c/Footer\u003e\\n\u003c/App\u003e\\n\\n\"}]}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":\"State management:\"}],\"\\n\",[\"$\",\"ul\",\"ul-30\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"React Query voor data-fetch en cache.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Zustand of Redux Toolkit voor \",[\"$\",\"code\",\"code-0\",{\"children\":\"GraphState\"}],\" en player.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-14\",{}],\"\\n\",[\"$\",\"h2\",\"h2-14\",{\"children\":\"15. UI-richtlijnen\"}],\"\\n\",[\"$\",\"ul\",\"ul-31\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Node afmetingen: 96 px standaard, 120 px voor pivot.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Label max 20 tekens, ellipsis na 1 regel.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Edge 1 px lichtgrijs, opacity 0.6.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Thema licht en donker. Contrast minimaal AA.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Animaties: 150 tot 250 ms ease-in-out.\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":\"Contextmenu met duidelijke hit targets, 40 px hoogte per item.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-15\",{}],\"\\n\",[\"$\",\"h2\",\"h2-15\",{\"children\":\"16. Toegankelijkheid\"}],\"\\n\",[\"$\",\"ul\",\"ul-32\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Alle interacties via keyboard mogelijk.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Node als \",[\"$\",\"code\",\"code-0\",{\"children\":\"button\"}],\" met \",[\"$\",\"code\",\"code-1\",{\"children\":\"aria-label=\\\"Artist: {name}\\\"\"}],\".\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Contextmenu met roving tabindex.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Focusring 2 px zichtbaar.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"Voor player: \",[\"$\",\"code\",\"code-0\",{\"children\":\"aria-live=\\\"polite\\\"\"}],\" bij trackwissel.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-16\",{}],\"\\n\",[\"$\",\"h2\",\"h2-16\",{\"children\":\"17. Internationalisatie\"}],\"\\n\",[\"$\",\"ul\",\"ul-33\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"i18n keys in JSON, fallback EN.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Marktcode voor top tracks instelbaar in Settings.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Datum en getallen via Intl API.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-17\",{}],\"\\n\",[\"$\",\"h2\",\"h2-17\",{\"children\":\"18. Beveiliging en privacy\"}],\"\\n\",[\"$\",\"ul\",\"ul-34\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"OAuth tokens server-side versleuteld (AES-GCM) met roterende key.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Cookies \",[\"$\",\"code\",\"code-0\",{\"children\":\"HttpOnly\"}],\", \",[\"$\",\"code\",\"code-1\",{\"children\":\"Secure\"}],\", \",[\"$\",\"code\",\"code-2\",{\"children\":\"SameSite=Lax\"}],\".\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"CORS strikt op frontend origin.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Rate limiting en bot-protect op public routes.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"CSP headers, Referrer-Policy, X-Content-Type-Options.\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":\"Log geen volledige tokens in audit.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-18\",{}],\"\\n\",[\"$\",\"h2\",\"h2-18\",{\"children\":\"19. Performance en schaalbaarheid\"}],\"\\n\",[\"$\",\"ul\",\"ul-35\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Vite bundling, code-splitting, lazy load voor SidePanel.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Afbeeldingen via \",[\"$\",\"code\",\"code-0\",{\"children\":\"\u003cimg srcset\u003e\"}],\" en CDNs, of proxied met cache.\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Canvas rendering voor graaf bij \u003e 100 nodes.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"API caching op Redis. Warm caches voor populaire artiesten.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-19\",{}],\"\\n\",[\"$\",\"h2\",\"h2-19\",{\"children\":\"20. Teststrategie\"}],\"\\n\",[\"$\",\"h3\",\"h3-25\",{\"children\":\"20.1 Unit\"}],\"\\n\",[\"$\",\"ul\",\"ul-36\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Pure helpers: dedupe, layout, mappers van Spotify naar interne modellen.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-26\",{\"children\":\"20.2 Integratie\"}],\"\\n\",[\"$\",\"ul\",\"ul-37\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"API routes met mocked Spotify via MSW of WireMock.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-27\",{\"children\":\"20.3 E2E\"}],\"\\n\",[\"$\",\"ul\",\"ul-38\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Playwright:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Zoek artiest, laad graaf, klik node, luister preview, snapshot bewaren.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-28\",{\"children\":\"20.4 Performancetests\"}],\"\\n\",[\"$\",\"ul\",\"ul-39\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Lighthouse en WebPageTest.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"K6 voor backend, scenario met 50 rps bursts.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-29\",{\"children\":\"20.5 Toegankelijkheid\"}],\"\\n\",[\"$\",\"ul\",\"ul-40\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"axe-core geautomatiseerd in CI.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-20\",{}],\"\\n\",[\"$\",\"h2\",\"h2-20\",{\"children\":\"21. Telemetrie en analytics\"}],\"\\n\",[\"$\",\"ul\",\"ul-41\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Eventen: search_performed, node_opened, neighbors_loaded, track_preview_played, snapshot_saved, export_playlist.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Privacyvriendelijk, zonder PII.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Error tracking met Sentry.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-21\",{}],\"\\n\",[\"$\",\"h2\",\"h2-21\",{\"children\":\"22. CI/CD en deployment\"}],\"\\n\",[\"$\",\"ul\",\"ul-42\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Monorepo met Turbo of Nx.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"CI: lint, typecheck, test, build, audit.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Docker images voor api en web.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Docker Compose voor dev.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Prod op Fly.io, Railway, Azure of AWS.\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":\"Migraties via Prisma Migrate.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":[\"$\",\"strong\",\"strong-0\",{\"children\":\"Omgevingsvariabelen\"}]}],\"\\n\",[\"$\",\"pre\",\"pre-4\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"SPOTIFY_CLIENT_ID=\\nSPOTIFY_CLIENT_SECRET=\\nSPOTIFY_REDIRECT_URI=https://app.example.com/auth/spotify/callback\\nJWT_SECRET=\\nDATABASE_URL=postgres://...\\nREDIS_URL=redis://...\\nBASE_URL=https://api.example.com\\n\\n\"}]}],\"\\n\",[\"$\",\"hr\",\"hr-22\",{}],\"\\n\",[\"$\",\"h2\",\"h2-22\",{\"children\":\"23. Backlog en roadmap\"}],\"\\n\",[\"$\",\"h3\",\"h3-30\",{\"children\":\"MVP\"}],\"\\n\",[\"$\",\"ul\",\"ul-43\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Zoek, discovery graaf, drag, contextmenu, listen, top tracks, favorieten lokaal.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Spotify proxy met Client Credentials.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Gastmodus.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-31\",{\"children\":\"V1\"}],\"\\n\",[\"$\",\"ul\",\"ul-44\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Accounts, server-side favorieten en snapshots.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Deelbare deeplinks.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Donker thema, i18n.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",\"h3-32\",{\"children\":\"V2\"}],\"\\n\",[\"$\",\"ul\",\"ul-45\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Spotify playlist export via OAuth.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Fallback naar Last.fm bij lege related.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Eigen similarity op basis van audio features.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-23\",{}],\"\\n\",[\"$\",\"h2\",\"h2-23\",{\"children\":\"24. Acceptatiecriteria per kernfeature\"}],\"\\n\",[\"$\",\"ul\",\"ul-46\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Zoek\"}],\": binnen 300 ms resultaten bij cache hit, geen XSS via query, keyboard navigatie ok.\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Graaf\"}],\": geen overlappende nodes in rust, drag performant, dedupe 100 procent.\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Listen\"}],\": preview start onder 200 ms bij cache hit, visual feedback playing.\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Snapshots\"}],\": POST met 201, GET levert identieke lay-out terug.\"]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"Export\"}],\": playlist verschijnt in Spotify account en bevat juiste tracks.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-24\",{}],\"\\n\",[\"$\",\"h2\",\"h2-24\",{\"children\":\"25. Voorbeeld payloads\"}],\"\\n\",[\"$\",\"h3\",\"h3-33\",{\"children\":[\"25.1 \",[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/search?query=ben howard\u0026type=artist\"}]]}],\"\\n\",[\"$\",\"pre\",\"pre-5\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-json\",\"children\":\"{\\n  \\\"items\\\": [\\n    {\\n      \\\"id\\\": \\\"5schHn4kqRZfzJ6Tu2B3Yl\\\",\\n      \\\"name\\\": \\\"Ben Howard\\\",\\n      \\\"imageUrl\\\": \\\"https://i.scdn.co/image/...\\\",\\n      \\\"genres\\\": [\\\"indie folk\\\", \\\"singer-songwriter\\\"],\\n      \\\"popularity\\\": 67\\n    }\\n  ]\\n}\\n\\n\"}]}],\"\\n\",[\"$\",\"h3\",\"h3-34\",{\"children\":[\"25.2 \",[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/artists/{id}/related\"}]]}],\"\\n\",[\"$\",\"pre\",\"pre-6\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-json\",\"children\":\"{\\n  \\\"items\\\": [\\n    { \\\"id\\\": \\\"0Z8k3Hc2\\\", \\\"name\\\": \\\"Bear's Den\\\", \\\"imageUrl\\\": \\\"...\\\" },\\n    { \\\"id\\\": \\\"1aS9\\\", \\\"name\\\": \\\"Nick Mulvey\\\", \\\"imageUrl\\\": \\\"...\\\" }\\n  ]\\n}\\n\\n\"}]}],\"\\n\",[\"$\",\"h3\",\"h3-35\",{\"children\":[\"25.3 \",[\"$\",\"code\",\"code-0\",{\"children\":\"GET /spotify/artists/{id}/top-tracks?market=BE\"}]]}],\"\\n\",[\"$\",\"pre\",\"pre-7\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-json\",\"children\":\"{\\n  \\\"items\\\": [\\n    {\\n      \\\"id\\\": \\\"3abc\\\",\\n      \\\"name\\\": \\\"Only Love\\\",\\n      \\\"previewUrl\\\": \\\"https://p.scdn.co/mp3-preview/...\\\",\\n      \\\"durationMs\\\": 229000,\\n      \\\"artists\\\": [{ \\\"id\\\": \\\"5sch...\\\", \\\"name\\\": \\\"Ben Howard\\\" }]\\n    }\\n  ]\\n}\\n\\n\"}]}],\"\\n\",[\"$\",\"hr\",\"hr-25\",{}],\"\\n\",[\"$\",\"h2\",\"h2-25\",{\"children\":\"26. Pseudocode kerndelen\"}],\"\\n\",[\"$\",\"h3\",\"h3-36\",{\"children\":\"26.1 Neighbors laden en toevoegen\"}],\"\\n\",[\"$\",\"pre\",\"pre-8\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-tsx\",\"children\":\"async function expandNode(pivotArtistId: string) {\\n  if (graph.loadedNeighbors[pivotArtistId]) return;\\n\\n  const res = await api.getRelated(pivotArtistId);\\n  const newArtists = res.items.filter(a =\u003e !graph.nodes.some(n =\u003e n.artistId === a.id));\\n\\n  const newNodes = newArtists.map((a, i) =\u003e ({\\n    id: cuid(), artistId: a.id, name: a.name, imageUrl: a.imageUrl,\\n    ...radialPosition(i, newArtists.length, pivotPosition())\\n  }));\\n\\n  graph.nodes.push(...newNodes);\\n  graph.edges.push(...newNodes.map(n =\u003e ({ source: findNodeIdByArtist(pivotArtistId), target: n.id })));\\n  graph.loadedNeighbors[pivotArtistId] = newArtists.map(a =\u003e a.id);\\n}\\n\\n\"}]}],\"\\n\",[\"$\",\"h3\",\"h3-37\",{\"children\":\"26.2 Player\"}],\"\\n\",[\"$\",\"pre\",\"pre-9\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-tsx\",\"children\":\"let audio = new Audio();\\nfunction playPreview(track: Track) {\\n  if (!track.previewUrl) return;\\n  audio.src = track.previewUrl;\\n  audio.play();\\n}\\nfunction pause() { audio.pause(); }\\n\\n\"}]}],\"\\n\",[\"$\",\"hr\",\"hr-26\",{}],\"\\n\",[\"$\",\"h2\",\"h2-26\",{\"children\":\"27. Styling en design system\"}],\"\\n\",[\"$\",\"ul\",\"ul-47\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Tailwind of CSS Variables.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Components: Button, Card, Menu, Tooltip, Tabs, Dialog.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Schaduwen zacht, afgeronde hoeken xl.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Preflight fonts: Inter of System UI.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-27\",{}],\"\\n\",[\"$\",\"h2\",\"h2-27\",{\"children\":\"28. Mobiele app aandachtspunten\"}],\"\\n\",[\"$\",\"ul\",\"ul-48\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Zelfde backend.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"React Native: gebruik \",[\"$\",\"code\",\"code-0\",{\"children\":\"react-native-svg\"}],\" of \",[\"$\",\"code\",\"code-1\",{\"children\":\"expo-three\"}],\" voor graaf, of vereenvoudigde lijst-navigatie met horizontale carrousel als performance beperkt is.\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\".NET MAUI: canvas via SkiaSharp voor de graaf.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Offline: cache van laatst bezochte artiesten en snapshots in SQLite.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-28\",{}],\"\\n\",[\"$\",\"h2\",\"h2-28\",{\"children\":\"29. Licenties en content\"}],\"\\n\",[\"$\",\"ul\",\"ul-49\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Spotify preview_url en images mogen als preview gebruikt worden volgens Spotify TOS. Link altijd naar de artiest of track in Spotify bij detailweergave. Bewaar geen audio lokaal.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-29\",{}],\"\\n\",[\"$\",\"h2\",\"h2-29\",{\"children\":\"30. Things to remember tijdens implementatie\"}],\"\\n\",[\"$\",\"ul\",\"ul-50\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Duidelijke loading states en skeletons bij zijpaneel.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Dedupe strikt op Spotify artist id.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"Backoff bij \",[\"$\",\"code\",\"code-0\",{\"children\":\"429\"}],\" met \",[\"$\",\"code\",\"code-1\",{\"children\":\"Retry-After\"}],\".\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Log elke Spotify call met endpoint, status, duur.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Feature flags voor export en eigen similarity.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",\"hr-30\",{}],\"\\n\",[\"$\",\"h2\",\"h2-30\",{\"children\":\"31. Checklist om te starten\"}],\"\\n\",[\"$\",\"ol\",\"ol-2\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Spotify app registreren en Client ID/Secret invullen.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Backend scaffolding opzetten met healthcheck en één proxy route.\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"Redis en Postgres draaien via Docker.\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Frontend met Vite, React Query, router.\"}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":\"Basisgraaf renderen met dummy data.\"}],\"\\n\",[\"$\",\"li\",\"li-5\",{\"children\":[\"Echte \",[\"$\",\"code\",\"code-0\",{\"children\":\"search\"}],\" en \",[\"$\",\"code\",\"code-1\",{\"children\":\"related\"}],\" inbouwen.\"]}],\"\\n\",[\"$\",\"li\",\"li-6\",{\"children\":\"Player en SidePanel toevoegen.\"}],\"\\n\",[\"$\",\"li\",\"li-7\",{\"children\":\"Favorieten en snapshots aansluiten op database.\"}],\"\\n\",[\"$\",\"li\",\"li-8\",{\"children\":\"CI/CD pipeline.\"}],\"\\n\",[\"$\",\"li\",\"li-9\",{\"children\":\"Lighthouse, axe en Playwright in CI.\"}],\"\\n\"]}]]}]]}]\n"])</script></body></html>